(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5143],{3525:(e,t,a)=>{Promise.resolve().then(a.bind(a,16133))},5660:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>n});var s=a(74364);a(10640);var l=a(4756),r=a(31792),i=a(11915);let n=(0,r.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:r,asChild:o=!1,...d}=e,c=o?l.DX:"button";return(0,s.jsx)(c,{"data-slot":"button",className:(0,i.cn)(n({variant:a,size:r,className:t})),...d})}},5944:(e,t,a)=>{"use strict";a.d(t,{G:()=>c});var s=a(74364),l=a(10640),r=a(5660),i=a(6651),n=a(46638),o=a(25664),d=a(73475);function c(e){let{value:t="",onChange:a,multiple:c=!1,defaultImage:u="",disabled:m=!1,size:h="md"}=e,{locale:g}=(0,d.Y)(),x=c?Array.isArray(t)?t:t?[t]:[]:Array.isArray(t)?t[0]||"":t||"",p=c?x.length>0:!!x,f=c||!p,y=!p&&u,v=y?[u]:c?x:[x],b={sm:"w-12 h-12",md:"w-20 h-20",lg:"w-32 h-32"},[j,C]=(0,l.useState)(!1),N=e=>{if(c){let t=x.filter((t,a)=>a!==e);null==a||a(t)}else null==a||a("")};return(0,s.jsxs)("div",{className:"space-y-3",children:[(p||y)&&(0,s.jsx)("div",{className:"grid gap-3 ".concat(c?"grid-cols-2 md:grid-cols-3":"grid-cols-1 max-w-xs"),children:v.filter(Boolean).map((e,t)=>(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"".concat(b[h]," rounded-full overflow-hidden border-2 border-gray-200"),children:(0,s.jsx)("img",{src:e,alt:"zh"===g?"标识":"Profile",className:"w-full h-full object-cover"})}),!y&&(0,s.jsx)(r.$,{type:"button",variant:"destructive",size:"sm",className:"absolute top-1 right-1 h-6 w-6 p-0 rounded-full",onClick:()=>N(t),disabled:m,children:(0,s.jsx)(i.A,{className:"h-3 w-3"})}),y&&(0,s.jsx)("div",{className:"absolute -bottom-1 left-1/2 transform -translate-x-1/2 bg-black/50 text-white text-xs px-2 py-1 rounded-full",children:"zh"===g?"默认":"Default"})]},t))}),f&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-24 border-2 border-dashed border-gray-300 rounded",children:[(0,s.jsx)(n.A,{className:"h-8 w-8 text-gray-400 mb-2"}),(0,s.jsxs)(r.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=document.createElement("input");e.type="file",e.accept="image/*",e.multiple=c,e.onchange=async e=>{let t=e.target.files;if(t&&t.length>0){C(!0);try{let e=async e=>{let t=new FormData;t.append("file",e);let a=await fetch("".concat("http://localhost:3007","/api/upload"),{method:"POST",headers:{},body:t}),s=await a.json();if(!a.ok||!(null==s?void 0:s.success)||!(null==s?void 0:s.url))throw Error((null==s?void 0:s.message)||"上传失败");return s.url},s=[];for(let a of Array.from(t)){let t=await e(a);s.push(t)}if(c){let e=x||[];null==a||a([...e,...s])}else null==a||a(s[0])}catch(e){console.error("头像上传失败",e)}finally{C(!1)}}},e.click()},disabled:m||j,className:"gap-1",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),j?"zh"===g?"正在上传...":"Uploading...":"zh"===g?"上传标识".concat(c&&p?"（追加）":""):"Upload Profile".concat(c&&p?" (Add)":"")]})]}),c&&(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"zh"===g?"支持选择多个图片文件进行批量上传":"Select multiple image files for batch upload"})]})}},9313:(e,t,a)=>{"use strict";a.d(t,{SQ:()=>o,_2:()=>d,lp:()=>c,mB:()=>u,rI:()=>i,ty:()=>n});var s=a(74364);a(10640);var l=a(15205),r=a(11915);function i(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"dropdown-menu",...t})}function n(e){let{...t}=e;return(0,s.jsx)(l.l9,{"data-slot":"dropdown-menu-trigger",...t})}function o(e){let{className:t,sideOffset:a=4,...i}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...i})})}function d(e){let{className:t,inset:a,variant:i="default",...n}=e;return(0,s.jsx)(l.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":i,className:(0,r.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}function c(e){let{className:t,inset:a,...i}=e;return(0,s.jsx)(l.JU,{"data-slot":"dropdown-menu-label","data-inset":a,className:(0,r.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",t),...i})}function u(e){let{className:t,...a}=e;return(0,s.jsx)(l.wv,{"data-slot":"dropdown-menu-separator",className:(0,r.cn)("bg-border -mx-1 my-1 h-px",t),...a})}},11915:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(44542),l=a(61375);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,s.$)(t))}},16133:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var s=a(74364),l=a(10640),r=a(28410),i=a(5660),n=a(74688),o=a(97173),d=a(25646),c=a(88224),u=a(9313),m=a(25664),h=a(64565),g=a(40721),x=a(61435),p=a(43770);let f=(0,p.A)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);var y=a(49592),v=a(4002),b=a(25589),j=a(67553),C=a(96957),N=a(54356),w=a(56318),z=a(55132),k=a(76572);let _=(0,p.A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var D=a(8893),S=a(50504),M=a(73475),A=a(5944);function E(e){let{open:t,onOpenChange:a,module:r,onSave:o}=e,{locale:d}=(0,M.Y)(),[c,u]=(0,l.useState)(!1),[m,h]=(0,l.useState)((null==r?void 0:r.settings)||{enabled:!0,apiKey:"",webhookUrl:"",database:"mysql",cacheEnabled:!0,logLevel:"info",maxConnections:10,timeout:30}),[g,x]=(0,l.useState)((null==r?void 0:r.name)||""),[p,f]=(0,l.useState)("");(0,l.useEffect)(()=>{r&&(h(r.settings),x(r.name))},[r]);let y=async()=>{u(!0);try{await o({...m,__moduleName:null==g?void 0:g.trim(),__icon:p}),a(!1)}catch(e){console.error("保存配置失败:",e)}finally{u(!1)}};return r?(0,s.jsx)(N.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(N.Cf,{className:"max-w-2xl",children:[(0,s.jsx)(N.c7,{children:(0,s.jsxs)(N.L3,{children:["zh"===d?"配置模块":"Configure Module",": ",r.name]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"模块名称":"Module Name"}),(0,s.jsx)(n.p,{value:g,onChange:e=>x(e.target.value),placeholder:"zh"===d?"请输入模块名称":"Enter module name"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"模块图标":"Module Icon"}),(0,s.jsx)(A.G,{value:p,onChange:e=>f("string"==typeof e?e:e[0]||""),multiple:!1,size:"md"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"启用模块":"Enable Module"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(z.d,{checked:m.enabled,onCheckedChange:e=>h(t=>({...t,enabled:e}))}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:m.enabled?"zh"===d?"已启用":"Enabled":"zh"===d?"已禁用":"Disabled"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"缓存":"Cache"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(z.d,{checked:m.cacheEnabled,onCheckedChange:e=>h(t=>({...t,cacheEnabled:e}))}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:m.cacheEnabled?"zh"===d?"已启用":"Enabled":"zh"===d?"已禁用":"Disabled"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"API 密钥":"API Key"}),(0,s.jsx)(n.p,{value:m.apiKey,onChange:e=>h(t=>({...t,apiKey:e.target.value})),placeholder:"zh"===d?"请输入 API 密钥":"Enter API key"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"Webhook URL"}),(0,s.jsx)(n.p,{value:m.webhookUrl,onChange:e=>h(t=>({...t,webhookUrl:e.target.value})),placeholder:"zh"===d?"请输入 Webhook URL":"Enter webhook URL"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"数据库":"Database"}),(0,s.jsxs)(k.l6,{value:m.database,onValueChange:e=>h(t=>({...t,database:e})),children:[(0,s.jsx)(k.bq,{children:(0,s.jsx)(k.yv,{})}),(0,s.jsxs)(k.gC,{children:[(0,s.jsx)(k.eb,{value:"mysql",children:"MySQL"}),(0,s.jsx)(k.eb,{value:"postgresql",children:"PostgreSQL"}),(0,s.jsx)(k.eb,{value:"mongodb",children:"MongoDB"}),(0,s.jsx)(k.eb,{value:"sqlite",children:"SQLite"})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"日志级别":"Log Level"}),(0,s.jsxs)(k.l6,{value:m.logLevel,onValueChange:e=>h(t=>({...t,logLevel:e})),children:[(0,s.jsx)(k.bq,{children:(0,s.jsx)(k.yv,{})}),(0,s.jsxs)(k.gC,{children:[(0,s.jsx)(k.eb,{value:"debug",children:"Debug"}),(0,s.jsx)(k.eb,{value:"info",children:"Info"}),(0,s.jsx)(k.eb,{value:"warn",children:"Warn"}),(0,s.jsx)(k.eb,{value:"error",children:"Error"})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"最大连接数":"Max Connections"}),(0,s.jsx)(n.p,{type:"number",value:m.maxConnections,onChange:e=>h(t=>({...t,maxConnections:parseInt(e.target.value)||10})),min:"1",max:"100"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(w.J,{children:"zh"===d?"超时时间（秒）":"Timeout (seconds)"}),(0,s.jsx)(n.p,{type:"number",value:m.timeout,onChange:e=>h(t=>({...t,timeout:parseInt(e.target.value)||30})),min:"1",max:"300"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,s.jsxs)(i.$,{variant:"outline",onClick:()=>{r&&h(r.settings)},disabled:c,children:[(0,s.jsx)(_,{className:"size-4 mr-2"}),"zh"===d?"重置":"Reset"]}),(0,s.jsxs)(i.$,{onClick:y,disabled:c,children:[c?(0,s.jsx)(D.A,{className:"size-4 mr-2 animate-spin"}):(0,s.jsx)(S.A,{className:"size-4 mr-2"}),c?"zh"===d?"保存中...":"Saving...":"zh"===d?"保存":"Save"]})]})]})}):null}var P=a(76826);function F(e){let{open:t,onOpenChange:a,moduleName:r,moduleType:n="local",onConfirm:o}=e,{locale:d}=(0,M.Y)(),[c,u]=(0,l.useState)(!1),m=async()=>{u(!0);try{await o(),a(!1)}catch(e){console.error("卸载模块失败:",e)}finally{u(!1)}};return(0,s.jsx)(N.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(N.Cf,{className:"max-w-md",children:[(0,s.jsxs)(N.c7,{children:[(0,s.jsxs)(N.L3,{className:"flex items-center gap-2 text-red-600",children:[(0,s.jsx)(P.A,{className:"size-5"}),"system"===n?"zh"===d?"确认删除系统模块":"Confirm System Module Deletion":"zh"===d?"确认卸载模块":"Confirm Module Uninstall"]}),(0,s.jsx)(N.rr,{className:"pt-4",children:"system"===n?"zh"===d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"mb-4",children:["您即将删除系统模块 ",(0,s.jsxs)("strong",{children:['"',r,'"']}),"。此操作将："]}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-600 mb-4",children:[(0,s.jsx)("li",{children:"永久删除系统核心功能"}),(0,s.jsx)("li",{children:"删除所有相关数据和配置"}),(0,s.jsx)("li",{children:"可能影响其他模块的正常运行"}),(0,s.jsx)("li",{children:"导致系统功能缺失"})]}),(0,s.jsxs)("p",{className:"text-red-600 font-medium",children:[(0,s.jsx)("strong",{children:"警告："}),"删除系统模块可能导致系统不稳定，此操作不可撤销！"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"mb-4",children:["You are about to delete the system module ",(0,s.jsxs)("strong",{children:['"',r,'"']}),". This action will:"]}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-600 mb-4",children:[(0,s.jsx)("li",{children:"Permanently delete core system functionality"}),(0,s.jsx)("li",{children:"Delete all related data and configuration"}),(0,s.jsx)("li",{children:"May affect other modules' normal operation"}),(0,s.jsx)("li",{children:"Cause system functionality loss"})]}),(0,s.jsxs)("p",{className:"text-red-600 font-medium",children:[(0,s.jsx)("strong",{children:"Warning:"})," Deleting system modules may cause system instability. This action cannot be undone!"]})]}):"zh"===d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"mb-4",children:["您即将卸载模块 ",(0,s.jsxs)("strong",{children:['"',r,'"']}),"。此操作将："]}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-600 mb-4",children:[(0,s.jsx)("li",{children:"停止模块的所有功能"}),(0,s.jsx)("li",{children:"删除模块的所有数据"}),(0,s.jsx)("li",{children:"移除模块的配置设置"}),(0,s.jsx)("li",{children:"断开与其他模块的关联"})]}),(0,s.jsx)("p",{className:"text-red-600 font-medium",children:"此操作不可撤销，请确认您要卸载此模块。"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"mb-4",children:["You are about to uninstall the module ",(0,s.jsxs)("strong",{children:['"',r,'"']}),". This action will:"]}),(0,s.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-sm text-gray-600 mb-4",children:[(0,s.jsx)("li",{children:"Stop all module functionality"}),(0,s.jsx)("li",{children:"Delete all module data"}),(0,s.jsx)("li",{children:"Remove module configuration settings"}),(0,s.jsx)("li",{children:"Disconnect from other modules"})]}),(0,s.jsx)("p",{className:"text-red-600 font-medium",children:"This action cannot be undone. Please confirm that you want to uninstall this module."})]})})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,s.jsx)(i.$,{variant:"outline",onClick:()=>a(!1),disabled:c,children:"zh"===d?"取消":"Cancel"}),(0,s.jsxs)(i.$,{variant:"destructive",onClick:m,disabled:c,children:[c?(0,s.jsx)(D.A,{className:"size-4 mr-2 animate-spin"}):(0,s.jsx)(v.A,{className:"size-4 mr-2"}),c?"zh"===d?"处理中...":"Processing...":"system"===n?"zh"===d?"确认删除":"Confirm Delete":"zh"===d?"确认卸载":"Confirm Uninstall"]})]})]})})}var R=a(74459),T=a(6651);function L(e){let{message:t,isVisible:a,onClose:r,duration:i=3e3}=e,{locale:n}=(0,M.Y)();return((0,l.useEffect)(()=>{if(a){let e=setTimeout(()=>{r()},i);return()=>clearTimeout(e)}},[a,i,r]),a)?(0,s.jsx)("div",{className:"fixed top-4 right-4 z-50 animate-in slide-in-from-top-2 duration-300",children:(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 shadow-lg max-w-sm",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(R.A,{className:"size-5 text-green-600 mt-0.5 flex-shrink-0"}),(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("p",{className:"text-sm font-medium text-green-800",children:t})}),(0,s.jsx)("button",{onClick:r,className:"text-green-400 hover:text-green-600 transition-colors",children:(0,s.jsx)(T.A,{className:"size-4"})})]})})}):null}var I=a(83071);function U(){let{locale:e}=(0,M.Y)(),t=(0,r.useParams)().appId,[a,o]=(0,l.useState)(""),[d,u]=(0,l.useState)("internal"),[p,f]=(0,l.useState)(!1),[y,v]=(0,l.useState)(!1),[b,j]=(0,l.useState)(null),[C,N]=(0,l.useState)([]),[w,z]=(0,l.useState)([]),[k,_]=(0,l.useState)(!0),[D,S]=(0,l.useState)(""),[A,P]=(0,l.useState)(!1),{getInstalledModules:R,installModule:T,uninstallModule:U,updateModuleConfig:O,getAvailableModules:V,isLoading:$}=(0,I.$)({applicationId:t});(0,l.useEffect)(()=>{let e=async()=>{_(!0);try{let e=await R();console.log("\uD83D\uDD0D 已安装模块数据:",e),N(e.modules||[]);let t=await V();console.log("\uD83D\uDD0D 可用模块数据:",t),z(t.modules||[])}catch(e){console.error("加载模块数据失败:",e),N([]),z([])}finally{_(!1)}};t&&e()},[t,R,V]);let q=C.filter(e=>{var t,s;let l=(null===(t=e.moduleName)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||(null===(s=e.moduleKey)||void 0===s?void 0:s.toLowerCase().includes(a.toLowerCase())),r=!0;return"internal"===d?r="system"===e.moduleType||"local"===e.moduleType:"third-party"===d?r="remote"===e.moduleType:"public"===d&&(r=!1),l&&r}),H=e=>{console.log("配置模块:",e.moduleName),j(e),f(!0)},J=e=>{console.log("卸载模块:",e.moduleName,"类型:",e.moduleType),j(e),v(!0)},W=async e=>{try{await T({moduleKey:e.key,moduleVersion:e.version,installConfig:{}});let t=await R();N(t.modules||[])}catch(e){console.error("安装模块失败:",e)}},K=async()=>{if(b){console.log("\uD83D\uDDD1️ 开始卸载模块:",b.moduleName,"类型:",b.moduleType);try{await U(b.moduleKey,!1);let t=await R();N(t.modules||[]),S("zh"===e?'模块 "'.concat(b.moduleName,'" 已成功卸载'):'Module "'.concat(b.moduleName,'" has been successfully uninstalled')),P(!0),console.log("✅ 模块卸载完成")}catch(e){console.error("❌ 模块卸载失败:",e)}v(!1),j(null)}},Y=async t=>{if(b){console.log("\uD83D\uDCBE 开始保存配置:",b.moduleName,t);try{let{__moduleName:a,__icon:s,...l}=t||{},r={...l};"string"==typeof a&&a.trim()&&(r.moduleName=a.trim()),"string"==typeof s&&s&&(r.icon=s),await O(b.moduleKey,r),f(!1),j(null),console.log("✅ 配置保存完成"),S("zh"===e?'模块 "'.concat(b.moduleName,'" 的配置已保存'):'Configuration for module "'.concat(b.moduleName,'" has been saved')),P(!0)}catch(e){throw console.error("保存配置失败:",e),e}}};return(0,s.jsxs)("div",{className:"flex-1 flex flex-col h-full bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"zh"===e?"模块管理":"Module Management"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"zh"===e?"管理和浏览所有可用的模块":"Manage and browse all available modules"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(i.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(m.A,{className:"size-4 mr-2"}),"zh"===e?"上传模块":"Upload Module"]}),(0,s.jsxs)(i.$,{size:"sm",children:[(0,s.jsx)(h.A,{className:"size-4 mr-2"}),"zh"===e?"创建模块":"Create Module"]})]})]})}),(0,s.jsx)("div",{className:"flex-1 px-6 py-6",children:(0,s.jsxs)(c.tU,{value:d,onValueChange:u,className:"w-full",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)(c.j7,{className:"grid w-auto grid-cols-3",children:[(0,s.jsx)(c.Xi,{value:"internal",children:"zh"===e?"内部模块":"Internal Modules"}),(0,s.jsx)(c.Xi,{value:"third-party",children:"zh"===e?"第三方模块":"Third-party Modules"}),(0,s.jsx)(c.Xi,{value:"public",children:"zh"===e?"公用模块":"Public Modules"})]}),(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(g.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 size-4"}),(0,s.jsx)(n.p,{placeholder:"zh"===e?"搜索模块...":"Search modules...",value:a,onChange:e=>o(e.target.value),className:"pl-10 w-80"})]})})]}),(0,s.jsx)(c.av,{value:"internal",className:"mt-0",children:(0,s.jsx)(B,{modules:q,onConfigure:H,onUninstall:J,onInstall:W})}),(0,s.jsx)(c.av,{value:"third-party",className:"mt-0",children:(0,s.jsx)(B,{modules:q,onConfigure:H,onUninstall:J,onInstall:W})}),(0,s.jsx)(c.av,{value:"public",className:"mt-0",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(x.A,{className:"size-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"zh"===e?"暂无公用模块":"No Public Modules"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"zh"===e?"您还没有上传任何模块到公用库":"You haven't uploaded any modules to the public library yet"}),(0,s.jsxs)(i.$,{children:[(0,s.jsx)(m.A,{className:"size-4 mr-2"}),"zh"===e?"上传第一个模块":"Upload First Module"]})]})})]})}),(0,s.jsx)(E,{open:p,onOpenChange:f,module:b?{id:b.id,name:b.name,version:b.version,settings:{enabled:!0,apiKey:"",webhookUrl:"",database:"mysql",cacheEnabled:!0,logLevel:"info",maxConnections:10,timeout:30}}:null,onSave:Y}),(0,s.jsx)(F,{open:y,onOpenChange:v,moduleName:(null==b?void 0:b.moduleName)||"",moduleType:null==b?void 0:b.moduleType,onConfirm:K}),(0,s.jsx)(L,{message:D,isVisible:A,onClose:()=>P(!1)})]})}function B(e){let{modules:t,onConfigure:a,onUninstall:l,onInstall:r}=e,{locale:n}=(0,M.Y)();return 0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(x.A,{className:"size-12 text-gray-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"zh"===n?"暂无模块":"No Modules"}),(0,s.jsx)("p",{className:"text-gray-600",children:"zh"===n?"没有找到匹配的模块":"No matching modules found"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(e=>{var t,c;return(0,s.jsxs)(d.Zp,{className:"hover:shadow-md transition-shadow",children:[(0,s.jsx)(d.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"text-2xl",children:(0,s.jsx)(x.A,{className:"size-6 text-blue-600"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)(d.ZB,{className:"text-base font-medium truncate",children:e.moduleName}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsxs)(o.E,{variant:"secondary",className:"text-xs",children:["v",e.moduleVersion]}),(0,s.jsx)(o.E,{variant:"outline",className:"text-xs",children:e.moduleType}),"active"===e.installStatus&&(0,s.jsx)(o.E,{variant:"default",className:"text-xs bg-green-100 text-green-800",children:"zh"===n?"已安装":"Installed"})]})]})]}),(0,s.jsxs)(u.rI,{children:[(0,s.jsx)(u.ty,{asChild:!0,children:(0,s.jsx)(i.$,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:(0,s.jsx)(f,{className:"size-4"})})}),(0,s.jsxs)(u.SQ,{align:"end",children:["active"===e.installStatus?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(u._2,{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("下拉菜单配置点击:",e.moduleName),a(e)},children:[(0,s.jsx)(y.A,{className:"size-4 mr-2"}),"zh"===n?"配置":"Configure"]}),(0,s.jsxs)(u._2,{className:"text-red-600",onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("下拉菜单卸载点击:",e.moduleName),l(e)},children:[(0,s.jsx)(v.A,{className:"size-4 mr-2"}),"system"===e.moduleType?"zh"===n?"删除":"Delete":"zh"===n?"卸载":"Uninstall"]})]}):(0,s.jsxs)(u._2,{onClick:()=>r(e),children:[(0,s.jsx)(b.A,{className:"size-4 mr-2"}),"zh"===n?"安装":"Install"]}),(0,s.jsxs)(u._2,{children:[(0,s.jsx)(j.A,{className:"size-4 mr-2"}),"zh"===n?"查看详情":"View Details"]})]})]})]})}),(0,s.jsxs)(d.Wu,{className:"pt-0",children:[(0,s.jsx)(d.BT,{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:(null===(t=e.manifest)||void 0===t?void 0:t.description)||"暂无描述"}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,s.jsxs)("span",{children:["by ",(null===(c=e.manifest)||void 0===c?void 0:c.author)||"AINO"]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(b.A,{className:"size-3"}),e.moduleType]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(C.A,{className:"size-3 fill-yellow-400 text-yellow-400"}),"4.5"]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:["active"===e.installStatus?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(i.$,{size:"sm",variant:"outline",className:"flex-1",onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("按钮配置点击:",e.moduleName),a(e)},children:[(0,s.jsx)(y.A,{className:"size-3 mr-1"}),"zh"===n?"配置":"Configure"]}),(0,s.jsxs)(i.$,{size:"sm",variant:"destructive",className:"flex-1",onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("按钮卸载点击:",e.moduleName),l(e)},children:[(0,s.jsx)(v.A,{className:"size-3 mr-1"}),"system"===e.moduleType?"zh"===n?"删除":"Delete":"zh"===n?"卸载":"Uninstall"]})]}):(0,s.jsxs)(i.$,{size:"sm",className:"flex-1",onClick:()=>r(e),children:[(0,s.jsx)(b.A,{className:"size-3 mr-1"}),"zh"===n?"安装":"Install"]}),(0,s.jsx)(i.$,{size:"sm",variant:"outline",children:(0,s.jsx)(j.A,{className:"size-3"})})]})]})]},e.id)})})}},25589:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(43770).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},50504:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(43770).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},55132:(e,t,a)=>{"use strict";a.d(t,{d:()=>i});var s=a(74364);a(10640);var l=a(69262),r=a(11915);function i(e){let{className:t,...a}=e;return(0,s.jsx)(l.bL,{"data-slot":"switch",className:(0,r.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(l.zi,{"data-slot":"switch-thumb",className:(0,r.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},67553:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(43770).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},69262:(e,t,a)=>{"use strict";a.d(t,{bL:()=>C,zi:()=>N});var s=a(10640),l=a(68353),r=a(24908),i=a(44850),n=a(35535),o=a(93799),d=a(54535),c=a(25224),u=a(74364),m="Switch",[h,g]=(0,i.A)(m),[x,p]=h(m),f=s.forwardRef((e,t)=>{let{__scopeSwitch:a,name:i,checked:o,defaultChecked:d,required:m,disabled:h,value:g="on",onCheckedChange:p,form:f,...y}=e,[v,C]=s.useState(null),N=(0,r.s)(t,e=>C(e)),w=s.useRef(!1),z=!v||f||!!v.closest("form"),[k=!1,_]=(0,n.i)({prop:o,defaultProp:d,onChange:p});return(0,u.jsxs)(x,{scope:a,checked:k,disabled:h,children:[(0,u.jsx)(c.sG.button,{type:"button",role:"switch","aria-checked":k,"aria-required":m,"data-state":j(k),"data-disabled":h?"":void 0,disabled:h,value:g,...y,ref:N,onClick:(0,l.m)(e.onClick,e=>{_(e=>!e),z&&(w.current=e.isPropagationStopped(),w.current||e.stopPropagation())})}),z&&(0,u.jsx)(b,{control:v,bubbles:!w.current,name:i,value:g,checked:k,required:m,disabled:h,form:f,style:{transform:"translateX(-100%)"}})]})});f.displayName=m;var y="SwitchThumb",v=s.forwardRef((e,t)=>{let{__scopeSwitch:a,...s}=e,l=p(y,a);return(0,u.jsx)(c.sG.span,{"data-state":j(l.checked),"data-disabled":l.disabled?"":void 0,...s,ref:t})});v.displayName=y;var b=e=>{let{control:t,checked:a,bubbles:l=!0,...r}=e,i=s.useRef(null),n=(0,o.Z)(a),c=(0,d.X)(t);return s.useEffect(()=>{let e=i.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==a&&t){let s=new Event("click",{bubbles:l});t.call(e,a),e.dispatchEvent(s)}},[n,a,l]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function j(e){return e?"checked":"unchecked"}var C=f,N=v},73475:(e,t,a)=>{"use strict";a.d(t,{LocaleProvider:()=>o,Y:()=>d});var s=a(74364),l=a(10640);let r={brand:"通用无代码构建平台",save:"保存",newApp:"新建应用",appsTitle:"应用构建页",appsSubtitle:"管理已创建的应用或新建",searchApp:"搜索应用...",emptyAppHint:"还没有应用。点击右上角「新建应用」开始吧。",noDesc:"电商+系统模块示例",modulesCount:e=>{let{n:t}=e;return"模块 ".concat(t)},enter:"进入",clone:"克隆",delete:"删除",copySuffix:"（副本）",confirmDeleteApp:"确认删除该应用？",newAppNamePlaceholder:"请输入应用名称",toggleLang:"切换语言",appNotFound:"未找到应用",apps:"应用",directories:"目录（表）",rename:"重命名",addDir:"添加目录",typeCategory:"分类",typeTable:"表",emptyDirHint:"该模块暂无目录，请先添加。",moduleSettings:"模块设置",dirSettings:"目录设置",chooseDirHint:"请选择左侧目录开始操作",searchPlaceholder:"搜索 名称/品牌/标签...",filterByCategory:"按分类筛选",filterByStatus:"按上架状态",all:"全部",statusOn:"上架",statusOff:"下架",addRecord:"新增记录",tabList:"列表",tabFields:"字段管理",tabCategories:"内容分类",listHint:"提示：显示列由「字段管理」中的启用状态决定。单击一行打开右侧详情抽屉。",confirmDeleteRecord:"确认删除该记录？",addModule:"添加模块",module_ecom:"电商类通用模块",module_edu:"教育类通用模块",module_rec:"招聘类通用模块",module_content:"通用内容模块",module_project:"通用项目展示模块",module_custom:"通用自定义模块",renameModule:"模块名",newDirNamePlaceholder:"目录名称",unnamedDir:"未命名目录",chooseTableTpl:"选择表模板（custom/ecom-product/...）",renameDir:"目录名",ft_text:"文本",ft_textarea:"多行文本",ft_number:"数字",ft_select:"单选",ft_multiselect:"多选",ft_boolean:"布尔",ft_date:"日期",ft_time:"时间",ft_tags:"标签",ft_image:"图片",ft_profile:"标识",ft_video:"视频",ft_file:"文件",ft_richtext:"富文本",ft_percent:"百分比",ft_progress:"进度",ft_barcode:"条码",ft_checkbox:"复选框",ft_cascader:"级联选项",ft_relation_one:"关联",ft_relation_many:"多关联",ft_experience:"经历",ft_multiimage:"多图片",ft_multivideo:"多视频",ft_identity_verification:"实名认证",ft_other_verification:"其他认证",ft_meta_items:"数据项集合",fieldManagement:"字段管理",fieldCategoryManagement:"字段分类",recordCategoryManagement:"内容分类",allFields:"全部字段",uncategorized:"未分类",editField:"编辑字段",defaultField:"默认字段",deleteField:"删除",dragToSort:"拖动排序",confirmDeleteField:"确认删除该字段？",basicFields:"基础字段",businessFields:"业务字段",addCategory:"添加分类",addCategoryLoading:"添加中...",addCategoryFailed:"添加分类失败，请重试",categoryName:"分类名称",categoryDescription:"分类描述（可选）",categoryList:"分类列表",fieldList:"字段列表",enabled:"已启用",disabled:"已禁用",showFields:"显示",ofFields:"个字段",selectCategoryToView:"请选择一个字段分类查看详情",confirmDeleteCategory:"确认删除分类",confirmDeleteCategoryWithFields:"该分类包含",fieldsWillMoveToUncategorized:"个字段，删除后这些字段将移至「无分类」。",systemCategoryCannotDelete:"系统分类不能删除",previousPage:"上一页",nextPage:"下一页",fieldCategoryManagement:"字段分类",deleteCategory:"删除分类",recordCategoryManagement:"内容分类管理",addRecordCategory:"添加内容分类",recordCategoryName:"分类名称",recordCategoryDescription:"分类描述",recordCategoryList:"内容分类列表",confirmDeleteRecordCategory:"确认删除该内容分类？",recordCategoryCannotDelete:"该分类下还有记录，不能删除",selectRecordCategory:"选择内容分类",noRecordCategory:"无分类",typeChangeWarning:"更改字段类型会尝试转换已有数据，可能造成数据丢失，是否继续？",saveField:"保存字段",selfModule:"自主模块",thirdPartyModule:"第三方模块",searchModulePlaceholder:"搜索模块名称、提供商或描述...",allCategories:"所有类别",provider:"提供商",version:"版本",downloads:"下载",rating:"评分",install:"安装",noMatchingModules:"没有找到匹配的模块",noPermissionToDelete:"当前角色无权删除",noPermissionToBulkDelete:"当前角色无权批量删除",confirmDeleteRecord:"确认删除该记录？",confirmBulkDeleteRecords:"确认批量删除选中的",records:"条记录？",bulkDeleteCompleted:"批量删除完成",bulkDeleteSelected:"批量删除选中项",bulkDelete:"批量删除",clearSelection:"清除选择",selected:"已选择",items:"项",dynamicRecordAdded:"动态记录已添加",pleaseEnterDynamicContent:"请输入动态内容",userRecord:"用户记录",systemInfo:"系统信息",behaviorDynamic:"行为动态",other:"其他",addUserRecord:"添加用户记录",recordContent:"记录内容",enterUserRecordContent:"请输入用户记录内容...",addRecord:"添加记录",historyRecord:"历史记录",category:"分类",basicInfo:"基本资料",dynamicRecord:"动态记录",saveChanges:"保存更改",saved:"已保存"},i={brand:"Universal No-code Builder",save:"Save",newApp:"New App",appsTitle:"App Builder",appsSubtitle:"Manage existing apps or create a new one",searchApp:"Search apps...",emptyAppHint:"No app yet. Click New App to start.",noDesc:"E-commerce + system modules demo",modulesCount:e=>{let{n:t}=e;return"Modules ".concat(t)},enter:"Enter",clone:"Clone",delete:"Delete",copySuffix:" (copy)",confirmDeleteApp:"Delete this app?",newAppNamePlaceholder:"Enter app name",toggleLang:"Toggle language",appNotFound:"App not found",apps:"Apps",directories:"Directories (Tables)",rename:"Rename",addDir:"Add Directory",typeCategory:"Category",typeTable:"Table",emptyDirHint:"No directory in this module. Add one first.",moduleSettings:"Module Settings",dirSettings:"Directory Settings",chooseDirHint:"Pick a directory from the left to start",searchPlaceholder:"Search name/brand/tags...",filterByCategory:"Filter by category",filterByStatus:"Filter by status",all:"All",statusOn:"Online",statusOff:"Offline",addRecord:"Add Record",tabList:"List",tabFields:"Fields",tabCategories:"Content Categories",listHint:"Columns are controlled in Fields tab. Click a row to open the right drawer.",confirmDeleteRecord:"Delete this record?",addModule:"Add Module",module_ecom:"E-commerce module",module_edu:"Education module",module_content:"Content module",module_project:"Project showcase module",module_custom:"Custom module",renameModule:"Module name",newDirNamePlaceholder:"Directory name",unnamedDir:"Untitled directory",chooseTableTpl:"Choose table template (custom/ecom-product/...)",renameDir:"Directory name",ft_text:"Text",ft_textarea:"Textarea",ft_number:"Number",ft_select:"Single Select",ft_multiselect:"Multi Select",ft_boolean:"Boolean",ft_date:"Date",ft_time:"Time",ft_tags:"Tags",ft_image:"Image",ft_profile:"Profile",ft_video:"Video",ft_file:"File",ft_richtext:"Rich Text",ft_percent:"Percent",ft_progress:"Progress",ft_barcode:"Barcode",ft_checkbox:"Checkbox",ft_cascader:"Cascader",ft_relation_one:"Relation",ft_relation_many:"Multi-relation",ft_experience:"Experience",ft_multiimage:"Multi Image",ft_multivideo:"Multi Video",ft_identity_verification:"Identity Verification",ft_other_verification:"Other Verification",ft_meta_items:"Meta Items",fieldManagement:"Field Management",fieldCategoryManagement:"Field Categories",recordCategoryManagement:"Content Categories",allFields:"All Fields",uncategorized:"Uncategorized",editField:"Edit Field",defaultField:"Default Field",deleteField:"Delete",dragToSort:"Drag to sort",confirmDeleteField:"Confirm delete this field?",basicFields:"Basic Fields",businessFields:"Business Fields",addCategory:"Add Category",addCategoryLoading:"Adding...",addCategoryFailed:"Failed to add category, please try again",categoryName:"Category Name",categoryDescription:"Category Description (Optional)",categoryList:"Category List",fieldList:"Field List",enabled:"Enabled",disabled:"Disabled",showFields:"Showing",ofFields:"fields",selectCategoryToView:"Please select a field category to view details",confirmDeleteCategory:"Confirm delete category",confirmDeleteCategoryWithFields:"This category contains",fieldsWillMoveToUncategorized:"fields, they will be moved to 'Uncategorized' after deletion.",systemCategoryCannotDelete:"System categories cannot be deleted",previousPage:"Previous",nextPage:"Next",fieldCategoryManagement:"Field Category",deleteCategory:"Delete Category",recordCategoryManagement:"Content Category Management",addRecordCategory:"Add Content Category",recordCategoryName:"Category Name",recordCategoryDescription:"Category Description",recordCategoryList:"Content Category List",confirmDeleteRecordCategory:"Confirm delete this content category?",recordCategoryCannotDelete:"This category contains records and cannot be deleted",selectRecordCategory:"Select Content Category",noRecordCategory:"No Category",typeChangeWarning:"Changing field type will attempt to convert existing data, which may cause data loss. Continue?",saveField:"Save Field",selfModule:"Self Module",thirdPartyModule:"Third-party Module",searchModulePlaceholder:"Search module name, provider or description...",allCategories:"All Categories",provider:"Provider",version:"Version",downloads:"Downloads",rating:"Rating",install:"Install",noMatchingModules:"No matching modules found",noPermissionToDelete:"Current role has no permission to delete",noPermissionToBulkDelete:"Current role has no permission to bulk delete",confirmDeleteRecord:"Confirm delete this record?",confirmBulkDeleteRecords:"Confirm bulk delete selected",records:"records?",bulkDeleteCompleted:"Bulk delete completed",bulkDeleteSelected:"Bulk delete selected items",bulkDelete:"Bulk Delete",clearSelection:"Clear Selection",selected:"Selected",items:"items",dynamicRecordAdded:"Dynamic record added",pleaseEnterDynamicContent:"Please enter dynamic content",userRecord:"User Record",systemInfo:"System Info",behaviorDynamic:"Behavior Dynamic",other:"Other",addUserRecord:"Add User Record",recordContent:"Record Content",enterUserRecordContent:"Please enter user record content...",addRecord:"Add Record",historyRecord:"History Record",category:"Category",basicInfo:"Basic Info",dynamicRecord:"Dynamic Record",saveChanges:"Save Changes",saved:"Saved"},n=(0,l.createContext)(null);function o(e){let{children:t}=e,[a,o]=(0,l.useState)("zh"),[d,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{c(!0),o(localStorage.getItem("nocode_locale")||"zh")},[]),(0,l.useEffect)(()=>{d&&localStorage.setItem("nocode_locale",a)},[a,d]);let u="zh"===a?r:i;return(0,s.jsx)(n.Provider,{value:{locale:a,t:function(e,t){let a=u[e];return"function"==typeof a?a(t):null!=a?a:String(e)},toggleLocale:function(){o(e=>"zh"===e?"en":"zh")}},children:t})}function d(){let e=(0,l.useContext)(n);if(!e)throw Error("useLocale must be used within a LocaleProvider");return e.locale?e:{locale:"zh",t:(e,t)=>{let a=r[e];return"function"==typeof a?a(t):null!=a?a:String(e)},toggleLocale:()=>{}}}},83071:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var s=a(10640),l=a(91650),r=a(6712);function i(e){let{applicationId:t}=e,{toast:a}=(0,r.dj)(),[i,n]=(0,s.useState)(!1),o=(0,s.useCallback)(async e=>{n(!0);try{let a=await l.api.modules.getInstalledModules({applicationId:t,...e});if(a.success)return a.data;throw Error(a.error||"获取模块列表失败")}catch(e){throw a({title:"获取模块列表失败",description:e instanceof Error?e.message:"获取模块列表失败",variant:"destructive"}),e}finally{n(!1)}},[t,a]),d=(0,s.useCallback)(async e=>{n(!0);try{let s=await l.api.modules.installModule(t,e);if(s.success)return a({title:"模块安装成功",description:"模块 ".concat(e.moduleKey," 已成功安装")}),s.data;throw Error(s.error||"模块安装失败")}catch(e){throw a({title:"模块安装失败",description:e instanceof Error?e.message:"模块安装失败",variant:"destructive"}),e}finally{n(!1)}},[t,a]),c=(0,s.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n(!0);try{let r=await l.api.modules.uninstallModule(t,e,{keepData:s});if(r.success)return a({title:"模块卸载成功",description:"模块 ".concat(e," 已成功卸载")}),r.data;throw Error(r.error||"模块卸载失败")}catch(e){throw a({title:"模块卸载失败",description:e instanceof Error?e.message:"模块卸载失败",variant:"destructive"}),e}finally{n(!1)}},[t,a]),u=(0,s.useCallback)(async(e,s)=>{n(!0);try{let r=await l.api.modules.updateModuleConfig(t,e,s);if(r.success)return a({title:"配置更新成功",description:"模块 ".concat(e," 的配置已更新")}),r.data;throw Error(r.error||"配置更新失败")}catch(e){throw a({title:"配置更新失败",description:e instanceof Error?e.message:"配置更新失败",variant:"destructive"}),e}finally{n(!1)}},[t,a]),m=(0,s.useCallback)(async(e,s)=>{n(!0);try{let r=await l.api.modules.updateModuleStatus(t,e,s);if(r.success)return a({title:"状态更新成功",description:"模块 ".concat(e," 的状态已更新为 ").concat(s)}),r.data;throw Error(r.error||"状态更新失败")}catch(e){throw a({title:"状态更新失败",description:e instanceof Error?e.message:"状态更新失败",variant:"destructive"}),e}finally{n(!1)}},[t,a]);return{isLoading:i,getInstalledModules:o,installModule:d,uninstallModule:c,updateModuleConfig:u,updateModuleStatus:m,getAvailableModules:(0,s.useCallback)(async()=>{n(!0);try{let e=await l.api.modules.getAvailableModules();if(e.success)return e.data;throw Error(e.error||"获取可用模块失败")}catch(e){throw a({title:"获取可用模块失败",description:e instanceof Error?e.message:"获取可用模块失败",variant:"destructive"}),e}finally{n(!1)}},[a]),getModuleStats:(0,s.useCallback)(async()=>{n(!0);try{let e=await l.api.modules.getModuleStats(t);if(e.success)return e.data;throw Error(e.error||"获取模块统计失败")}catch(e){throw a({title:"获取模块统计失败",description:e instanceof Error?e.message:"获取模块统计失败",variant:"destructive"}),e}finally{n(!1)}},[t,a])}}},96957:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(43770).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},97173:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var s=a(74364);a(10640);var l=a(4756),r=a(31792),i=a(11915);let n=(0,r.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:r=!1,...o}=e,d=r?l.DX:"span";return(0,s.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(n({variant:a}),t),...o})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2189,2144,4243,926,5275,7768,1650,3294,8380,1139,7358],()=>t(3525)),_N_E=e.O()}]);