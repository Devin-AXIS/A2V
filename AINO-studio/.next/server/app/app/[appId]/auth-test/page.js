(()=>{var e={};e.id=647,e.ids=[647],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4960:(e,s,r)=>{Promise.resolve().then(r.bind(r,87033))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12043:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.default,__next_app__:()=>p,pages:()=>d,routeModule:()=>c,tree:()=>i});var t=r(50842),a=r(13725),n=r(82416),l=r(70122),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(s,o);let i={children:["",{children:["app",{children:["[appId]",{children:["auth-test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,94772)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/auth-test/page.tsx"]}]},{}]},{error:[()=>Promise.resolve().then(r.bind(r,87033)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/error.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,72330)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,9556)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/error.tsx"],"global-error":[()=>Promise.resolve().then(r.bind(r,82416)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,31435,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,11622,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5887,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/auth-test/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},c=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/app/[appId]/auth-test/page",pathname:"/app/[appId]/auth-test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19167:(e,s,r)=>{Promise.resolve().then(r.bind(r,94772))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},56119:(e,s,r)=>{Promise.resolve().then(r.bind(r,82330))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77462:(e,s,r)=>{"use strict";var t=r(73518);r.o(t,"useParams")&&r.d(s,{useParams:function(){return t.useParams}}),r.o(t,"useRouter")&&r.d(s,{useRouter:function(){return t.useRouter}})},82330:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>o});var t=r(33752),a=r(82153),n=r(77462),l=r(64304);function o(){let e=(0,n.useParams)(),s=e?.appId,[r,o]=(0,a.useState)({phone_number:"",password:"",name:"",email:""}),[i,d]=(0,a.useState)({phone_number:"",password:""}),[p,c]=(0,a.useState)({phone_number:"",old_password:"",new_password:""}),[m,u]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),[g,f]=(0,a.useState)(null),[N,b]=(0,a.useState)(""),[v,j]=(0,a.useState)("");if(!s)return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Auth Test"}),(0,t.jsx)("p",{className:"text-red-500 mt-2",children:"Missing applicationId in route."})]});let w=async()=>{u(!0),h(""),b(""),j("");try{let e={phone_number:r.phone_number,password:r.password};r.name&&r.name.trim().length>0&&(e.name=r.name.trim()),r.email&&r.email.trim().length>0&&(e.email=r.email.trim());let t=await l.api.applicationUsers.registerUser(s,e);if(t.success)h("注册成功"),b("注册成功"),j("success");else{let e=t.error||"注册失败";h(e),b(e),j("error")}}catch(s){let e=s?.message||"注册失败";h(e),b(e),j("error")}finally{u(!1)}},y=async()=>{u(!0),h("");try{let e=await l.api.applicationUsers.loginUser(s,i);e.success?(f(e.data),h("登录成功")):h(e.error||"登录失败")}catch(e){h(e?.message||"登录失败")}finally{u(!1)}},I=async()=>{u(!0),h("");try{let e=await l.api.applicationUsers.changePassword(s,p);e.success?h("修改密码成功"):h(e.error||"修改密码失败")}catch(e){h(e?.message||"修改密码失败")}finally{u(!1)}};return(0,t.jsxs)("div",{className:"p-6 space-y-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"应用用户注册/登录/改密测试"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Application ID: ",s]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"注册"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"手机号",value:r.phone_number,onChange:e=>o({...r,phone_number:e.target.value})}),(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"密码",type:"password",value:r.password,onChange:e=>o({...r,password:e.target.value})}),(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"姓名（可选）",value:r.name,onChange:e=>o({...r,name:e.target.value})}),(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"邮箱（可选）",value:r.email,onChange:e=>o({...r,email:e.target.value})})]}),(0,t.jsx)("button",{onClick:w,disabled:m,className:"inline-flex items-center rounded px-4 py-2 bg-black text-white disabled:opacity-50",children:m?"提交中...":"注册"}),N&&(0,t.jsx)("div",{className:`text-sm mt-2 ${"success"===v?"text-green-600":"text-red-600"}`,children:N})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"登录"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"手机号",value:i.phone_number,onChange:e=>d({...i,phone_number:e.target.value})}),(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"密码",type:"password",value:i.password,onChange:e=>d({...i,password:e.target.value})})]}),(0,t.jsx)("button",{onClick:y,disabled:m,className:"inline-flex items-center rounded px-4 py-2 bg-black text-white disabled:opacity-50",children:m?"提交中...":"登录"})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"修改密码"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"手机号",value:p.phone_number,onChange:e=>c({...p,phone_number:e.target.value})}),(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"旧密码",type:"password",value:p.old_password,onChange:e=>c({...p,old_password:e.target.value})}),(0,t.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"新密码",type:"password",value:p.new_password,onChange:e=>c({...p,new_password:e.target.value})})]}),(0,t.jsx)("button",{onClick:I,disabled:m,className:"inline-flex items-center rounded px-4 py-2 bg-black text-white disabled:opacity-50",children:m?"提交中...":"修改密码"})]}),x&&(0,t.jsx)("div",{className:"text-sm text-blue-600",children:x}),g&&(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"登录后返回的用户信息"}),(0,t.jsxs)("div",{className:"rounded border p-4 grid grid-cols-1 md:grid-cols-3 gap-4 items-start",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,t.jsx)("img",{src:g.avatar||g.profile?.avatar||"/placeholder-user.jpg",alt:g.name||g.profile?.name||"avatar",className:"w-24 h-24 rounded-full object-cover border"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-base font-semibold",children:g.name||g.profile?.name||"未命名用户"}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:g.role||"user"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"手机号："}),g.phone_number||g.phone]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"邮箱："}),g.email||g.profile?.email||"-"]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"姓名："}),g.name||g.profile?.name||"-"]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"部门："}),g.department||g.profile?.department||"-"]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"职位："}),g.position||g.profile?.position||"-"]}),(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"状态："}),g.status||"-"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:"标签"}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(g.tags||g.profile?.tags||[]).map((e,s)=>(0,t.jsx)("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-100 border",children:e},s)),(!g.tags||0===(g.tags?.length||0))&&(!g.profile?.tags||0===g.profile.tags.length)&&(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"无"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["用户ID：",g.id]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["应用ID：",s]})]})]}),(0,t.jsxs)("details",{className:"rounded border p-3",children:[(0,t.jsx)("summary",{className:"cursor-pointer text-sm",children:"查看完整返回 JSON"}),(0,t.jsx)("pre",{className:"mt-2 text-xs whitespace-pre-wrap break-all",children:JSON.stringify(g,null,2)})]})]})]})}},87033:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(88954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/error.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/error.tsx","default")},91519:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(33752);r(82153);var a=r(51322),n=r(72498),l=r(77909),o=r(2905);function i({error:e,reset:s}){return(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"mx-auto max-w-md text-center",children:[(0,t.jsx)("div",{className:"mb-6 flex justify-center",children:(0,t.jsx)("div",{className:"rounded-full bg-red-100 p-3",children:(0,t.jsx)(n.A,{className:"h-8 w-8 text-red-600"})})}),(0,t.jsx)("h2",{className:"mb-4 text-2xl font-bold text-gray-900",children:"应用加载失败"}),(0,t.jsx)("p",{className:"mb-6 text-gray-600",children:"抱歉，应用加载时出现了错误。请尝试重新加载或返回首页。"}),(0,t.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,t.jsxs)(a.$,{onClick:s,className:"flex items-center gap-2",children:[(0,t.jsx)(l.A,{className:"h-4 w-4"}),"重新加载"]}),(0,t.jsxs)(a.$,{variant:"outline",onClick:()=>window.location.href="/",className:"flex items-center gap-2",children:[(0,t.jsx)(o.A,{className:"h-4 w-4"}),"返回首页"]})]}),!1]})})}},91808:(e,s,r)=>{Promise.resolve().then(r.bind(r,91519))},94772:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(88954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/auth-test/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/auth-test/page.tsx","default")}};var s=require("../../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[424,116],()=>r(12043));module.exports=t})();