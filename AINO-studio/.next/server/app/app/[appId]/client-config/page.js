(()=>{var e={};e.id=46,e.ids=[46],e.modules={3017:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(88954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/client-config/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/client-config/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4174:(e,t,a)=>{Promise.resolve().then(a.bind(a,44261))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11819:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(74112).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},13120:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let s=a(31981)._(a(86312));function r(e,t){var a;let r={};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,s.default)({...n,modules:null==(a=n.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34438:(e,t,a)=>{Promise.resolve().then(a.bind(a,3017))},34715:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}});let s=a(24543);function r(e){let{reason:t,children:a}=e;throw Object.defineProperty(new s.BailoutToCSRError(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},44261:(e,t,a)=>{"use strict";let s;a.r(t),a.d(t,{default:()=>tr});var r=a(33752),n=a(82153),i=a(77462),l=a(51322),o=a(92092),c=a(15930),d=a(24568);let p=(0,n.createContext)(null);p.displayName="PanelGroupContext";let u={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},h=n["useId".toString()],m="function"==typeof h?h:()=>null,x=0;function g(e=null){let t=m(),a=(0,n.useRef)(e||t||null);return null===a.current&&(a.current=""+x++),null!=e?e:a.current}function f({children:e,className:t="",collapsedSize:a,collapsible:s,defaultSize:r,forwardedRef:i,id:l,maxSize:o,minSize:c,onCollapse:d,onExpand:h,onResize:m,order:x,style:f,tagName:v="div",...y}){let j=(0,n.useContext)(p);if(null===j)throw Error("Panel components must be rendered within a PanelGroup container");let{collapsePanel:b,expandPanel:N,getPanelSize:w,getPanelStyle:z,groupId:S,isPanelCollapsed:k,reevaluatePanelConstraints:C,registerPanel:$,resizePanel:I,unregisterPanel:A}=j,T=g(l),O=(0,n.useRef)({callbacks:{onCollapse:d,onExpand:h,onResize:m},constraints:{collapsedSize:a,collapsible:s,defaultSize:r,maxSize:o,minSize:c},id:T,idIsFromProps:void 0!==l,order:x});(0,n.useRef)({didLogMissingDefaultSizeWarning:!1}),(0,n.useImperativeHandle)(i,()=>({collapse:()=>{b(O.current)},expand:e=>{N(O.current,e)},getId:()=>T,getSize:()=>w(O.current),isCollapsed:()=>k(O.current),isExpanded:()=>!k(O.current),resize:e=>{I(O.current,e)}}),[b,N,w,k,T,I]);let P=z(O.current,r);return(0,n.createElement)(v,{...y,children:e,className:t,id:T,style:{...P,...f},[u.groupId]:S,[u.panel]:"",[u.panelCollapsible]:s||void 0,[u.panelId]:T,[u.panelSize]:parseFloat(""+P.flexGrow).toFixed(1)})}let v=(0,n.forwardRef)((e,t)=>(0,n.createElement)(f,{...e,forwardedRef:t}));f.displayName="Panel",v.displayName="forwardRef(Panel)";let y=null,j=-1,b=null;function N(e,t){var a,r,n;let i=function(e,t){if(t){let e=(t&O)!=0,a=(t&P)!=0,s=(t&E)!=0,r=(t&L)!=0;if(e)return s?"se-resize":r?"ne-resize":"e-resize";if(a)return s?"sw-resize":r?"nw-resize":"w-resize";if(s)return"s-resize";else if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);if(y!==i){if(y=i,null===b){b=document.createElement("style");s&&b.setAttribute("nonce",s),document.head.appendChild(b)}j>=0&&(null===(n=b.sheet)||void 0===n||n.removeRule(j)),j=null!==(a=null===(r=b.sheet)||void 0===r?void 0:r.insertRule(`*{cursor: ${i} !important;}`))&&void 0!==a?a:-1}}function w(e){return"keydown"===e.type}function z(e){return e.type.startsWith("pointer")}function S(e){return e.type.startsWith("mouse")}function k(e){if(z(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(S(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}let C=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function $(e){let t=e.length;for(;t--;){let a=e[t];if(Z(a,"Missing node"),function(e){let t=getComputedStyle(e);return!!("fixed"===t.position||"auto"!==t.zIndex&&("static"!==t.position||function(e){var t;let a=getComputedStyle(null!==(t=T(e))&&void 0!==t?t:e).display;return"flex"===a||"inline-flex"===a}(e))||1>+t.opacity||"transform"in t&&"none"!==t.transform||"webkitTransform"in t&&"none"!==t.webkitTransform||"mixBlendMode"in t&&"normal"!==t.mixBlendMode||"filter"in t&&"none"!==t.filter||"webkitFilter"in t&&"none"!==t.webkitFilter||"isolation"in t&&"isolate"===t.isolation||C.test(t.willChange))||"touch"===t.webkitOverflowScrolling}(a))return a}return null}function I(e){return e&&Number(getComputedStyle(e).zIndex)||0}function A(e){let t=[];for(;e;)t.push(e),e=T(e);return t}function T(e){let{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}let O=1,P=2,E=4,L=8,R="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}(),D=[],_=!1,M=new Map,B=new Map,J=new Set;function U(e){let{target:t}=e,{x:a,y:s}=k(e);_=!0,K({target:t,x:a,y:s}),W(),D.length>0&&(X("down",e),e.preventDefault(),F(t)||e.stopImmediatePropagation())}function H(e){let{x:t,y:a}=k(e);if(_&&0===e.buttons&&(_=!1,X("up",e)),!_){let{target:s}=e;K({target:s,x:t,y:a})}X("move",e),V(),D.length>0&&e.preventDefault()}function G(e){let{target:t}=e,{x:a,y:s}=k(e);B.clear(),_=!1,D.length>0&&(e.preventDefault(),F(t)||e.stopImmediatePropagation()),X("up",e),K({target:t,x:a,y:s}),V(),W()}function F(e){let t=e;for(;t;){if(t.hasAttribute(u.resizeHandle))return!0;t=t.parentElement}return!1}function K({target:e,x:t,y:a}){D.splice(0);let s=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(s=e),J.forEach(e=>{let{element:r,hitAreaMargins:n}=e,i=r.getBoundingClientRect(),{bottom:l,left:o,right:c,top:d}=i,p=R?n.coarse:n.fine;if(t>=o-p&&t<=c+p&&a>=d-p&&a<=l+p){if(null!==s&&document.contains(s)&&r!==s&&!r.contains(s)&&!s.contains(r)&&function(e,t){let a;if(e===t)throw Error("Cannot compare node with itself");let s={a:A(e),b:A(t)};for(;s.a.at(-1)===s.b.at(-1);)e=s.a.pop(),t=s.b.pop(),a=e;Z(a,"Stacking order can only be calculated for elements with a common ancestor");let r={a:I($(s.a)),b:I($(s.b))};if(r.a===r.b){let e=a.childNodes,t={a:s.a.at(-1),b:s.b.at(-1)},r=e.length;for(;r--;){let a=e[r];if(a===t.a)return 1;if(a===t.b)return -1}}return Math.sign(r.a-r.b)}(s,r)>0){let e=s,t=!1;for(;e&&!e.contains(r);){var u,h;if(u=e.getBoundingClientRect(),h=i,u.x<h.x+h.width&&u.x+u.width>h.x&&u.y<h.y+h.height&&u.y+u.height>h.y){t=!0;break}e=e.parentElement}if(t)return}D.push(e)}})}function V(){let e=!1,t=!1;D.forEach(a=>{let{direction:s}=a;"horizontal"===s?e=!0:t=!0});let a=0;B.forEach(e=>{a|=e}),e&&t?N("intersection",a):e?N("horizontal",a):t?N("vertical",a):null!==b&&(document.head.removeChild(b),y=null,b=null,j=-1)}let q=new AbortController;function W(){q.abort();let e={capture:!0,signal:(q=new AbortController).signal};J.size&&(_?(D.length>0&&M.forEach((t,a)=>{let{body:s}=a;t>0&&(s.addEventListener("contextmenu",G,e),s.addEventListener("pointerleave",H,e),s.addEventListener("pointermove",H,e))}),window.addEventListener("pointerup",G,e),window.addEventListener("pointercancel",G,e)):M.forEach((t,a)=>{let{body:s}=a;t>0&&(s.addEventListener("pointerdown",U,e),s.addEventListener("pointermove",H,e))}))}function X(e,t){J.forEach(a=>{let{setResizeHandlerState:s}=a;s(e,D.includes(a),t)})}function Z(e,t){if(!e)throw console.error(t),Error(t)}function Y(e,t,a=10){return e.toFixed(a)===t.toFixed(a)?0:e>t?1:-1}function Q(e,t,a=10){return 0===Y(e,t,a)}function ee(e,t,a){return 0===Y(e,t,a)}function et({panelConstraints:e,panelIndex:t,size:a}){let s=e[t];Z(null!=s,`Panel constraints not found for index ${t}`);let{collapsedSize:r=0,collapsible:n,maxSize:i=100,minSize:l=0}=s;return 0>Y(a,l)&&(a=n&&0>Y(a,(r+l)/2)?r:l),a=parseFloat((a=Math.min(i,a)).toFixed(10))}function ea({delta:e,initialLayout:t,panelConstraints:a,pivotIndices:s,prevLayout:r,trigger:n}){if(ee(e,0))return t;let i=[...t],[l,o]=s;Z(null!=l,"Invalid first pivot index"),Z(null!=o,"Invalid second pivot index");let c=0;if("keyboard"===n){{let s=e<0?o:l,r=a[s];Z(r,`Panel constraints not found for index ${s}`);let{collapsedSize:n=0,collapsible:i,minSize:c=0}=r;if(i){let a=t[s];if(Z(null!=a,`Previous layout not found for panel index ${s}`),ee(a,n)){let t=c-a;Y(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{let s=e<0?l:o,r=a[s];Z(r,`No panel constraints found for index ${s}`);let{collapsedSize:n=0,collapsible:i,minSize:c=0}=r;if(i){let a=t[s];if(Z(null!=a,`Previous layout not found for panel index ${s}`),ee(a,c)){let t=a-n;Y(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{let s=e<0?1:-1,r=e<0?o:l,n=0;for(;;){let e=t[r];if(Z(null!=e,`Previous layout not found for panel index ${r}`),n+=et({panelConstraints:a,panelIndex:r,size:100})-e,(r+=s)<0||r>=a.length)break}let i=Math.min(Math.abs(e),Math.abs(n));e=e<0?0-i:i}{let s=e<0?l:o;for(;s>=0&&s<a.length;){let r=Math.abs(e)-Math.abs(c),n=t[s];Z(null!=n,`Previous layout not found for panel index ${s}`);let l=et({panelConstraints:a,panelIndex:s,size:n-r});if(!ee(n,l)&&(c+=n-l,i[s]=l,c.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?s--:s++}}if(function(e,t,a){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(!ee(e[a],t[a],void 0))return!1;return!0}(r,i))return r;{let s=e<0?o:l,r=t[s];Z(null!=r,`Previous layout not found for panel index ${s}`);let n=r+c,d=et({panelConstraints:a,panelIndex:s,size:n});if(i[s]=d,!ee(d,n)){let t=n-d,s=e<0?o:l;for(;s>=0&&s<a.length;){let r=i[s];Z(null!=r,`Previous layout not found for panel index ${s}`);let n=et({panelConstraints:a,panelIndex:s,size:r+t});if(ee(r,n)||(t-=n-r,i[s]=n),ee(t,0))break;e>0?s--:s++}}}return ee(i.reduce((e,t)=>t+e,0),100)?i:r}function es(e,t=document){return Array.from(t.querySelectorAll(`[${u.resizeHandleId}][data-panel-group-id="${e}"]`))}function er(e,t,a=document){let s=es(e,a).findIndex(e=>e.getAttribute(u.resizeHandleId)===t);return null!=s?s:null}function en(e,t,a){let s=er(e,t,a);return null!=s?[s,s+1]:[-1,-1]}function ei(e,t=document){var a;if(t instanceof HTMLElement&&(null==t?void 0:null===(a=t.dataset)||void 0===a?void 0:a.panelGroupId)==e)return t;let s=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return s||null}function el(e,t=document){let a=t.querySelector(`[${u.resizeHandleId}="${e}"]`);return a||null}function eo(e,t){let{x:a,y:s}=k(t);return"horizontal"===e?a:s}function ec(e,t,a){t.forEach((t,s)=>{let r=e[s];Z(r,`Panel data not found for index ${s}`);let{callbacks:n,constraints:i,id:l}=r,{collapsedSize:o=0,collapsible:c}=i,d=a[l];if(null==d||t!==d){a[l]=t;let{onCollapse:e,onExpand:s,onResize:r}=n;r&&r(t,d),c&&(e||s)&&(s&&(null==d||Q(d,o))&&!Q(t,o)&&s(),e&&(null==d||!Q(d,o))&&Q(t,o)&&e())}})}function ed(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!=t[a])return!1;return!0}function ep(e){try{if("undefined"!=typeof localStorage)e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)};else throw Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function eu(e){return`react-resizable-panels:${e}`}function eh(e,t,a,s,r){var n;let i=eu(e),l=t.map(e=>{let{constraints:t,id:a,idIsFromProps:s,order:r}=e;return s?a:r?`${r}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(","),o=null!==(n=function(e,t){try{let a=eu(e),s=t.getItem(a);if(s){let e=JSON.parse(s);if("object"==typeof e&&null!=e)return e}}catch(e){}return null}(e,r))&&void 0!==n?n:{};o[l]={expandToSizes:Object.fromEntries(a.entries()),layout:s};try{r.setItem(i,JSON.stringify(o))}catch(e){console.error(e)}}let em={getItem:e=>(ep(em),em.getItem(e)),setItem:(e,t)=>{ep(em),em.setItem(e,t)}},ex={};function eg({autoSaveId:e=null,children:t,className:a="",direction:s,forwardedRef:r,id:i=null,onLayout:l=null,keyboardResizeBy:o=null,storage:c=em,style:d,tagName:h="div",...m}){let x=g(i),f=(0,n.useRef)(null),[v,y]=(0,n.useState)(null),[j,b]=(0,n.useState)([]),N=function(){let[e,t]=(0,n.useState)(0);return(0,n.useCallback)(()=>t(e=>e+1),[])}(),k=(0,n.useRef)({}),C=(0,n.useRef)(new Map),$=(0,n.useRef)(0),I=(0,n.useRef)({autoSaveId:e,direction:s,dragState:v,id:x,keyboardResizeBy:o,onLayout:l,storage:c}),A=(0,n.useRef)({layout:j,panelDataArray:[],panelDataArrayChanged:!1});(0,n.useRef)({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),(0,n.useImperativeHandle)(r,()=>({getId:()=>I.current.id,getLayout:()=>{let{layout:e}=A.current;return e},setLayout:e=>{let{onLayout:t}=I.current,{layout:a,panelDataArray:s}=A.current,r=function({layout:e,panelConstraints:t}){let a=[...e],s=a.reduce((e,t)=>e+t,0);if(a.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${a.map(e=>`${e}%`).join(", ")}`);if(!ee(s,100)&&a.length>0)for(let e=0;e<t.length;e++){let t=a[e];Z(null!=t,`No layout data found for index ${e}`);let r=100/s*t;a[e]=r}let r=0;for(let e=0;e<t.length;e++){let s=a[e];Z(null!=s,`No layout data found for index ${e}`);let n=et({panelConstraints:t,panelIndex:e,size:s});s!=n&&(r+=s-n,a[e]=n)}if(!ee(r,0))for(let e=0;e<t.length;e++){let s=a[e];Z(null!=s,`No layout data found for index ${e}`);let n=et({panelConstraints:t,panelIndex:e,size:s+r});if(s!==n&&(r-=n-s,a[e]=n,ee(r,0)))break}return a}({layout:e,panelConstraints:s.map(e=>e.constraints)});!function(e,t){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}(a,r)&&(b(r),A.current.layout=r,t&&t(r),ec(s,r,k.current))}}),[]),function({committedValuesRef:e,eagerValuesRef:t,groupId:a,layout:s,panelDataArray:r,panelGroupElement:i,setLayout:l}){(0,n.useRef)({didWarnAboutMissingResizeHandle:!1}),(0,n.useEffect)(()=>{if(!i)return;let e=t.current;Z(e,"Eager values not found");let{panelDataArray:r}=e;Z(null!=ei(a,i),`No group found for id "${a}"`);let n=es(a,i);Z(n,`No resize handles found for group id "${a}"`);let o=n.map(e=>{let t=e.getAttribute(u.resizeHandleId);Z(t,"Resize handle element has no handle id attribute");let[n,o]=function(e,t,a,s=document){var r,n,i,l;let o=el(t,s),c=es(e,s),d=o?c.indexOf(o):-1;return[null!==(r=null===(n=a[d])||void 0===n?void 0:n.id)&&void 0!==r?r:null,null!==(i=null===(l=a[d+1])||void 0===l?void 0:l.id)&&void 0!==i?i:null]}(a,t,r,i);if(null==n||null==o)return()=>{};let c=e=>{if(!e.defaultPrevented&&"Enter"===e.key){e.preventDefault();let o=r.findIndex(e=>e.id===n);if(o>=0){let e=r[o];Z(e,`No panel data found for index ${o}`);let n=s[o],{collapsedSize:c=0,collapsible:d,minSize:p=0}=e.constraints;if(null!=n&&d){let e=ea({delta:ee(n,c)?p-c:c-n,initialLayout:s,panelConstraints:r.map(e=>e.constraints),pivotIndices:en(a,t,i),prevLayout:s,trigger:"keyboard"});s!==e&&l(e)}}}};return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}});return()=>{o.forEach(e=>e())}},[i,e,t,a,s,r,l])}({committedValuesRef:I,eagerValuesRef:A,groupId:x,layout:j,panelDataArray:A.current.panelDataArray,setLayout:b,panelGroupElement:f.current}),(0,n.useEffect)(()=>{let{panelDataArray:t}=A.current;if(e){if(0===j.length||j.length!==t.length)return;let a=ex[e];null==a&&(a=function(e,t=10){let a=null;return(...s)=>{null!==a&&clearTimeout(a),a=setTimeout(()=>{e(...s)},t)}}(eh,100),ex[e]=a),a(e,[...t],new Map(C.current),j,c)}},[e,j,c]),(0,n.useEffect)(()=>{});let T=(0,n.useCallback)(e=>{let{onLayout:t}=I.current,{layout:a,panelDataArray:s}=A.current;if(e.constraints.collapsible){let r=s.map(e=>e.constraints),{collapsedSize:n=0,panelSize:i,pivotIndices:l}=ey(s,e,a);if(Z(null!=i,`Panel size not found for panel "${e.id}"`),!Q(i,n)){C.current.set(e.id,i);let o=ea({delta:ev(s,e)===s.length-1?i-n:n-i,initialLayout:a,panelConstraints:r,pivotIndices:l,prevLayout:a,trigger:"imperative-api"});ed(a,o)||(b(o),A.current.layout=o,t&&t(o),ec(s,o,k.current))}}},[]),R=(0,n.useCallback)((e,t)=>{let{onLayout:a}=I.current,{layout:s,panelDataArray:r}=A.current;if(e.constraints.collapsible){let n=r.map(e=>e.constraints),{collapsedSize:i=0,panelSize:l=0,minSize:o=0,pivotIndices:c}=ey(r,e,s),d=null!=t?t:o;if(Q(l,i)){let t=C.current.get(e.id),i=null!=t&&t>=d?t:d,o=ea({delta:ev(r,e)===r.length-1?l-i:i-l,initialLayout:s,panelConstraints:n,pivotIndices:c,prevLayout:s,trigger:"imperative-api"});ed(s,o)||(b(o),A.current.layout=o,a&&a(o),ec(r,o,k.current))}}},[]),D=(0,n.useCallback)(e=>{let{layout:t,panelDataArray:a}=A.current,{panelSize:s}=ey(a,e,t);return Z(null!=s,`Panel size not found for panel "${e.id}"`),s},[]),_=(0,n.useCallback)((e,t)=>{let{panelDataArray:a}=A.current,s=ev(a,e);return function({defaultSize:e,dragState:t,layout:a,panelData:s,panelIndex:r,precision:n=3}){let i;let l=a[r];return{flexBasis:0,flexGrow:null==l?void 0!=e?e.toPrecision(n):"1":1===s.length?"1":l.toPrecision(n),flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:v,layout:j,panelData:a,panelIndex:s})},[v,j]),M=(0,n.useCallback)(e=>{let{layout:t,panelDataArray:a}=A.current,{collapsedSize:s=0,collapsible:r,panelSize:n}=ey(a,e,t);return Z(null!=n,`Panel size not found for panel "${e.id}"`),!0===r&&Q(n,s)},[]),J=(0,n.useCallback)(e=>{let{layout:t,panelDataArray:a}=A.current,{collapsedSize:s=0,collapsible:r,panelSize:n}=ey(a,e,t);return Z(null!=n,`Panel size not found for panel "${e.id}"`),!r||Y(n,s)>0},[]),U=(0,n.useCallback)(e=>{let{panelDataArray:t}=A.current;t.push(e),t.sort((e,t)=>{let a=e.order,s=t.order;return null==a&&null==s?0:null==a?-1:null==s?1:a-s}),A.current.panelDataArrayChanged=!0,N()},[N]),H=(0,n.useCallback)(e=>{let t=!1,a=f.current;return a&&"rtl"===window.getComputedStyle(a,null).getPropertyValue("direction")&&(t=!0),function(a){a.preventDefault();let s=f.current;if(!s)return()=>null;let{direction:r,dragState:n,id:i,keyboardResizeBy:l,onLayout:o}=I.current,{layout:c,panelDataArray:d}=A.current,{initialLayout:p}=null!=n?n:{},h=en(i,e,s),m=function(e,t,a,s,r,n){if(w(e)){let t="horizontal"===a,s=0;s=e.shiftKey?100:null!=r?r:10;let n=0;switch(e.key){case"ArrowDown":n=t?0:s;break;case"ArrowLeft":n=t?-s:0;break;case"ArrowRight":n=t?s:0;break;case"ArrowUp":n=t?0:-s;break;case"End":n=100;break;case"Home":n=-100}return n}return null==s?0:function(e,t,a,s,r){let n="horizontal"===a,i=el(t,r);Z(i,`No resize handle element found for id "${t}"`);let l=i.getAttribute(u.groupId);Z(l,"Resize handle element has no group id attribute");let{initialCursorPosition:o}=s,c=eo(a,e),d=ei(l,r);Z(d,`No group element found for id "${l}"`);let p=d.getBoundingClientRect();return(c-o)/(n?p.width:p.height)*100}(e,t,a,s,n)}(a,e,r,n,l,s),x="horizontal"===r;x&&t&&(m=-m);let g=ea({delta:m,initialLayout:null!=p?p:c,panelConstraints:d.map(e=>e.constraints),pivotIndices:h,prevLayout:c,trigger:w(a)?"keyboard":"mouse-or-touch"}),v=!ed(c,g);if((z(a)||S(a))&&$.current!=m){var y,j;($.current=m,v||0===m)?B.set(e,0):x?(y=m<0?O:P,B.set(e,y)):(j=m<0?E:L,B.set(e,j))}v&&(b(g),A.current.layout=g,o&&o(g),ec(d,g,k.current))}},[]),G=(0,n.useCallback)((e,t)=>{let{onLayout:a}=I.current,{layout:s,panelDataArray:r}=A.current,n=r.map(e=>e.constraints),{panelSize:i,pivotIndices:l}=ey(r,e,s);Z(null!=i,`Panel size not found for panel "${e.id}"`);let o=ea({delta:ev(r,e)===r.length-1?i-t:t-i,initialLayout:s,panelConstraints:n,pivotIndices:l,prevLayout:s,trigger:"imperative-api"});ed(s,o)||(b(o),A.current.layout=o,a&&a(o),ec(r,o,k.current))},[]),F=(0,n.useCallback)((e,t)=>{let{layout:a,panelDataArray:s}=A.current,{collapsedSize:r=0,collapsible:n}=t,{collapsedSize:i=0,collapsible:l,maxSize:o=100,minSize:c=0}=e.constraints,{panelSize:d}=ey(s,e,a);null!=d&&(n&&l&&Q(d,r)?Q(r,i)||G(e,i):d<c?G(e,c):d>o&&G(e,o))},[G]),K=(0,n.useCallback)((e,t)=>{let{direction:a}=I.current,{layout:s}=A.current;if(!f.current)return;let r=el(e,f.current);Z(r,`Drag handle element not found for id "${e}"`);let n=eo(a,t);y({dragHandleId:e,dragHandleRect:r.getBoundingClientRect(),initialCursorPosition:n,initialLayout:s})},[]),V=(0,n.useCallback)(()=>{y(null)},[]),q=(0,n.useCallback)(e=>{let{panelDataArray:t}=A.current,a=ev(t,e);a>=0&&(t.splice(a,1),delete k.current[e.id],A.current.panelDataArrayChanged=!0,N())},[N]),W=(0,n.useMemo)(()=>({collapsePanel:T,direction:s,dragState:v,expandPanel:R,getPanelSize:D,getPanelStyle:_,groupId:x,isPanelCollapsed:M,isPanelExpanded:J,reevaluatePanelConstraints:F,registerPanel:U,registerResizeHandle:H,resizePanel:G,startDragging:K,stopDragging:V,unregisterPanel:q,panelGroupElement:f.current}),[T,v,s,R,D,_,x,M,J,F,U,H,G,K,V,q]);return(0,n.createElement)(p.Provider,{value:W},(0,n.createElement)(h,{...m,children:t,className:a,id:i,ref:f,style:{display:"flex",flexDirection:"horizontal"===s?"row":"column",height:"100%",overflow:"hidden",width:"100%",...d},[u.group]:"",[u.groupDirection]:s,[u.groupId]:x}))}let ef=(0,n.forwardRef)((e,t)=>(0,n.createElement)(eg,{...e,forwardedRef:t}));function ev(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function ey(e,t,a){let s=ev(e,t),r=s===e.length-1,n=a[s];return{...t.constraints,panelSize:n,pivotIndices:r?[s-1,s]:[s,s+1]}}function ej({children:e=null,className:t="",disabled:a=!1,hitAreaMargins:s,id:r,onBlur:i,onClick:l,onDragging:o,onFocus:c,onPointerDown:d,onPointerUp:h,style:m={},tabIndex:x=0,tagName:f="div",...v}){var y,j;let b=(0,n.useRef)(null),N=(0,n.useRef)({onClick:l,onDragging:o,onPointerDown:d,onPointerUp:h});(0,n.useEffect)(()=>{N.current.onClick=l,N.current.onDragging=o,N.current.onPointerDown=d,N.current.onPointerUp=h});let w=(0,n.useContext)(p);if(null===w)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");let{direction:z,groupId:S,registerResizeHandle:k,startDragging:C,stopDragging:$,panelGroupElement:I}=w,A=g(r),[T,O]=(0,n.useState)("inactive"),[P,E]=(0,n.useState)(!1),[L,R]=(0,n.useState)(null),_=(0,n.useRef)({state:T});(0,n.useEffect)(()=>{if(a)R(null);else{let e=k(A);R(()=>e)}},[a,A,k]);let U=null!==(y=null==s?void 0:s.coarse)&&void 0!==y?y:15,H=null!==(j=null==s?void 0:s.fine)&&void 0!==j?j:5;return(0,n.useEffect)(()=>{if(a||null==L)return;let e=b.current;Z(e,"Element ref not attached");let t=!1;return function(e,t,a,s,r){var n;let{ownerDocument:i}=t,l={direction:a,element:t,hitAreaMargins:s,setResizeHandlerState:r},o=null!==(n=M.get(i))&&void 0!==n?n:0;return M.set(i,o+1),J.add(l),W(),function(){var t;B.delete(e),J.delete(l);let a=null!==(t=M.get(i))&&void 0!==t?t:1;if(M.set(i,a-1),W(),1===a&&M.delete(i),D.includes(l)){let e=D.indexOf(l);e>=0&&D.splice(e,1),V(),r("up",!0,null)}}}(A,e,z,{coarse:U,fine:H},(e,a,s)=>{if(!a){O("inactive");return}switch(e){case"down":{O("drag"),t=!1,Z(s,'Expected event to be defined for "down" action'),C(A,s);let{onDragging:e,onPointerDown:a}=N.current;null==e||e(!0),null==a||a();break}case"move":{let{state:e}=_.current;t=!0,"drag"!==e&&O("hover"),Z(s,'Expected event to be defined for "move" action'),L(s);break}case"up":{O("hover"),$();let{onClick:e,onDragging:a,onPointerUp:s}=N.current;null==a||a(!1),null==s||s(),t||null==e||e()}}})},[U,z,a,H,k,A,L,C,$]),function({disabled:e,handleId:t,resizeHandler:a,panelGroupElement:s}){(0,n.useEffect)(()=>{if(e||null==a||null==s)return;let r=el(t,s);if(null==r)return;let n=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),a(e);break;case"F6":{e.preventDefault();let a=r.getAttribute(u.groupId);Z(a,`No group element found for id "${a}"`);let n=es(a,s),i=er(a,t,s);Z(null!==i,`No resize element found for id "${t}"`);let l=e.shiftKey?i>0?i-1:n.length-1:i+1<n.length?i+1:0;n[l].focus()}}};return r.addEventListener("keydown",n),()=>{r.removeEventListener("keydown",n)}},[s,e,t,a])}({disabled:a,handleId:A,resizeHandler:L,panelGroupElement:I}),(0,n.createElement)(f,{...v,children:e,className:t,id:r,onBlur:()=>{E(!1),null==i||i()},onFocus:()=>{E(!0),null==c||c()},ref:b,role:"separator",style:{touchAction:"none",userSelect:"none",...m},tabIndex:x,[u.groupDirection]:z,[u.groupId]:S,[u.resizeHandle]:"",[u.resizeHandleActive]:"drag"===T?"pointer":P?"keyboard":void 0,[u.resizeHandleEnabled]:!a,[u.resizeHandleId]:A,[u.resizeHandleState]:T})}eg.displayName="PanelGroup",ef.displayName="forwardRef(PanelGroup)",ej.displayName="PanelResizeHandle";var eb=a(1237);function eN({className:e,...t}){return(0,r.jsx)(ef,{"data-slot":"resizable-panel-group",className:(0,eb.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t})}function ew({...e}){return(0,r.jsx)(v,{"data-slot":"resizable-panel",...e})}function ez({withHandle:e,className:t,...a}){return(0,r.jsx)(ej,{"data-slot":"resizable-handle",className:(0,eb.cn)("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...a,children:e&&(0,r.jsx)("div",{className:"bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border",children:(0,r.jsx)(d.A,{className:"size-2.5"})})})}var eS=a(94732),ek=a(56970),eC=a(85768),e$=a(16585),eI=a(14618),eA=a(74112);let eT=(0,eA.A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),eO=(0,eA.A)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);var eP=a(25040),eE=a(4544),eL=a(55373),eR=a(71160),eD=a(16117),e_=a(51404),eM=a(83073),eB=a(2027),eJ=a(74073),eU=a(66053),eH=a(11819),eG=a(13120),eF=a.n(eG);let eK={$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{schemaVersion:{type:"string"},app:{type:"object",properties:{appKey:{type:"string"},locale:{type:"string"},theme:{type:"string"},bottomNav:{type:"array",items:{type:"object",properties:{key:{type:"string"},label:{type:"string"},page:{type:"string"},route:{type:"string"},iconName:{type:"string"}},required:["key","label"]}}},required:["appKey","locale","theme","bottomNav"]},pages:{type:"object"},dataSources:{type:"object"},actions:{type:"object"}},required:["schemaVersion","app"]};var eV=a(64304),eq=a(90155),eW=a(53198),eX=a(19394),eZ=a(79545),eY=a(66482),eQ=a(87929);function e0({open:e,onOpenChange:t,lang:a,pages:s,value:i,onSave:o}){let[c]=(0,n.useState)("click"),[d,p]=(0,n.useState)("navigate"),[u,h]=(0,n.useState)("internal"),[m,x]=(0,n.useState)(s[0]||"home"),[g,f]=(0,n.useState)(""),[v,y]=(0,n.useState)(""),[j,b]=(0,n.useState)(void 0),[N,w]=(0,n.useState)("");return(0,r.jsx)(eW.lG,{open:e,onOpenChange:t,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[560px] w-[92vw] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===a?"事件配置":"Event Settings"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"事件类型":"Trigger"}),(0,r.jsx)(eC.p,{value:"zh"===a?"点击时":"On Click",readOnly:!0})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"执行动作":"Action"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"navigate"===d?"default":"outline",onClick:()=>p("navigate"),children:"zh"===a?"跳转新页面":"Navigate"}),(0,r.jsx)(l.$,{size:"sm",variant:"switchTab"===d?"default":"outline",onClick:()=>p("switchTab"),children:"zh"===a?"当前页面切换":"Switch Tab"})]})]})]}),"navigate"===d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"页面类型":"Destination"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"internal"===u?"default":"outline",onClick:()=>h("internal"),children:"zh"===a?"内部页面":"Internal"}),(0,r.jsx)(l.$,{size:"sm",variant:"external"===u?"default":"outline",onClick:()=>h("external"),children:"zh"===a?"外部链接":"External"})]})]}),"internal"===u?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"选择页面":"Select Page"}),(0,r.jsx)("select",{className:"border rounded-md h-9 px-2",value:m,onChange:e=>x(e.target.value),children:s.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]}):(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"外部链接":"External URL"}),(0,r.jsx)(eC.p,{placeholder:"https://",value:g,onChange:e=>f(e.target.value)})]})]}):(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"标签标识(可选)":"Tab Key (optional)"}),(0,r.jsx)(eC.p,{placeholder:"zh"===a?"例如: overview":"e.g. overview",value:v,onChange:e=>y(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"标签索引(可选)":"Tab Index (optional)"}),(0,r.jsx)(eC.p,{type:"number",placeholder:"0",value:"number"==typeof j?String(j):"",onChange:e=>b(""===e.target.value?void 0:Number(e.target.value))})]})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===a?"页面入参 (JSON)":"Params (JSON)"}),(0,r.jsx)(eS.T,{rows:3,value:N,onChange:e=>w(e.target.value),placeholder:"zh"===a?'例如: {"tab":1}':'e.g. {"tab":1}'})]})]}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>t(!1),children:"zh"===a?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:()=>{o("navigate"===d?{trigger:c,action:d,pageType:u,page:"internal"===u?m:void 0,url:"external"===u?g:void 0,params:N?.trim()||void 0}:{trigger:c,action:d,tabKey:v||void 0,tabIndex:"number"==typeof j?j:void 0,params:N?.trim()||void 0}),t(!1)},children:"zh"===a?"确定":"Save"})]})]})})}async function e1(){console.log("\uD83D\uDCCB 采集Studio端配置...");try{let e=await e2(),t=await e4(),a=await e3(),s=await e5(),r=await e7(),n=await e6();return{manifest:a,auth:s,pages:r,dataSources:n,user:e,modules:t}}catch(e){throw console.error("❌ Studio配置采集失败:",e),e}}async function e2(){try{let e=localStorage.getItem("user"),t=localStorage.getItem("user_preferences"),a=localStorage.getItem("user_settings");return{currentUser:e?JSON.parse(e):null,preferences:t?JSON.parse(t):null,settings:a?JSON.parse(a):null}}catch(e){return console.warn("⚠️ 用户配置采集失败:",e),{}}}async function e4(){try{let e=await eV.api.modules.getAllModules();if(e.success&&e.data){let t={};return e.data.forEach(e=>{t[e.key]={name:e.name,description:e.description,version:e.version,config:e.config}}),t}return{}}catch(e){return console.warn("⚠️ 模块配置采集失败:",e),{}}}async function e3(){try{let e=te();if(e){let t=await eV.api.apps.getManifest(e,"draft");if(t.success&&t.data)return t.data}return{schemaVersion:"1.0",app:{appKey:e||"default-app",locale:"zh-CN",defaultLanguage:"zh",theme:"default",bottomNav:[{key:"home",label:"首页",route:"/preview"},{key:"me",label:"我的",route:"/profile"}],pcTopNav:[]}}}catch(e){return console.warn("⚠️ Manifest配置采集失败:",e),{schemaVersion:"1.0",app:{appKey:"default-app",locale:"zh-CN",defaultLanguage:"zh",theme:"default",bottomNav:[],pcTopNav:[]}}}}async function e5(){try{let e=localStorage.getItem("auth_config");if(e)return JSON.parse(e);return{layoutVariant:"centered",showBackground:!0,backgroundImage:void 0,showLogo:!0,logoImage:void 0,showIntro:!0,introTitle:void 0,introText:void 0,titleColor:void 0,bodyColor:void 0,providers:[{key:"phone",label:"手机号登录",enabled:!0},{key:"wechat",label:"微信登录",enabled:!0},{key:"bytedance",label:"字节登录",enabled:!1},{key:"google",label:"谷歌登录",enabled:!0},{key:"apple",label:"苹果登录",enabled:!0}]}}catch(e){return console.warn("⚠️ 认证配置采集失败:",e),{layoutVariant:"centered",showBackground:!0,providers:[]}}}async function e7(){try{let e=te();if(e){let t=await eV.api.apps.getManifest(e,"draft");if(t.success&&t.data?.pages)return t.data.pages}return{}}catch(e){return console.warn("⚠️ 页面配置采集失败:",e),{}}}async function e6(){try{let e=te();if(e){let t=await eV.api.apps.getManifest(e,"draft");if(t.success&&t.data?.dataSources)return t.data.dataSources}return{}}catch(e){return console.warn("⚠️ 数据源配置采集失败:",e),{}}}async function e9(){console.log("\uD83D\uDCF1 通过iframe桥接采集APP端配置...");try{var e,t,a;let s=function(){for(let e of document.querySelectorAll("iframe"))try{if(e.src&&(e.src.includes("47.94.52.142::3002")||e.src.includes("47.94.52.142::3005")||e.src.includes("/preview")||e.src.includes("/p/")))return e}catch(e){continue}return null}();if(!s)return console.warn("⚠️ 未找到AINO-APP的iframe，使用默认配置"),e8();let r=`config-request-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,n=await (e=s,t={type:"aino:config:request",requestId:r},a=r,new Promise(s=>{let r=setTimeout(()=>{s({success:!1,error:"请求超时"})},1e4),n=t=>{if(t.source!==e.contentWindow)return;let i=t.data;"aino:config:response"===i.type&&i.requestId===a?(clearTimeout(r),window.removeEventListener("message",n),s({success:!0,data:i.payload})):"aino:config:error"===i.type&&i.requestId===a&&(clearTimeout(r),window.removeEventListener("message",n),s({success:!1,error:i.payload?.message||"未知错误"}))};window.addEventListener("message",n);try{e.contentWindow?.postMessage(t,"*")}catch(e){clearTimeout(r),window.removeEventListener("message",n),s({success:!1,error:"消息发送失败"})}}));if(n.success)return console.log("✅ APP配置采集成功"),n.data;return console.warn("⚠️ APP配置采集失败，使用默认配置"),e8()}catch(e){return console.error("❌ iframe桥接配置采集失败:",e),e8()}}function e8(){return{layout:{},components:{},design:{},animation:{},accessibility:{},themes:{},cards:{},localStorage:{}}}function te(){let e=window.location.pathname.match(/\/app\/([^\/]+)/);return e?e[1]:null}let tt=eF()(async()=>{},{loadableGenerated:{modules:["app/app/[appId]/client-config/page.tsx -> @monaco-editor/react"]},ssr:!1}),ta={type:"object",additionalProperties:!0,properties:{title:{type:["string","object"],properties:{zh:{type:"string"},en:{type:"string"}}},subtitle:{type:["string","object"],properties:{zh:{type:"string"},en:{type:"string"}}},actions:{type:"array",items:{type:"object",properties:{key:{type:"string"},label:{type:"string"},icon:{type:"string"}}}},style:{type:"object",properties:{variant:{type:"string",enum:["plain","soft","elevated"]},radius:{type:"string",enum:["none","sm","md","lg","xl","full"]},elevation:{type:"number",minimum:0,maximum:24},padding:{type:"string",enum:["none","xs","sm","md","lg"]},gap:{type:"string",enum:["none","xs","sm","md","lg"]},colors:{type:"object",properties:{background:{type:"string"},text:{type:"string"},highlight:{type:"string"}}},typography:{type:"object",properties:{titleSize:{type:"string"},bodySize:{type:"string"}}}}},layout:{type:"object",properties:{type:{type:"string"},columns:{type:"number",minimum:1,maximum:4}}},display:{type:"object",properties:{mode:{type:"string",enum:["pick","filter","time","hot"]},limit:{type:["number","null"]},unlimited:{type:"boolean"},sort:{type:"object",properties:{by:{type:"string"},order:{type:"string",enum:["asc","desc"]}}}}},data:{type:"object",properties:{mode:{type:"string",enum:["dynamic","static"]},source:{type:"string"},static:{type:["array","object","null"]}}},render:{type:"object",properties:{item:{type:["object","string"]}}}}},ts=()=>`{
  "title": "",
  "subtitle": "",
  "style": {
    "variant": "plain",
    "radius": "md",
    "elevation": 0,
    "padding": "md",
    "gap": "md",
    "colors": { "background": "", "text": "" },
    "typography": { "titleSize": "base", "bodySize": "sm" }
  },
  "layout": { "type": "list", "columns": 1 },
  "display": { "limit": 1, "mode": "time" },
  "data": { "mode": "dynamic" },
  "render": { "item": {} }
}`;function tr(){let e=(0,i.useParams)();(0,i.useRouter)();let{locale:t}=(0,e$.Y)(),{toast:a}=(0,eI.dj)(),[s,p]=(0,n.useState)("mobile"),[u,h]=(0,n.useState)("zh"===t?"zh":"en"),[m,x]=(0,n.useState)(""),[g,f]=(0,n.useState)("preview"),[v,y]=(0,n.useState)(""),[j,b]=(0,n.useState)(""),[N,w]=(0,n.useState)(!1),z=(0,n.useRef)(null);(0,n.useRef)(!1);let[S,k]=(0,n.useState)(!1),[C,$]=(0,n.useState)(!1),[I,A]=(0,n.useState)(!0),[T,O]=(0,n.useState)(!1),[P,E]=(0,n.useState)(!1),[L,R]=(0,n.useState)(null),[D,_]=(0,n.useState)(!1),[M,B]=(0,n.useState)("manifest"),[J,U]=(0,n.useState)(!1),[H,G]=(0,n.useState)(""),[F,K]=(0,n.useState)({layoutVariant:"centered",showBackground:!0,backgroundImage:void 0,showLogo:!0,logoImage:void 0,showIntro:!0,introTitle:void 0,introText:void 0,providers:[{key:"phone",label:"zh"===t?"手机号登录":"Phone",enabled:!0},{key:"wechat",label:"zh"===t?"微信登录":"WeChat",enabled:!0},{key:"bytedance",label:"zh"===t?"字节登录":"ByteDance",enabled:!1},{key:"google",label:"zh"===t?"谷歌登录":"Google",enabled:!0},{key:"apple",label:"zh"===t?"苹果登录":"Apple",enabled:!0}]}),[V,q]=(0,n.useState)({schemaVersion:"1.0",app:{appKey:e.appId,locale:"zh"===u?"zh-CN":"en-US",defaultLanguage:"zh"===u?"zh":"en",theme:"default",bottomNav:[{key:"home",label:"zh"===u?"首页":"Home",route:"/preview"},{key:"me",label:"zh"===u?"我的":"Me",route:"/profile"}],pcTopNav:[]},dataSources:{}}),[W,X]=(0,n.useState)("manifest"),[Z,Y]=(0,n.useState)("home"),[Q,ee]=(0,n.useState)(!1),[et,ea]=(0,n.useState)([]),[es,er]=(0,n.useState)(!1),[en,ei]=(0,n.useState)(""),[el,eo]=(0,n.useState)(null),[ec,ed]=(0,n.useState)({}),[ep,eu]=(0,n.useState)({});e.appId;let[eh,em]=(0,n.useState)({}),[ex,eg]=(0,n.useState)([]),[ef,ev]=(0,n.useState)({}),[ey,ej]=(0,n.useState)({}),[eb,eA]=(0,n.useState)({});function eG(e){try{let t=[],a=e=>"String"===e||"Number"===e||"Boolean"===e||"Date"===e||"Time"===e||"Datetime"===e||"RichText"===e||"Image"===e||"Video"===e||"File"===e;return((e,s)=>{if(e&&"object"==typeof e){if(Array.isArray(e)){if(0===e.length)return;let r=e[0];if(a(r)){s&&t.push(`${s}[]`);return}if("object"==typeof r&&r){Object.keys(r).forEach(e=>{let n=r[e];a(n)?t.push(`${s}[].${e}`):Array.isArray(n)?t.push(`${s}[].${e}[]`):"object"==typeof n&&n?Object.keys(n).forEach(a=>{t.push(`${s}[].${e}.${a}`)}):t.push(`${s}[].${e}`)});return}s&&t.push(`${s}[]`);return}Object.keys(e).forEach(r=>{let n=e[r],i=s?`${s}.${r}`:r;if(a(n))t.push(i);else if(Array.isArray(n)){if(0===n.length)t.push(`${i}[]`);else{let e=n[0];a(e)?t.push(`${i}[]`):"object"==typeof e&&e?Object.keys(e).forEach(s=>{let r=e[s];a(r)?t.push(`${i}[].${s}`):Array.isArray(r)?t.push(`${i}[].${s}[]`):"object"==typeof r&&r?Object.keys(r).forEach(e=>{t.push(`${i}[].${s}.${e}`)}):t.push(`${i}[].${s}`)}):t.push(`${i}[]`)}}else if("object"==typeof n&&n){let e=Object.keys(n);0===e.length?t.push(i):e.forEach(e=>{let s=n[e];a(s)||"object"!=typeof s?t.push(`${i}.${e}`):Array.isArray(s)?0===s.length?t.push(`${i}.${e}[]`):a(s[0])?t.push(`${i}.${e}[]`):"object"==typeof s[0]&&s[0]&&Object.keys(s[0]).forEach(a=>{t.push(`${i}.${e}[].${a}`)}):Object.keys(s).forEach(a=>{t.push(`${i}.${e}.${a}`)})})}else t.push(i)})}})(e,""),Array.from(new Set(t))}catch{return[]}}function eF(e,t,a){ej(s=>{let r={...s[e]||{},[t]:a};return{...s,[e]:r}})}function e1(e){try{em(t=>{let a={...t};return delete a[e],a}),ej(t=>{let a={...t};return delete a[e],a}),eA(t=>{let a={...t};return delete a[e],a})}catch{}}function e2(e,t){ej(a=>{let s={...a[e]||{}};return void 0!==s[t]&&delete s[t],{...a,[e]:s}})}let e4=(0,n.useMemo)(()=>{let e=en.trim().toLowerCase();return e?et.filter(t=>t.name.toLowerCase().includes(e)||t.moduleName.toLowerCase().includes(e)):et},[et,en]);async function e3(){if(!es&&!(et.length>0)){er(!0);try{let t=String(e.appId),a=await eV.api.applications.getApplicationModules(t),s=a.success&&a.data?a.data.modules:[],r=[],n=await Promise.all(s.map(async e=>{try{let a=await eV.api.directories.getDirectories({applicationId:t,moduleId:e.id}),s=a.success&&a.data&&a.data.directories||[];return r.push(s.map(t=>({...t,moduleName:e.name}))),s.filter(e=>"table"===e.type).map(t=>({id:t.id,name:t.name,moduleName:e.name}))}catch{return[]}}));return ea(n.flat()),r.flat()}finally{er(!1)}}}let[e5,e7]=(0,n.useState)(!1),[e6,e9]=(0,n.useState)(null),[e8,te]=(0,n.useState)(""),[tr,tn]=(0,n.useState)(!1),[ti,tl]=(0,n.useState)("navigation"),[to,tc]=(0,n.useState)("iconText"),[td,tp]=(0,n.useState)("grid-4"),[tu,th]=(0,n.useState)([]),[tm,tx]=(0,n.useState)(!1),[tg,tf]=(0,n.useState)(null),[tv,ty]=(0,n.useState)(0),[tj,tb]=(0,n.useState)({}),[tN,tw]=(0,n.useState)(""),[tz,tS]=(0,n.useState)(!1),[tk,tC]=(0,n.useState)(""),[t$,tI]=(0,n.useState)(""),[tA,tT]=(0,n.useState)('{\n  "title": "",\n  "subtitle": ""\n}'),[tO,tP]=(0,n.useState)({}),[tE,tL]=(0,n.useState)(""),[tR,tD]=(0,n.useState)(null),[t_,tM]=(0,n.useState)("json"),tB=(0,n.useRef)(!1),tJ=(0,n.useRef)(null),[tU,tH]=(0,n.useState)(!1),[tG,tF]=(0,n.useState)(""),[tK,tV]=(0,n.useState)(""),[tq,tW]=(0,n.useState)("1"),[tX,tZ]=(0,n.useState)(!1),[tY,tQ]=(0,n.useState)("time"),[t0,t1]=(0,n.useState)(""),[t2,t4]=(0,n.useState)(!1);function t3(e){let t=new Set,a=[];for(let s of Array.isArray(e)?e:[]){let e=String(s?.id||"")+"::"+String(s?.title||"");t.has(e)||(t.add(e),a.push({id:s?.id||`tab-${Date.now()}-${Math.random().toString(36).slice(2,7)}`,title:s?.title||""}))}return a}let[t5,t7]=(0,n.useState)(!1),[t6,t9]=(0,n.useState)(""),[t8,ae]=(0,n.useState)(""),[at,aa]=(0,n.useState)(""),[as,ar]=(0,n.useState)(!1),[an,ai]=(0,n.useState)([]),[al,ao]=(0,n.useState)({}),ac=(0,n.useRef)(null),ad=(0,n.useMemo)(()=>Object.entries(V.dataSources||{}).filter(([,e])=>e&&"table"===e.type).map(([e,t])=>({key:e,tableId:t.tableId,label:t.label||`${t.moduleName||""}/${t.tableName||""}`})),[V.dataSources]);async function ap(t){try{ar(!0);let a=(V.dataSources||{})[t],s=a?.tableId;if(!s&&"string"==typeof t&&t.startsWith("table:")&&(s=t.replace(/^table:/,"")),!s){ai([]);return}let r=String(e.appId),n=await eV.api.directoryDefs.getOrCreateDirectoryDefByDirectoryId(s,r),i=n?.data?.id;if(!i){ai([]);return}let l=await eV.api.fields.getFields({directoryId:i,page:1,limit:100}),o=l&&null!=l.data?l.data:l,c=(Array.isArray(o)?o:Array.isArray(o?.items)?o.items:Array.isArray(o?.records)?o.records:[]).map(e=>{let t=e.schema||{},a=e.type||t.type||"text",s=t.label||e.label||e.key;return{id:e.id,key:e.key,label:s,type:a,options:Array.isArray(t.options)?t.options:[],optionsTree:Array.isArray(t.cascaderOptions)?t.cascaderOptions:[]}}).sort((e,t)=>{let a=e=>+("select"!==e&&"cascader"!==e);return a(e.type)-a(t.type)});if(ai(c),ac.current&&ac.current.dataSourceKey===t){let e=ac.current,t=new Set((e.fields||[]).map(e=>String(e.fieldId)));ao(()=>{let e={};return c.forEach(a=>{let s=t.has(String(a.key));e[a.key]={fieldId:a.key,type:a.type,label:a.label,__checked:s}}),e}),ac.current=null}else ao(e=>{let t={...e};return c.forEach(e=>{t[e.key]||(t[e.key]={fieldId:e.key,type:e.type,label:e.label})}),t})}catch(e){ai([])}finally{ar(!1)}}async function au(e){if(!ep[e]&&!ec[e]){eu(t=>({...t,[e]:!0}));try{let t=await eV.api.records.listRecords(e,{page:1,pageSize:100}),a=(t.success&&t.data?Array.isArray(t.data)?t.data:t.data.records||[]:[]).map(e=>({id:e.id,label:e.name||e.title||e.id,raw:e}));ed(t=>({...t,[e]:a}))}catch{ed(t=>({...t,[e]:[]}))}finally{eu(t=>({...t,[e]:!1}))}}}function ah(e){q(t=>{let a={...t},s={...a.dataSources||{}};return delete s[e],a.dataSources=s,a})}async function am(e,t,a,s=.8){let r=document.createElement("img"),n=await new Promise((t,a)=>{let s=new FileReader;s.onload=()=>t(String(s.result)),s.onerror=a,s.readAsDataURL(e)});await new Promise(e=>{r.onload=e,r.src=n});let i=document.createElement("canvas"),l=Math.min(t/r.width,a/r.height),o=Math.round(r.width*l),c=Math.round(r.height*l);return i.width=o,i.height=c,i.getContext("2d").drawImage(r,0,0,o,c),i.toDataURL("image/jpeg",s)}let[ax,ag]=(0,n.useState)(!1),[af,av]=(0,n.useState)(!1),[ay,aj]=(0,n.useState)(!1),[ab,aN]=(0,n.useState)(""),[aw,az]=(0,n.useState)(""),[aS,ak]=(0,n.useState)(""),[aC,a$]=(0,n.useState)("");async function aI(){try{let t=await fetch("http://47.94.52.142::3007/api/preview-manifests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({manifest:V})}),a=await t.json();if(!t.ok||!a?.success||!a?.data?.id)throw Error(a?.message||"create failed");let r=a.data.id;b(r);let n=encodeURIComponent(JSON.stringify(V?.dataSources||{})),i=`http://47.94.52.142::3005/${u}/preview?previewId=${r}&device=${s}&appId=${e.appId}&data=${n}`;y(i),f("preview")}catch(e){a({description:e?.message||("zh"===u?"创建预览失败":"Failed to create preview"),variant:"destructive"}),f("code")}}async function aA(){try{let t=await fetch("http://47.94.52.142::3007/api/preview-manifests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({manifest:V})}),r=await t.json();if(!t.ok||!r?.success||!r?.data?.id)throw Error(r?.message||"create failed");let n=r.data.id;b(n);let i=encodeURIComponent(JSON.stringify(V?.dataSources||{})),l=`http://47.94.52.142::3005/${u}/preview?previewId=${n}&device=${s}&appId=${e.appId}&data=${i}`;y(l),window.open(l,"_blank","noopener,noreferrer"),a({description:"zh"===u?"预览已在新标签页打开":"Preview opened in new tab"})}catch(e){a({description:e?.message||("zh"===u?"打开预览失败":"Failed to open preview"),variant:"destructive"})}}async function aT(t,r){try{if(!r)try{let e=JSON.parse(m||"{}");q(t=>{let a={...t};if("manifest"===W)Object.assign(a,e);else if("app"===W)a.app=e;else if("dataSources"===W)a.dataSources=e;else if("page"===W){if(tR&&tE)try{let t=tR.pageKey.replace(/^p-/,"");tE.endsWith(".json")?(window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:t,sectionKey:tR.sectionKey,cardType:tR.cardType,props:e},"*"),tP(t=>({...t,[tE]:JSON.stringify(e,null,2)}))):tE.endsWith(".tsx")&&(window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:t,sectionKey:tR.sectionKey,cardType:tR.cardType,jsx:m},"*"),tP(e=>({...e,[tE]:m})))}catch{}else a.pages=a.pages||{},a.pages[Z]=e}return a})}catch(e){a({description:e?.message||("zh"===u?"JSON 无法解析":"JSON parse error"),variant:"destructive"});return}if(!j)return aI();let n=t??V,i=await fetch(`http://47.94.52.142::3007/api/preview-manifests/${j}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({manifest:n})}),l=await i.json().catch(()=>({}));if(!i.ok||l?.success===!1)throw Error(l?.message||"save failed");try{let t=new URL(v||`http://47.94.52.142::3005/${u}/preview?previewId=${j}&device=${s}&appId=${e.appId}`);t.searchParams.set("device",s),t.searchParams.set("appId",String(e.appId));let a=JSON.stringify(V?.dataSources||{});t.searchParams.set("data",encodeURIComponent(a)),y(t.toString())}catch{let t=encodeURIComponent(JSON.stringify(V?.dataSources||{})),a=`http://47.94.52.142::3005/${u}/preview?previewId=${j}&device=${s}&appId=${e.appId}&data=${t}`;y(a)}try{let t=`STUDIO_CLIENT_CFG_${e.appId}`,a={...n,__ui:{activePageKey:H,pageTabIndex:tv}};window.localStorage.setItem(t,JSON.stringify(a))}catch{}a({description:"zh"===u?"已保存并刷新预览":"Saved and refreshed preview"})}catch(e){a({description:e?.message||("zh"===u?"保存失败":"Save failed"),variant:"destructive"})}}async function aO(){if(!C){$(!0);try{let t={...function(e,t,a,s){let r={};try{r=JSON.parse(s||"{}")}catch(e){throw Error(e?.message||("zh"===u?"JSON 无法解析":"JSON parse error"))}let n={...e||{}};return"manifest"===t?Object.assign(n,r):"app"===t?n.app=r:"dataSources"===t?n.dataSources=r:"page"===t&&(n.pages=n.pages||{},n.pages[a]=r),n}(V,W,Z,m),dataMappings:ey,incomingMappings:eh},r=String(e.appId),n={};try{let e=await eV.api.applications.getApplication(r);n=(e.success&&e.data?e.data.config:{})||{}}catch{n={}}let i={...n,clientManifest:t},l=await eV.api.applications.updateApplication(r,{config:i});if(!l.success)throw Error(l.error||("zh"===u?"保存到数据库失败":"Save to database failed"));if(q(t),j){let a=await fetch(`http://47.94.52.142::3007/api/preview-manifests/${j}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({manifest:t})}),r=await a.json().catch(()=>({}));if(!a.ok||r?.success===!1)throw Error(r?.message||"save failed");try{let a=new URL(v||`http://47.94.52.142::3005/${u}/preview?previewId=${j}&device=${s}&appId=${e.appId}`);a.searchParams.set("device",s),a.searchParams.set("appId",String(e.appId));let r=JSON.stringify(t?.dataSources||{});a.searchParams.set("data",encodeURIComponent(r)),y(a.toString())}catch{let a=encodeURIComponent(JSON.stringify(t?.dataSources||{})),r=`http://47.94.52.142::3005/${u}/preview?previewId=${j}&device=${s}&appId=${e.appId}&data=${a}`;y(r)}}else{let a=await fetch("http://47.94.52.142::3007/api/preview-manifests",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({manifest:t})}),r=await a.json();if(!a.ok||!r?.success||!r?.data?.id)throw Error(r?.message||"create failed");let n=r.data.id;b(n);let i=encodeURIComponent(JSON.stringify(t?.dataSources||{})),l=`http://47.94.52.142::3005/${u}/preview?previewId=${n}&device=${s}&appId=${e.appId}&data=${i}`;y(l)}a({description:"zh"===u?"已保存到数据库并刷新预览":"Saved to database and refreshed preview"}),f("preview")}catch(e){a({description:e?.message||("zh"===u?"保存失败":"Save failed"),variant:"destructive"})}finally{$(!1)}}}return(0,r.jsxs)("main",{className:"h-[100dvh] overflow-hidden bg-gradient-to-br from-white via-blue-50 to-green-50",children:[(0,r.jsx)("div",{className:"max-w-[100rem] mx-auto p-3 h-full",children:(0,r.jsx)(o.Zp,{className:"p-0 overflow-hidden h-full",children:(0,r.jsxs)(eN,{direction:"horizontal",className:"h-full",children:[(0,r.jsx)(ew,{defaultSize:22,minSize:18,className:"bg-white",children:(0,r.jsxs)("div",{className:"h-full overflow-y-auto p-3 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 pb-2 border-b",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-muted-foreground",children:"zh"===u?"设备类型":"Device"}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsxs)(l.$,{variant:"pc"===s?"default":"outline",size:"sm",onClick:()=>p("pc"),className:"flex items-center gap-1 px-2 py-1 h-7 text-xs",children:[(0,r.jsx)(eT,{className:"w-3 h-3"}),"PC"]}),(0,r.jsxs)(l.$,{variant:"mobile"===s?"default":"outline",size:"sm",onClick:()=>p("mobile"),className:"flex items-center gap-1 px-2 py-1 h-7 text-xs",children:[(0,r.jsx)(eO,{className:"w-3 h-3"}),"Mobile"]})]})]}),D||J?J?(0,r.jsxs)("div",{className:"h-full overflow-y-auto p-1 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{U(!1),B("preview"),f("preview");try{let t=V.app?.defaultLanguage||"zh",a=encodeURIComponent(JSON.stringify(V?.dataSources||{})),r=`http://47.94.52.142::3005/${t}/preview?previewId=${j}&device=${s}&appId=${e.appId}&data=${a}`;y(r)}catch{}},children:[(0,r.jsx)(e_.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"返回":"Back"]}),(0,r.jsx)("div",{className:"text-sm font-semibold",children:"zh"===u?"页面配置":"Page Settings"}),H&&(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["/pages/",H,".json"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"页面名称":"Page Title"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)(eC.p,{placeholder:"zh"===u?"中文标题":"Title ZH",value:H&&V.pages?.[H]?.title?.zh||"",onChange:e=>q(t=>{let a={...t};a.pages=a.pages||{};let s=a.pages[H]||{};return s.title={...s.title||{},zh:e.target.value},a.pages[H]=s,a})}),(0,r.jsx)(eC.p,{placeholder:"zh"===u?"英文标题":"Title EN",value:H&&V.pages?.[H]?.title?.en||"",onChange:e=>q(t=>{let a={...t};a.pages=a.pages||{};let s=a.pages[H]||{};return s.title={...s.title||{},en:e.target.value},a.pages[H]=s,a})})]}),(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"zh"===u?"保存后右侧预览页标题会跟随显示":"Title applies to header after save"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("label",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,r.jsx)("span",{children:"zh"===u?"开启 顶部栏":"Show Header"}),(0,r.jsx)(eX.d,{checked:!!(H&&V.pages?.[H]?.options?.showHeader!==!1),onCheckedChange:e=>q(t=>{let a={...t};a.pages=a.pages||{};let s=a.pages[H]||{};return s.options={...s.options||{},showHeader:!!e},a.pages[H]=s,a})})]}),(0,r.jsx)("div",{})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["zh"===u?"顶部标签栏（开启顶部栏后可用）":"Top Tabs (requires header)"," "]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-3",children:(0,r.jsxs)("label",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,r.jsx)("span",{children:"zh"===u?"开启 顶部标签栏":"Enable Top Tabs"}),(0,r.jsx)(eX.d,{checked:!!(H&&V.pages?.[H]?.topBar?.enabled),onCheckedChange:e=>q(t=>{let a={...t};a.pages=a.pages||{};let s=a.pages[H]||{};return s.topBar={...s.topBar||{},enabled:!!e,tabs:Array.isArray(s.topBar?.tabs)?s.topBar?.tabs:[]},a.pages[H]=s,a})})]})}),!!V.pages?.[H]?.topBar?.enabled&&(0,r.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,r.jsx)("div",{className:"flex items-center gap-8 overflow-x-auto flex-nowrap",children:t3(V.pages?.[H]?.topBar?.tabs||[]).map((e,t)=>(0,r.jsxs)("button",{className:`relative text-lg flex-shrink-0 ${tv===t?"text-primary":"text-foreground"}`,onClick:()=>ty(t),children:[e.title||`${"zh"===u?"标签栏":""}${t+1}`,tv===t&&(0,r.jsx)("span",{className:"absolute left-0 right-0 -bottom-1 mx-auto block h-1 w-20 bg-primary rounded-full"})]},`tabkey-${e?.id||t}`))}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>{t1(""),t4(!0)},children:"zh"===u?"增加/管理":"Add/Manage"})})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"内容导航配置":"Content Navigation"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:function(){try{let e;let t=V.pages&&V.pages[H]||{};if(t?.topBar?.enabled){let a=t.tabContent||{};e=a?.[tv]?.contentNav||{}}else e=t?.contentNav||{};let a=e.style||("text"===e.type?"text":(e.type,"icon"));tl("status"===e.category?"status":"navigation"),tc("text"===a?"text":"iconText"),tp(e.layout||"grid-4"),th(Array.isArray(e.items)?e.items:[]),tn(!0)}catch{tl("navigation"),tc("iconText"),tp("grid-4"),th([]),tn(!0)}},children:"zh"===u?"配置内容导航":"Configure"}),H&&V.pages?.[H]?.contentNav&&(0,r.jsxs)("div",{className:"text-[11px] text-muted-foreground",children:[V.pages[H]?.contentNav?.type==="iconText"?"zh"===u?"图+文":"Icon+Text":"zh"===u?"文字":"Text"," \xb7 ",V.pages[H]?.contentNav?.layout||"-"," \xb7 ",Array.isArray(V.pages[H]?.contentNav?.items)?V.pages[H]?.contentNav?.items.length:0," ","zh"===u?"项":"items"]})]}),(()=>{try{let e=V.pages?.[H]||{},t=e?.topBar?.enabled?e?.tabContent?.[tv]?.contentNav:e?.contentNav;return!!t&&"text"===t.style}catch{return!1}})()&&(0,r.jsx)("div",{className:"mt-2 px-1",children:(0,r.jsx)("div",{className:"flex items-center gap-6 overflow-x-auto scrollbar-hide",children:(V.pages[H]?.contentNav?.items||[]).map((e,t)=>(0,r.jsxs)("button",{className:`relative pb-1 text-sm ${tv===t?"text-primary":"text-muted-foreground hover:text-foreground"}`,onClick:()=>{ty(t);try{let e=V.pages?.[H]||{},a=String(v||`http://47.94.52.142::3005/${u}/p/${H.replace(/^p-/,"")}`);fetch("http://47.94.52.142::3007/api/page-configs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json().catch(()=>null)).then(e=>{let s=e&&(e.id||e.data?.id),r=new URL(a);s&&r.searchParams.set("cfgId",String(s)),r.searchParams.set("tab",String(t)),y(r.toString())}).catch(()=>{let e=new URL(a);e.searchParams.set("tab",String(t)),y(e.toString())}),f("preview")}catch{}},children:[e?.title||`${"zh"===u?"标签":"Tab"} ${t+1}`,tv===t&&(0,r.jsx)("span",{className:"absolute left-1/2 -translate-x-1/2 -bottom-0.5 h-0.5 w-6 bg-primary rounded-full"})]},t))})}),(()=>{try{let e=V.pages?.[H]||{},t=e?.topBar?.enabled?e?.tabContent?.[tv]?.contentNav:e?.contentNav;return!!t&&"icon"===t.style}catch{return!1}})()&&(0,r.jsxs)("div",{className:"mt-2 px-1",children:[(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground mb-1",children:"zh"===u?"点击图标以切换配置的卡片区域":"Click icon to switch section being configured"}),(0,r.jsx)("div",{className:"flex items-center gap-5 overflow-x-auto scrollbar-hide py-2",children:(V.pages[H]?.contentNav?.items||[]).map((e,t)=>(0,r.jsxs)("button",{className:`flex flex-col items-center gap-1 ${tv===t?"text-primary":"text-foreground"}`,onClick:()=>{ty(t);try{let e=V.pages?.[H]||{},a=String(v||`http://47.94.52.142::3005/${u}/p/${H.replace(/^p-/,"")}`);fetch("http://47.94.52.142::3007/api/page-configs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json().catch(()=>null)).then(e=>{let s=e&&(e.id||e.data?.id),r=new URL(a);s&&r.searchParams.set("cfgId",String(s)),r.searchParams.set("tab",String(t)),y(r.toString())}).catch(()=>{let e=new URL(a);e.searchParams.set("tab",String(t)),y(e.toString())}),f("preview")}catch{}},children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 border border-gray-200"}),(0,r.jsx)("div",{className:"text-xs opacity-70",children:e?.title||`Item ${t+1}`})]},t))})]})]}),(0,r.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"数据定义":"Data Sources"}),(0,r.jsxs)(l.$,{variant:"secondary",size:"sm",onClick:()=>ee(!0),children:[(0,r.jsx)(eL.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"添加数据":"Add Data"]})]}),(0,r.jsxs)("div",{className:"space-y-1 max-h-40 overflow-auto pr-1",children:[0===Object.entries(V.dataSources||{}).length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground px-1",children:"zh"===u?"尚未添加数据源":"No data sources yet"}),Object.entries(V.dataSources||{}).map(([e,t])=>(0,r.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-2 py-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,r.jsx)(eR.A,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{className:"font-medium",children:t?.label||e})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gray-100 text-gray-600",children:t?.type}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>ah(e),children:(0,r.jsx)(eP.A,{className:"w-4 h-4"})})]})]},e))]})]}),(0,r.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center justify-between",children:[(0,r.jsx)("span",{children:"zh"===u?"数据映射":"Field Mapping"}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground",children:"zh"===u?"将卡片入参字段映射到所选数据源表字段":"Map card input fields to table fields"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[0===Object.entries(eh||{}).length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground px-1",children:"zh"===u?"等待子页面选择数据源后将自动出现映射项":"Mappings will appear after selecting data source in preview"}),Object.entries(eh||{}).map(([e,t])=>{let a=eG(t.inputs||{}),s=eb[e]||t.dataSourceKey||"",n=ef[s]||[],i=ey[e]||{};return(0,r.jsxs)("div",{className:"border rounded-md p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"text-xs font-medium",children:[t.cardName||t.cardType," → ",(0,r.jsx)("span",{className:"text-muted-foreground",children:(V.dataSources||{})[s]?.label||t.dataSourceLabel||s||"-"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground",children:new Date(t.timestamp).toLocaleString()}),(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>e1(e),children:(0,r.jsx)(eP.A,{className:"w-4 h-4"})})]})]}),0===a.length?(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"暂无卡片入参字段":"No input fields"}):(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:a.map(t=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-xs w-40 truncate",title:t,children:t}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)(eY.l6,{disabled:0===n.length||!s,value:n.length>0?i[t]??void 0:void 0,onValueChange:a=>eF(e,t,a),children:[(0,r.jsx)(eY.bq,{className:"max-w-[80px] w-full truncate",children:(0,r.jsx)(eY.yv,{placeholder:"zh"===u?"选择字段":"Choose field"})}),(0,r.jsx)(eY.gC,{children:0===n.length?(0,r.jsx)(eY.eb,{disabled:!0,value:"__no_fields__",children:"zh"===u?"（无可用字段）":"(no fields)"}):n.map(e=>(0,r.jsx)(eY.eb,{value:String(e.key),children:e.label||String(e.key)},String(e.key)))})]})}),(0,r.jsx)(l.$,{size:"sm",variant:"ghost",onClick:()=>e2(e,t),title:"zh"===u?"清除该字段映射":"Clear mapping",children:(0,r.jsx)(eD.A,{className:"w-4 h-4"})})]},`${e}::${t}`))})]},e)})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"主内容":"Main Content"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(tj[tN]||[]).map(e=>(0,r.jsxs)("div",{className:"px-3 py-2 rounded-xl border bg-white flex items-center justify-between",children:[(0,r.jsx)("span",{className:"truncate text-sm text-foreground",children:e.displayName||e.type}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>{try{let t=V.pages?.[H]?.topBar,a=t?.enabled?`tab-${tv}`:`icon-${tv}`,s=`pages/${H}/cards/${a}/${e.type}.json`;window.frames[0]?.postMessage({type:"GET_OVERRIDE",pageId:H.replace(/^p-/,""),sectionKey:a,cardType:e.type},"*"),setTimeout(()=>{let t=tO[s]||ts();x(t),X("page"),f("code"),tL(s),tD({pageKey:H,sectionKey:a,cardType:e.type}),tM("json")},100)}catch{}},children:"zh"===u?"配置":"Config"}),(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>{tF(e.displayName||e.type),tV(e.type),tH(!0),tW("1"),tZ(!1),tQ("time")},children:"zh"===u?"显示":"Display"}),(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>{try{let t=V.pages?.[H]?.topBar,a=t?.enabled?`tab-${tv}`:`icon-${tv}`;t9(e.displayName||e.type),ae(e.type);let s="";try{let t=localStorage.getItem(`APP_PAGE_${H.replace(/^p-/,"")}`),r=t?JSON.parse(t):{},n=r?.overrides?.[a]?.[e.type],i=n?.filters?.dataSourceKey;i&&(s=String(i))}catch{}if(!s)try{let t=Object.entries(eh||{}),a=t.find(([t,a])=>String(a?.cardType)===String(e.type))?.[1];a&&(a.dataSourceKey?s=String(a.dataSourceKey):a.tableId&&(s=`table:${String(a.tableId)}`))}catch{}s||(s=ad[0]?.key||""),aa(s),ap(s),window.frames[0]?.postMessage({type:"GET_OVERRIDE",pageId:H.replace(/^p-/,""),sectionKey:a,cardType:e.type},"*"),t7(!0)}catch{}},children:"zh"===u?"筛选":"Filter"}),(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>{try{let t=V.pages?.[H]?.topBar,a=t?.enabled?`tab-${tv}`:`icon-${tv}`,s=V.pages?.[H]?.innerPages&&V.pages[H].innerPages[a]&&V.pages[H].innerPages[a][e.type];q(t=>{let r={...t};if(r.pages=r.pages||{},!s){let t=`p-${Date.now().toString(36)}`;s=t,r.pages[t]={title:{zh:`${e.displayName||e.type}内页`,en:`${e.displayName||e.type} Detail`},layout:"mobile",route:`/${t}`,options:{showBack:!0},cards:[]};let n=r.pages[H]||{};n.innerPages=n.innerPages||{},n.innerPages[a]=n.innerPages[a]||{},n.innerPages[a][e.type]=t,r.pages[H]=n}return r}),setTimeout(()=>{try{let t=V.pages&&V.pages[s]||{title:{zh:`${e.displayName||e.type}内页`,en:`${e.displayName||e.type} Detail`},layout:"mobile",route:`/${s}`},a={...t,options:{...t?.options||{},showBack:!0}};fetch("http://47.94.52.142::3007/api/page-configs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(e=>e.json().catch(()=>null)).then(e=>{let t=e&&(e.id||e.data?.id),a=new URL(`http://47.94.52.142::3005/${u}/p/${String(s).replace(/^p-/,"")}`);t&&a.searchParams.set("cfgId",String(t)),y(a.toString())}).catch(()=>{let e=new URL(`http://47.94.52.142::3005/${u}/p/${String(s).replace(/^p-/,"")}`);y(e.toString())}),G(String(s)),U(!0),f("preview")}catch{}},0)}catch{}},children:"zh"===u?"内页":"Inner"})]})]},e.type)),(!tj[tN]||0===tj[tN].length)&&(0,r.jsx)("div",{className:"text-xs opacity-60",children:"zh"===u?"右侧新增卡片后，将自动出现在这里以配置显示":"New cards added on the right will appear here for display config."})]}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"其他卡片":"Other Cards"})]}),(0,r.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,r.jsx)("span",{children:"zh"===u?"开启 全局底部导航":"Show Bottom Nav"}),(0,r.jsx)(eX.d,{checked:!!(H&&V.pages?.[H]?.options?.showBottomNav!==!1),onCheckedChange:e=>q(t=>{let a={...t};a.pages=a.pages||{};let s=a.pages[H]||{};return s.options={...s.options||{},showBottomNav:!!e},a.pages[H]=s,a})})]}),(0,r.jsx)(l.$,{size:"sm",className:"w-full",onClick:()=>{try{let e=V.pages?.[H]||{},t=String(v||`http://47.94.52.142::3005/${u}/p/${H.replace(/^p-/,"")}`);fetch("http://47.94.52.142::3007/api/page-configs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json().catch(()=>null)).then(e=>{let a=e&&(e.id||e.data?.id),s=new URL(t);a&&s.searchParams.set("cfgId",String(a)),y(s.toString())}).catch(()=>{let e=new URL(t);y(e.toString())}),f("preview")}catch{}},children:"zh"===u?"保留浏览":"Keep Preview"})]})]}):(0,r.jsxs)("div",{className:"h-full p-1 space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{_(!1),B("preview"),f("preview");try{let t=V.app?.defaultLanguage||"zh",a=encodeURIComponent(JSON.stringify(V?.dataSources||{})),r=`http://47.94.52.142::3005/${t}/preview?previewId=${j}&device=${s}&appId=${e.appId}&data=${a}`;y(r)}catch{}},children:[(0,r.jsx)(e_.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"返回":"Back"]}),(0,r.jsx)("div",{className:"text-sm font-semibold",children:"zh"===u?"登录配置":"Login Settings"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"布局模式":"Layout"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"centered"===F.layoutVariant?"default":"outline",onClick:()=>K(e=>({...e,layoutVariant:"centered"})),children:"zh"===u?"居中":"Centered"}),(0,r.jsx)(l.$,{size:"sm",variant:"bottomDocked"===F.layoutVariant?"default":"outline",onClick:()=>K(e=>({...e,layoutVariant:"bottomDocked"})),children:"zh"===u?"底部承载":"Bottom"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"显示元素":"Visibility"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,r.jsx)("span",{className:"mr-2",children:"zh"===u?"背景":"Background"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>ag(!0),disabled:!F.showBackground,children:"zh"===u?"上传":"Upload"}),(0,r.jsx)(eX.d,{checked:F.showBackground,onCheckedChange:e=>K(t=>({...t,showBackground:!!e}))})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border rounded-md px-3 py-2",children:[(0,r.jsx)("span",{className:"mr-2",children:"logo"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>av(!0),disabled:!F.showLogo,children:"zh"===u?"上传":"Upload"}),(0,r.jsx)(eX.d,{checked:F.showLogo,onCheckedChange:e=>K(t=>({...t,showLogo:!!e}))})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between border rounded-md px-3 py-2 col-span-2",children:[(0,r.jsx)("span",{className:"mr-2",children:"zh"===u?"介绍":"Intro"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>{aN(F.introTitle?.zh||F.introTitle?.en||""),az(F.introText?.zh||F.introText?.en||""),ak(F.introTitle?.en||""),a$(F.introText?.en||""),aj(!0)},disabled:!F.showIntro,children:"zh"===u?"编辑":"Edit"}),(0,r.jsx)(eX.d,{checked:F.showIntro,onCheckedChange:e=>K(t=>({...t,showIntro:!!e}))})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"文本设置":"Text Settings"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"标题颜色":"Title Color"}),(0,r.jsx)(eC.p,{type:"color",value:F.titleColor||"#111111",onChange:e=>K(t=>({...t,titleColor:e.target.value}))})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"内容颜色":"Body Color"}),(0,r.jsx)(eC.p,{type:"color",value:F.bodyColor||"#6b7280",onChange:e=>K(t=>({...t,bodyColor:e.target.value}))})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"登录方式":"Login Methods"}),(0,r.jsx)("div",{className:"space-y-2",children:F.providers.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[20px_1fr_auto] items-center gap-2 border rounded-md px-2 py-2",draggable:"phone"!==e.key,onDragStart:a=>{"phone"!==e.key&&a.dataTransfer.setData("text/plain",String(t))},onDragOver:t=>{"phone"!==e.key&&t.preventDefault()},onDrop:a=>{if("phone"===e.key)return;a.preventDefault();let s=Number(a.dataTransfer.getData("text/plain"));Number.isNaN(s)||s===t||0===s||0===t||K(e=>{let a=[...e.providers],[r]=a.splice(s,1);return a.splice(t,0,r),{...e,providers:a}})},children:[(0,r.jsx)("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground flex items-center justify-center opacity-70",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})}),(0,r.jsx)("div",{className:"font-medium text-sm",children:e.label}),(0,r.jsx)(eX.d,{checked:e.enabled,onCheckedChange:a=>K(s=>({...s,providers:s.providers.map((s,r)=>r===t?{...s,enabled:"phone"===e.key||!!a}:s)})),disabled:"phone"===e.key})]},e.key))})]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-sm font-semibold",children:"pc"===s?"zh"===u?"PC配置/构建":"PC Config/Build":"zh"===u?"Mobile配置/构建":"Mobile Config/Build"}),(0,r.jsx)(c.tU,{value:"config",className:"-mr-2",children:(0,r.jsxs)(c.j7,{children:[(0,r.jsx)(c.Xi,{value:"config",children:"zh"===u?"配置":"Config"}),(0,r.jsx)(c.Xi,{value:"ai",disabled:!0,children:"zh"===u?"AI 对话（稍后）":"AI (later)"})]})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"默认语言（应用）":"Default Language (App)"}),(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 bg-gray-50 rounded-md p-1 border",children:[(0,r.jsx)(l.$,{size:"sm",variant:"zh"===V.app.defaultLanguage?"default":"ghost",onClick:()=>{q(e=>({...e,app:{...e.app,defaultLanguage:"zh",locale:"zh-CN"}}))},children:"中文"}),(0,r.jsx)(l.$,{size:"sm",variant:"en"===V.app.defaultLanguage?"default":"ghost",onClick:()=>{q(e=>({...e,app:{...e.app,defaultLanguage:"en",locale:"en-US"}}))},children:"EN"})]})]}),!1,"pc"===s?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"PC顶部导航（最多8项）":"PC Top Nav (max 8)"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(V.app.pcTopNav||[]).map((e,t)=>(0,r.jsxs)("div",{className:"space-y-2 p-3 border rounded-lg bg-gray-50",draggable:!0,onDragStart:e=>{e.dataTransfer.setData("text/plain",String(t))},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let a=Number(e.dataTransfer.getData("text/plain"));Number.isNaN(a)||a===t||q(e=>{let s=[...e.app.pcTopNav||[]],[r]=s.splice(a,1);return s.splice(t,0,r),{...e,app:{...e.app,pcTopNav:s}}})},children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})}),(0,r.jsx)(eC.p,{value:e.label,onChange:e=>{let a={...V,app:{...V.app,pcTopNav:(V.app.pcTopNav||[]).map((a,s)=>s===t?{...a,label:e.target.value}:a)}};q(a),setTimeout(()=>{aT(a,!0)},0)},placeholder:"zh"===u?"导航名称":"Nav Label",className:"flex-1"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{q(e=>{let a={...e,app:{...e.app,pcTopNav:(e.app.pcTopNav||[]).filter((e,a)=>a!==t)}};return setTimeout(()=>{aT(a,!0)},0),a})},children:[(0,r.jsx)(eP.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"删除":"Delete"]})})]},e.key)),(V.app.pcTopNav||[]).length<8&&(0,r.jsx)(l.$,{variant:"secondary",onClick:()=>q(e=>{let t=`pc-${Date.now()}`,a={...e};return a.app={...a.app,pcTopNav:[...a.app.pcTopNav||[],{key:t,label:"zh"===u?"新导航":"New Nav"}]},setTimeout(()=>{aT(a,!0)},0),a}),children:"zh"===u?"添加导航项":"Add Nav Item"})]})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"底部导航（最多5项）":"Bottom Nav (max 5)"}),(0,r.jsxs)("div",{className:"space-y-2",children:[V.app.bottomNav.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[20px_1fr_auto_auto_auto] items-center gap-2",draggable:!0,onDragStart:e=>{e.dataTransfer.setData("text/plain",String(t))},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let a=Number(e.dataTransfer.getData("text/plain"));Number.isNaN(a)||a===t||q(e=>{let s=[...e.app.bottomNav],[r]=s.splice(a,1);return s.splice(t,0,r),{...e,app:{...e.app,bottomNav:s}}})},children:[(0,r.jsx)("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})}),(0,r.jsx)(eC.p,{value:e.label,onChange:e=>q(a=>({...a,app:{...a.app,bottomNav:a.app.bottomNav.map((a,s)=>s===t?{...a,label:e.target.value}:a)}})),placeholder:"zh"===u?"名称":"Label"}),(0,r.jsxs)(l.$,{variant:"secondary",size:"sm",onClick:()=>{let t=(e.route||"").replace(/^\//,"")||e.key;if(t){try{let a=e.route?.startsWith("/")?e.route:`/${t}`,s=new URL(`http://47.94.52.142::3005/${u}${a}`);y(s.toString())}catch{let a=e.route?.startsWith("/")?e.route:`/${t}`;y(`http://47.94.52.142::3005/${u}${a}`)}G(t),U(!0),f("preview")}else a({description:"zh"===u?"请先设置路由":"Set route first"})},children:[(0,r.jsx)(eE.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"配置":"Config"]}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{q(e=>{let a={...e,app:{...e.app,bottomNav:e.app.bottomNav.filter((e,a)=>a!==t)}};return setTimeout(()=>{aT(a,!0)},0),a})},children:(0,r.jsx)(eP.A,{className:"w-4 h-4"})})]},e.key)),V.app.bottomNav.length<5&&(0,r.jsx)(l.$,{variant:"secondary",onClick:()=>q(e=>{let t=`k${Date.now()}`,a=`/p-${t}`,s={...e};s.app={...s.app,bottomNav:[...s.app.bottomNav,{key:t,label:"zh"===u?"新项":"Item",route:a}]};let r=(a||"").replace(/^\//,"")||`p-${t}`;return s.pages=s.pages||{},s.pages[r]||(s.pages[r]={title:{zh:"新页面",en:"New Page"},layout:"mobile",route:a,cards:[]}),s}),children:"zh"===u?"添加项":"Add Item"})]})]}),(0,r.jsx)("div",{className:"pt-2",children:(0,r.jsx)(l.$,{className:"w-full justify-center",variant:"secondary",onClick:()=>{_(!0),B("auth-login"),f("preview");try{let e=V.app?.defaultLanguage||"zh",t={layoutVariant:F.layoutVariant||"centered",showBackground:!!F.showBackground,backgroundImage:F.backgroundImage||void 0,showLogo:!!F.showLogo,logoImage:F.logoImage||void 0,showIntro:!!F.showIntro,introTitle:F.introTitle||void 0,introText:F.introText||void 0,titleColor:F.titleColor||void 0,bodyColor:F.bodyColor||void 0,providers:(F.providers||[]).map(e=>({key:e.key,enabled:!!e.enabled}))},a=new URL(`http://47.94.52.142::3005/${e}/auth/login`);a.searchParams.set("authCfg",JSON.stringify(t)),a.searchParams.set("v",String(Date.now())),y(a.toString())}catch{}},children:"zh"===u?"登录配置":"Login Settings"})}),(0,r.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"数据定义":"Data Sources"}),(0,r.jsxs)(l.$,{variant:"secondary",size:"sm",onClick:()=>ee(!0),children:[(0,r.jsx)(eL.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"添加数据":"Add Data"]})]}),(0,r.jsxs)("div",{className:"space-y-1 max-h-40 overflow-auto pr-1",children:[0===Object.entries(V.dataSources||{}).length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground px-1",children:"zh"===u?"尚未添加数据源":"No data sources yet"}),Object.entries(V.dataSources||{}).map(([e,t])=>(0,r.jsxs)("div",{className:"flex items-center gap-2 border rounded-md px-2 py-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs",children:[(0,r.jsx)(eR.A,{className:"w-3.5 h-3.5"}),(0,r.jsx)("span",{className:"font-medium",children:t?.label||e})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gray-100 text-gray-600",children:t?.type}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>ah(e),children:(0,r.jsx)(eP.A,{className:"w-4 h-4"})})]})]},e))]})]}),(0,r.jsxs)("div",{className:"pt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center justify-between",children:[(0,r.jsx)("span",{children:"zh"===u?"数据映射":"Field Mapping"}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground",children:"zh"===u?"将卡片入参字段映射到所选数据源表字段":"Map card input fields to table fields"})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[0===Object.entries(eh||{}).length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground px-1",children:"zh"===u?"等待子页面选择数据源后将自动出现映射项":"Mappings will appear after selecting data source in preview"}),Object.entries(eh||{}).map(([e,t])=>{let a=eG(t.inputs||{}),s=eb[e]||t.dataSourceKey||"",n=ef[s]||[],i=ey[e]||{};return(0,r.jsxs)("div",{className:"border rounded-md p-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"text-xs font-medium",children:[t.cardName||t.cardType," → ",(0,r.jsx)("span",{className:"text-muted-foreground",children:(V.dataSources||{})[s]?.label||t.dataSourceLabel||s||"-"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground",children:new Date(t.timestamp).toLocaleString()}),(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>e1(e),children:(0,r.jsx)(eP.A,{className:"w-4 h-4"})})]})]}),0===a.length?(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"暂无卡片入参字段":"No input fields"}):(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:a.map(t=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-xs w-40 truncate",title:t,children:t}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)(eY.l6,{disabled:0===n.length||!s,value:n.length>0?i[t]??void 0:void 0,onValueChange:a=>eF(e,t,a),children:[(0,r.jsx)(eY.bq,{className:"max-w-[80px] w-full truncate",children:(0,r.jsx)(eY.yv,{placeholder:"zh"===u?"选择字段":"Choose field"})}),(0,r.jsx)(eY.gC,{children:0===n.length?(0,r.jsx)(eY.eb,{disabled:!0,value:"__no_fields__",children:"zh"===u?"（无可用字段）":"(no fields)"}):n.map(e=>(0,r.jsx)(eY.eb,{value:String(e.key),children:e.label||String(e.key)},String(e.key)))})]})}),(0,r.jsx)(l.$,{size:"sm",variant:"ghost",onClick:()=>e2(e,t),title:"zh"===u?"清除该字段映射":"Clear mapping",children:(0,r.jsx)(eD.A,{className:"w-4 h-4"})})]},`${e}::${t}`))})]},e)})]})]})]})]})}),(0,r.jsx)(eW.lG,{open:Q,onOpenChange:ee,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[880px] w-[95vw] max-h-[80vh] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?"选择数据源":"Choose Data Source"})}),(0,r.jsxs)("div",{className:"p-0",children:[(0,r.jsx)("div",{className:"p-3 text-xs text-muted-foreground",children:"zh"===u?"可选择整张表作为数据源，或展开表选择某条记录作为数据源。":"Choose a whole table or expand to pick a specific record."}),(0,r.jsxs)("div",{className:"px-3 pb-3 flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(eC.p,{placeholder:"zh"===u?"搜索表/模块":"Search tables/modules",value:en,onChange:e=>ei(e.target.value),className:"pl-8 w-64"}),(0,r.jsx)(eM.A,{className:"w-4 h-4 absolute left-2 top-2.5 text-gray-400"})]}),(0,r.jsx)(l.$,{variant:"outline",onClick:e3,disabled:es,children:"zh"===u?"刷新":"Refresh"})]}),(0,r.jsx)("div",{className:"px-3 pb-3",children:(0,r.jsx)(eq.F,{className:"h-[52vh] border rounded-lg",children:(0,r.jsxs)("div",{className:"divide-y",children:[es&&(0,r.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:"zh"===u?"加载中...":"Loading..."}),!es&&0===e4.length&&(0,r.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:"zh"===u?"暂无数据表":"No tables found"}),e4.map(e=>{let t=el===e.id,a=ec[e.id],s=!!ep[e.id];return(0,r.jsxs)("div",{className:"p-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"p-1 rounded hover:bg-gray-100",onClick:async()=>{let a=t?null:e.id;eo(a),a&&await au(e.id)},"aria-label":t?"collapse":"expand",children:t?(0,r.jsx)(eB.A,{className:"w-4 h-4"}):(0,r.jsx)(eJ.A,{className:"w-4 h-4"})}),(0,r.jsx)(eR.A,{className:"w-4 h-4 text-blue-600"}),(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["/ ",e.moduleName]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",onClick:()=>(function(e){let t=`table_${e.id}`;q(a=>{let s={...a};return s.dataSources=s.dataSources||{},s.dataSources[t]={type:"table",tableId:e.id,tableName:e.name,moduleName:e.moduleName,label:`${e.moduleName}/${e.name}`},s}),ee(!1)})(e),children:"zh"===u?"整表":"Whole Table"}),(0,r.jsx)(l.$,{variant:"secondary",size:"sm",onClick:async()=>{eo(e.id),await au(e.id)},children:"zh"===u?"选择记录":"Pick Record"})]})]}),t&&(0,r.jsxs)("div",{className:"mt-2 ml-7",children:[s&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground p-2",children:"zh"===u?"加载记录...":"Loading records..."}),!s&&(a&&a.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:a.map(t=>(0,r.jsxs)("div",{className:"border rounded-md px-2 py-1.5 flex items-center gap-2",children:[(0,r.jsx)(eU.A,{className:"w-3.5 h-3.5 text-gray-500"}),(0,r.jsx)("div",{className:"text-sm truncate",title:t.label,children:t.label}),(0,r.jsx)("div",{className:"ml-auto",children:(0,r.jsx)(l.$,{size:"sm",onClick:()=>(function(e,t){let a=`record_${e.id}_${t.id}`;q(s=>{let r={...s};return r.dataSources=r.dataSources||{},r.dataSources[a]={type:"record",tableId:e.id,tableName:e.name,moduleName:e.moduleName,recordId:t.id,label:`${e.moduleName}/${e.name}#${t.label}`},r}),ee(!1)})(e,t),children:"zh"===u?"选择":"Select"})})]},t.id))}):(0,r.jsx)("div",{className:"text-xs text-muted-foreground p-2",children:"zh"===u?"暂无记录":"No records"}))]})]},e.id)})]})})})]}),(0,r.jsx)(eW.Es,{children:(0,r.jsx)(l.$,{variant:"outline",onClick:()=>ee(!1),children:"zh"===u?"关闭":"Close"})})]})}),(0,r.jsx)(e0,{open:tm,onOpenChange:tx,lang:u,pages:Object.keys(V.pages||{home:{}}),value:(()=>{if(null==tg)return;let e=tu[tg];return e?.event})(),onSave:e=>{null!=tg&&th(t=>t.map((t,a)=>a===tg?{...t,event:e}:t))}}),(0,r.jsx)(eW.lG,{open:tr,onOpenChange:tn,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[760px] w-[95vw] max-h-[85vh] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?"内容导航配置":"Content Navigation"})}),(0,r.jsx)(eq.F,{className:"max-h-[62vh] pr-2",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"展示样式":"Display Type"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"iconText"===to?"default":"outline",onClick:()=>tc("iconText"),children:"zh"===u?"图+文":"Icon+Text"}),(0,r.jsx)(l.$,{size:"sm",variant:"text"===to?"default":"outline",onClick:()=>tc("text"),children:"zh"===u?"文字":"Text"})]})]}),"iconText"===to&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"排版":"Layout"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{size:"sm",variant:"grid-4"===td?"default":"outline",onClick:()=>tp("grid-4"),children:"zh"===u?"每行4个":"4 per row"}),(0,r.jsx)(l.$,{size:"sm",variant:"grid-5"===td?"default":"outline",onClick:()=>tp("grid-5"),children:"zh"===u?"每行5个":"5 per row"}),(0,r.jsx)(l.$,{size:"sm",variant:"scroll"===td?"default":"outline",onClick:()=>tp("scroll"),children:"zh"===u?"横向滑动":"Horizontal scroll"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"导航项":"Items"}),(0,r.jsxs)("div",{className:"space-y-2",children:[tu.map((e,t)=>(0,r.jsxs)("div",{className:"iconText"===to?"grid grid-cols-[20px_56px_1fr_auto] items-center gap-2 border rounded-md px-2 py-2":"grid grid-cols-[20px_1fr_auto] items-center gap-2 border rounded-md px-2 py-2",draggable:!0,onDragStart:e=>{e.dataTransfer.setData("text/plain",String(t))},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault();let a=Number(e.dataTransfer.getData("text/plain"));Number.isNaN(a)||a===t||th(e=>{let s=[...e],[r]=s.splice(a,1);return s.splice(t,0,r),s})},children:[(0,r.jsx)("div",{className:"cursor-grab active:cursor-grabbing text-muted-foreground flex items-center justify-center opacity-70",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})}),"iconText"===to&&(0,r.jsx)("div",{className:"flex items-center gap-2",children:e.image?(0,r.jsx)("img",{src:e.image,alt:"icon",className:"w-12 h-12 rounded border object-cover"}):(0,r.jsx)("div",{className:"w-12 h-12 rounded border bg-gray-50 text-[10px] flex items-center justify-center text-gray-400",children:"img"})}),(0,r.jsx)(eC.p,{placeholder:"zh"===u?"标题(中文/英文皆可)":"Title",value:e.title||"",onChange:e=>th(a=>a.map((a,s)=>s===t?{...a,title:e.target.value}:a))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:["iconText"===to&&(0,r.jsx)(l.$,{size:"sm",variant:"outline",onClick:()=>(function(e){try{let t=document.createElement("input");t.type="file",t.accept="image/*",t.onchange=async t=>{try{let a=t.target.files?.[0];if(!a)return;let s=await am(a,256,256,.9);th(t=>t.map((t,a)=>a===e?{...t,image:s}:t))}catch{}},t.click()}catch{}})(t),children:"zh"===u?"上传图片":"Upload"}),(0,r.jsx)(l.$,{size:"sm",variant:"secondary",onClick:()=>{tf(t),tx(!0)},children:"zh"===u?"事件":"Event"}),(0,r.jsx)(l.$,{size:"icon",variant:"ghost",onClick:()=>th(e=>e.filter((e,a)=>a!==t)),children:(0,r.jsx)(eP.A,{className:"w-4 h-4"})})]})]},t)),(0,r.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>th(e=>[...e,{title:""}]),children:[(0,r.jsx)(eL.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"新增导航":"Add Item"]})]})]})]})}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>tn(!1),children:"zh"===u?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:function(){q(e=>{let t={...e};t.pages=t.pages||{};let a=t.pages[H]||{},s={category:ti,style:"text"===to?"text":"icon",layout:"iconText"===to?td:void 0,items:tu};if(a?.topBar?.enabled){let e=a.tabContent||{},t=e[tv]||{};e[tv]={...t,contentNav:s},a.tabContent=e}else a.contentNav=s;return t.pages[H]=a,t}),tn(!1)},children:"zh"===u?"保存":"Save"})]})]})}),(0,r.jsx)(ez,{withHandle:!0}),(0,r.jsx)(ew,{defaultSize:50,minSize:35,className:"bg-gray-50",children:(0,r.jsxs)("div",{className:"h-full p-3 flex flex-col gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(c.tU,{value:g,onValueChange:t=>(function(t){if("preview"===t){if("auth-login"===M){let e=V.app?.defaultLanguage||("zh"===u?"zh":"en");y(`http://47.94.52.142::3005/${e}/auth/login`),f("preview")}else if("home"===M){let t=V.app?.defaultLanguage||("zh"===u?"zh":"en");try{if(j){let a=encodeURIComponent(JSON.stringify(V?.dataSources||{})),r=`http://47.94.52.142::3005/${t}/preview?previewId=${j}&device=${s}&appId=${e.appId}&data=${a}`;y(r)}else aI()}catch{aI()}f("preview")}else aI()}else f("code")})(t),children:(0,r.jsxs)(c.j7,{children:[(0,r.jsx)(c.Xi,{value:"preview",children:"zh"===u?"预览":"Preview"}),(0,r.jsx)(c.Xi,{value:"code",children:"zh"===u?"代码":"Code"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.$,{variant:"default",onClick:aO,disabled:C,children:C?"zh"===u?"保存中...":"Saving...":"zh"===u?"保存":"Save"}),(0,r.jsx)(l.$,{onClick:aI,children:"zh"===u?v?"刷新预览":"生成预览":v?"Refresh":"Generate"}),(0,r.jsxs)(l.$,{variant:"outline",onClick:aA,children:[(0,r.jsx)(eH.A,{className:"w-4 h-4 mr-1"}),"zh"===u?"新标签打开":"Open in New Tab"]}),(0,r.jsx)(l.$,{variant:"outline",onClick:()=>h("zh"===u?"en":"zh"),children:"zh"===u?"中/EN":"EN/中"}),(0,r.jsx)("a",{href:`http://47.94.52.142::3007/docs/apps/${e.appId}/swagger`,target:"_blank",rel:"noreferrer",children:(0,r.jsx)(l.$,{variant:"secondary",children:"API"})})]})]}),"code"===g?(0,r.jsx)("div",{className:"flex-1 min-h-[520px]",children:(0,r.jsxs)(eN,{direction:"horizontal",className:"h-full",children:[(0,r.jsxs)(ew,{defaultSize:20,minSize:14,className:"bg-white border rounded-xl overflow-auto",children:[(0,r.jsx)("div",{className:"p-2 text-xs text-muted-foreground",children:"zh"===u?"文件":"Files"}),(0,r.jsxs)("div",{className:"px-2 pb-2 space-y-1",children:[(0,r.jsx)(l.$,{variant:"manifest"===W?"default":"ghost",className:"w-full justify-start text-xs",onClick:()=>X("manifest"),children:"manifest.json"}),(0,r.jsx)(l.$,{variant:"app"===W?"default":"ghost",className:"w-full justify-start text-xs",onClick:()=>X("app"),children:"app.json"}),(0,r.jsx)("div",{className:"pt-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:"zh"===u?"页面":"Pages"}),(0,r.jsx)("div",{className:"space-y-1",children:Object.keys(V.pages||{}).map(e=>(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)(l.$,{variant:"page"!==W||Z!==e||tE?"ghost":"default",className:"w-full justify-start text-xs",onClick:()=>{Y(e),tL(""),tD(null),tM("json"),X("page")},children:["pages/",e,".json"]}),(()=>{let t=`pages/${e}/cards/`,a=Object.keys(tO).filter(e=>e.startsWith(t));return 0===a.length?null:(0,r.jsx)("div",{className:"ml-2 pl-2 border-l space-y-1",children:a.sort().map(a=>{let s=a.slice(t.length).split("/");if(s.length<2)return null;let n=s[0],i=s.slice(1).join("/");if(i.endsWith(".tsx"))return null;let o=tE===a;return(0,r.jsxs)(l.$,{variant:o?"default":"ghost",className:"w-full justify-start text-xs",onClick:()=>{try{let t=a.endsWith(".tsx")?"typescript":"json";Y(e),tL(a);let s=i.replace(/\.tsx$|\.json$/,""),r=s.includes(".")?s.split(".")[0]:s;tD({pageKey:e,sectionKey:n,cardType:r}),tM(t),x(tO[a]||""),f("code"),X("page")}catch{}},children:["cards/",n,"/",i]},a)})})})()]},e))}),(0,r.jsx)("div",{className:"pt-1 text-[10px] uppercase tracking-wide text-muted-foreground",children:"data"}),(0,r.jsx)(l.$,{variant:"dataSources"===W?"default":"ghost",className:"w-full justify-start text-xs",onClick:()=>X("dataSources"),children:"data-sources.json"})]})]}),(0,r.jsx)(ez,{withHandle:!0}),(0,r.jsx)(ew,{defaultSize:80,minSize:40,children:(0,r.jsx)(tt,{height:"100%",defaultLanguage:t_,language:t_,theme:"vs",value:m,onChange:e=>{let t=e||"";x(t),tE&&(tJ.current&&clearTimeout(tJ.current),tJ.current=setTimeout(()=>{try{if(tP(e=>({...e,[tE]:t})),tR){let e=tR.pageKey.replace(/^p-/,"");if(tE.endsWith(".json")){if(tB.current){tB.current=!1;return}let a=JSON.parse(t||"{}");window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:e,sectionKey:tR.sectionKey,cardType:tR.cardType,props:a},"*")}else tE.endsWith(".tsx")&&window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:e,sectionKey:tR.sectionKey,cardType:tR.cardType,jsx:t},"*")}}catch{}},300))},options:{wordWrap:"on",minimap:{enabled:!1},formatOnPaste:!0,formatOnType:!0,tabSize:2},onMount:function(e,t){z.current=e;try{t.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,allowComments:!0,schemas:[{uri:"aino://manifest.schema.json",fileMatch:["*"],schema:eK},{uri:"aino://card.schema.json",fileMatch:["**/pages/*/cards/**/*.json"],schema:ta}]})}catch{}w(!0)}})})]})}):(0,r.jsx)("div",{className:"flex-1 border rounded-xl bg-white overflow-hidden",children:v?(0,r.jsx)("iframe",{id:"my-app-iframe",src:`${v}&isEdite=true`,className:"w-full h-full"}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center text-xs text-muted-foreground",children:"zh"===u?"点击上方预览按钮生成预览":"Switch to Preview to generate"})})]})})]})})}),(0,r.jsx)(eQ.O,{open:S,onOpenChange:k,appId:String(e.appId),lang:u}),(0,r.jsx)(eW.lG,{open:ax,onOpenChange:ag,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[520px] w-[92vw] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?"上传背景图":"Upload Background"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"建议尺寸：1080\xd71920（9:16）":"Suggested: 1080\xd71920 (9:16)"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{let t=e.target.files?.[0];if(!t)return;let a=await am(t,1080,1920,.82);K(e=>({...e,backgroundImage:a,showBackground:!0})),ag(!1)}}),F.backgroundImage&&(0,r.jsx)("img",{src:F.backgroundImage,alt:"bg",className:"mt-2 rounded-md border max-h-64 object-cover"})]}),(0,r.jsx)(eW.Es,{children:(0,r.jsx)(l.$,{variant:"outline",onClick:()=>ag(!1),children:"zh"===u?"关闭":"Close"})})]})}),(0,r.jsx)(eW.lG,{open:t2,onOpenChange:t4,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[560px] w-[96vw] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?"标签管理":"Manage Tabs"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-end gap-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"新增标签名称":"New Tab Title"}),(0,r.jsx)(eC.p,{value:t0,onChange:e=>t1(e.target.value),placeholder:"zh"===u?"例如：推荐":"e.g. Featured"})]}),(0,r.jsx)(l.$,{onClick:()=>{try{let e=(t0||"").trim();if(!e)return;let t=`tab-${Date.now()}-${Math.random().toString(36).slice(2,7)}`;q(a=>{let s={...a};s.pages=s.pages||{};let r=s.pages[H]||{},n=Array.isArray(r.topBar?.tabs)?r.topBar.tabs:[],i=t3([...Array.isArray(n)?n:[],{id:t,title:e}]);return r.topBar={...r.topBar||{enabled:!0},tabs:i},s.pages[H]=r,s}),t1("")}catch{}},children:"zh"===u?"新增":"Add"})]}),0===(V.pages?.[H]?.topBar?.tabs||[]).length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"暂无标签，请先新增":"No tabs yet. Add one first."}),t3(V.pages?.[H]?.topBar?.tabs||[]).map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[24px_1fr_auto] items-center gap-2 border rounded-md px-2 py-2",children:[(0,r.jsx)("div",{className:"text-xs",children:t+1}),(0,r.jsx)(eC.p,{className:"h-8",value:e.title||"",onChange:e=>q(a=>{let s={...a};s.pages=s.pages||{};let r=s.pages[H]||{},n=t3(Array.isArray(r.topBar?.tabs)?r.topBar.tabs:[]);return n[t]={...n[t]||{},title:e.target.value,id:n[t]?.id||`tab-${Date.now()}-${Math.random().toString(36).slice(2,7)}`},r.topBar={...r.topBar||{enabled:!0},tabs:n},s.pages[H]=r,s})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(l.$,{size:"icon",variant:"ghost",onClick:()=>q(e=>{let a={...e};a.pages=a.pages||{};let s=a.pages[H]||{},r=t3(Array.isArray(s.topBar?.tabs)?s.topBar.tabs:[]);if(t>0){let e=r[t-1];r[t-1]=r[t],r[t]=e}return s.topBar={...s.topBar||{enabled:!0},tabs:r},a.pages[H]=s,a}),children:"↑"}),(0,r.jsx)(l.$,{size:"icon",variant:"ghost",onClick:()=>q(e=>{let a={...e};a.pages=a.pages||{};let s=a.pages[H]||{},r=t3(Array.isArray(s.topBar?.tabs)?s.topBar.tabs:[]);if(t<r.length-1){let e=r[t+1];r[t+1]=r[t],r[t]=e}return s.topBar={...s.topBar||{enabled:!0},tabs:r},a.pages[H]=s,a}),children:"↓"}),(0,r.jsx)(l.$,{size:"icon",variant:"ghost",onClick:()=>q(e=>{let a={...e};a.pages=a.pages||{};let s=a.pages[H]||{},r=t3(Array.isArray(s.topBar?.tabs)?s.topBar.tabs:[]);return r.splice(t,1),s.topBar={...s.topBar||{enabled:!0},tabs:r},a.pages[H]=s,a}),children:"✕"})]})]},`mgr-${e.id||t}`))]}),(0,r.jsx)(eW.Es,{children:(0,r.jsx)(l.$,{onClick:()=>t4(!1),children:"zh"===u?"完成":"Done"})})]})}),(0,r.jsx)(eW.lG,{open:t5,onOpenChange:t7,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[880px] w-[96vw] max-h-[85vh] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?`筛选设置：${t6}`:`Filters: ${t6}`})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"数据源（表）":"Data Source (Table)"}),(0,r.jsx)("div",{className:"w-80",children:(0,r.jsxs)(eY.l6,{value:at,onValueChange:e=>{aa(e),ap(e)},children:[(0,r.jsx)(eY.bq,{children:(0,r.jsx)(eY.yv,{placeholder:"zh"===u?"选择数据源":"Choose data source"})}),(0,r.jsx)(eY.gC,{children:ad.map(e=>(0,r.jsx)(eY.eb,{value:e.key,children:e.label||e.key},e.key))})]})}),0===ad.length&&(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground",children:"zh"===u?"请先在左侧添加数据源（整表）。":"Add a table data source first on the left."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"可作为筛选的字段（来自所选数据源）":"Fields from selected data source"}),(0,r.jsx)(eq.F,{className:"max-h-[40vh] border rounded-md",children:(0,r.jsxs)("div",{className:"p-3 space-y-2",children:[as&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"加载中...":"Loading..."}),!as&&0===an.length&&(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"当前数据源无可用字段或数据源未选择。":"No fields for current data source or none selected."}),an.map(e=>{let t=!!al[e.key]?.__checked;return(0,r.jsxs)("div",{className:"grid grid-cols-[20px_1fr] items-center gap-2 border rounded-md px-2 py-2",children:[(0,r.jsx)(eZ.S,{checked:t,onCheckedChange:t=>ao(a=>({...a,[e.key]:{...a[e.key]||{fieldId:e.key,type:e.type,label:e.label},__checked:!!t}}))}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:e.label}),(0,r.jsx)("span",{className:"text-[10px] text-muted-foreground",children:e.type})]})]},e.key)})]})}),(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground",children:"zh"===u?"多选字段，仅用于决定出现哪些筛选标签，不在此输入默认值。":"Multi-select fields to show as filter tags; no defaults here."})]})]}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>t7(!1),children:"zh"===u?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:async()=>{try{let t;let a=V.pages?.[H]?.topBar,s=a?.enabled?`tab-${tv}`:`icon-${tv}`,r=an.filter(e=>al[e.key]?.__checked).map(e=>({fieldId:e.key,type:e.type,label:e.label,options:"select"===e.type?Array.isArray(e.options)?e.options:[]:void 0,optionsTree:"cascader"===e.type?Array.isArray(e.optionsTree)?e.optionsTree:[]:void 0})),n={enabled:!0,dataSourceKey:at||void 0,fields:r},i=t8||"";window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:H.replace(/^p-/,""),sectionKey:s,cardType:i,filters:n},"*");let l=`pages/${H}/cards/${s}/${i}.json`,o=tO[l];if(o)try{let e={...JSON.parse(o||"{}"),filters:n},t=JSON.stringify(e,null,2);tP(e=>({...e,[l]:t})),tE===l&&(tB.current=!0,x(t))}catch{}q(e=>{let a={...e||{}};a.pages=a.pages||{};let r={...a.pages[H]||{}},l={...r.overrides||{}},o={...l[s]||{}},c={...o[i]||{}};return c.filters=n,o[i]=c,l[s]=o,r.overrides=l,a.pages[H]=r,t=a,a});try{let a=String(e.appId),s={};try{let e=await eV.api.applications.getApplication(a);s=(e.success&&e.data?e.data.config:{})||{}}catch{s={}}let r={...s,clientManifest:t};await eV.api.applications.updateApplication(a,{config:r})}catch{}}catch{}t7(!1)},children:"zh"===u?"保存":"Save"})]})]})}),(0,r.jsx)(eW.lG,{open:tU,onOpenChange:tH,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[720px] w-[96vw] bg-white/70 backdrop-blur-md rounded-2xl shadow-xl",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{className:"text-base font-semibold",children:"zh"===u?`显示设置：${tG}`:`Display: ${tG}`})}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{className:"rounded-xl border p-4 bg-white/60",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-3",children:"zh"===u?"显示数量":"Limit"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(eC.p,{type:"number",min:1,value:tq,onChange:e=>tW(e.target.value),className:"w-28"}),(0,r.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,r.jsx)(eX.d,{checked:tX,onCheckedChange:e=>tZ(!!e)}),(0,r.jsx)("span",{children:"zh"===u?"无限显示":"Unlimited"})]})]}),(0,r.jsx)("div",{className:"text-[11px] text-muted-foreground mt-2",children:"zh"===u?"数量越大渲染越多，可能影响性能":"Larger limits may affect performance"})]}),(0,r.jsxs)("div",{className:"rounded-xl border p-4 bg-white/60",children:[(0,r.jsx)("div",{className:"text-sm font-medium mb-3",children:"zh"===u?"展示来源":"Source"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,r.jsx)(l.$,{size:"sm",variant:"pick"===tY?"default":"outline",onClick:()=>tQ("pick"),children:"zh"===u?"指定内容":"Pick"}),(0,r.jsx)(l.$,{size:"sm",variant:"filter"===tY?"default":"outline",onClick:()=>tQ("filter"),children:"zh"===u?"按过滤":"Filter"}),(0,r.jsx)(l.$,{size:"sm",variant:"time"===tY?"default":"outline",onClick:()=>tQ("time"),children:"zh"===u?"按时间":"Time"}),(0,r.jsx)(l.$,{size:"sm",variant:"hot"===tY?"default":"outline",onClick:()=>tQ("hot"),children:"zh"===u?"按热度":"Hot"})]}),"pick"===tY&&(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"zh"===u?"选择具体内容（占位，后续接数据选择器）":"Pick specific items (placeholder)"}),"filter"===tY&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,r.jsx)(eC.p,{placeholder:"zh"===u?"关键字":"Keyword"}),(0,r.jsx)(eC.p,{placeholder:"zh"===u?"类别（占位）":"Category (placeholder)"}),(0,r.jsx)(eC.p,{placeholder:"zh"===u?"标签（占位）":"Tags (placeholder)"})]}),"time"===tY&&(0,r.jsx)("div",{className:"flex items-center gap-3 text-sm",children:(0,r.jsx)("div",{className:"text-muted-foreground",children:"zh"===u?"按时间降序":"Newest first"})}),"hot"===tY&&(0,r.jsx)("div",{className:"flex items-center gap-3 text-sm",children:(0,r.jsx)("div",{className:"text-muted-foreground",children:"zh"===u?"按热度降序":"Hotness desc"})})]})]}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>tH(!1),children:"zh"===u?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:async()=>{try{let t;let a=V.pages?.[H]?.topBar,s=a?.enabled?`tab-${tv}`:`icon-${tv}`,r=tX?void 0:Math.max(1,parseInt(tq||"1",10)),n={mode:tY,limit:r,unlimited:!!tX},i=tK||"";window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:H.replace(/^p-/,""),sectionKey:s,cardType:i,display:n},"*");let l=`pages/${H}/cards/${s}/${i}.json`,o=tO[l];if(o)try{let e={...JSON.parse(o||"{}"),display:n},t=JSON.stringify(e,null,2);tP(e=>({...e,[l]:t})),tE===l&&(tB.current=!0,x(t))}catch{}q(e=>{let a={...e||{}};a.pages=a.pages||{};let r={...a.pages[H]||{}},l={...r.overrides||{}},o={...l[s]||{}},c={...o[i]||{}};return c.display=n,o[i]=c,l[s]=o,r.overrides=l,a.pages[H]=r,t=a,a});try{let a=String(e.appId),s={};try{let e=await eV.api.applications.getApplication(a);s=(e.success&&e.data?e.data.config:{})||{}}catch{s={}}let r={...s,clientManifest:t};await eV.api.applications.updateApplication(a,{config:r})}catch{}}catch{}tH(!1)},children:"zh"===u?"保存":"Save"})]})]})}),(0,r.jsx)(eW.lG,{open:tz,onOpenChange:tS,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[820px] w-[96vw] max-h-[85vh] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?`配置：${t$}`:`Config: ${t$}`})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"JSON 属性（保存后立即应用到右侧预览）":"JSON props (applies to preview on save)"}),(0,r.jsx)(eS.T,{value:tA,onChange:e=>tT(e.target.value),rows:16,className:"font-mono text-xs"})]}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>tS(!1),children:"zh"===u?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:()=>{try{let e=V.pages?.[H]?.topBar,t=e?.enabled?`tab-${tv}`:`icon-${tv}`,a=JSON.parse(tA||"{}");window.frames[0]?.postMessage({type:"SET_OVERRIDE",pageId:H.replace(/^p-/,""),sectionKey:t,cardType:tk,props:a},"*"),tS(!1)}catch(e){a({description:e?.message||("zh"===u?"JSON 无法解析":"Invalid JSON"),variant:"destructive"})}},children:"zh"===u?"保存":"Save"})]})]})}),(0,r.jsx)(eW.lG,{open:af,onOpenChange:av,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[520px] w-[92vw] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"Logo"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"建议：正方形 PNG，至少 256\xd7256":"Square PNG, ≥256\xd7256"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{let t=e.target.files?.[0];if(!t)return;let a=await am(t,512,512,.9);K(e=>({...e,logoImage:a,showLogo:!0})),av(!1)}}),F.logoImage&&(0,r.jsx)("img",{src:F.logoImage,alt:"logo",className:"mt-2 rounded-md border size-24 object-cover"})]}),(0,r.jsx)(eW.Es,{children:(0,r.jsx)(l.$,{variant:"outline",onClick:()=>av(!1),children:"zh"===u?"关闭":"Close"})})]})}),(0,r.jsx)(eW.lG,{open:ay,onOpenChange:aj,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[560px] w-[95vw] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?"编辑介绍":"Edit Intro"})}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"标题（中文）":"Title (ZH)"}),(0,r.jsx)(eC.p,{value:ab,onChange:e=>aN(e.target.value),maxLength:30,placeholder:"zh"===u?"中文标题":"ZH Title"}),(0,r.jsx)(ek.J,{className:"mt-2 block",children:"zh"===u?"标题（英文）":"Title (EN)"}),(0,r.jsx)(eC.p,{value:aS,onChange:e=>ak(e.target.value),maxLength:60,placeholder:"zh"===u?"英文标题":"EN Title"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"介绍（中文，最多3行）":"Intro ZH (max 3 lines)"}),(0,r.jsx)(eS.T,{value:aw,onChange:e=>az(e.target.value),rows:3,maxLength:180,placeholder:"zh"===u?"中文介绍":"ZH Intro"}),(0,r.jsx)(ek.J,{className:"mt-2 block",children:"zh"===u?"介绍（英文，最多3行）":"Intro EN (max 3 lines)"}),(0,r.jsx)(eS.T,{value:aC,onChange:e=>a$(e.target.value),rows:3,maxLength:300,placeholder:"zh"===u?"英文介绍":"EN Intro"}),(0,r.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"zh"===u?"建议每行约60字以内":"~60 chars per line suggested"})]})]}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>aj(!1),children:"zh"===u?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:()=>{K(e=>({...e,introTitle:{zh:ab.trim(),en:aS.trim()},introText:{zh:aw.trim(),en:aC.trim()},showIntro:!0})),aj(!1)},children:"zh"===u?"确定":"OK"})]})]})}),(0,r.jsx)(eW.lG,{open:e5,onOpenChange:e7,children:(0,r.jsxs)(eW.Cf,{className:"max-w-[520px] w-[92vw] bg-white",children:[(0,r.jsx)(eW.c7,{children:(0,r.jsx)(eW.L3,{children:"zh"===u?"设置路由":"Set Route"})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(ek.J,{children:"zh"===u?"路由":"Route"}),(0,r.jsx)(eC.p,{value:e8,onChange:e=>te(e.target.value),placeholder:"/p-kxxxxxxxx or /home"}),(0,r.jsx)("div",{className:"text-xs text-muted-foreground",children:"zh"===u?"建议页面使用 /p- 开头的短链接；必须以 / 开头。":"Recommend using short links starting with /p-; must start with /."})]}),(0,r.jsxs)(eW.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>e7(!1),children:"zh"===u?"取消":"Cancel"}),(0,r.jsx)(l.$,{onClick:function(){let e=(e8||"").trim();if(!/^\/[A-Za-z0-9_\-/]*$/.test(e)||e.length<2){a({description:"zh"===u?"路由格式不正确，应以 / 开头，可包含字母数字-_/":"Invalid route. Must start with / and contain letters, numbers, - or _.",variant:"destructive"});return}q(t=>{let a={...t},s=[...a.app.bottomNav];if(null!=e6&&s[e6]){s[e6]={...s[e6],route:e},a.app.bottomNav=s;let t=(e||"").replace(/^\//,"");a.pages=a.pages||{},a.pages[t]||(a.pages[t]={title:{zh:"新页面",en:"New Page"},layout:"mobile",route:e,cards:[]})}return a}),e7(!1)},children:"zh"===u?"保存":"Save"})]})]})})]})}},46006:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return l}});let s=a(33752),r=a(86188),n=a(29294),i=a(52728);function l(e){let{moduleIds:t}=e,a=n.workAsyncStorage.getStore();if(void 0===a)return null;let l=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files;l.push(...t)}}return 0===l.length?null:(0,s.jsx)(s.Fragment,{children:l.map(e=>{let t=a.assetPrefix+"/_next/"+(0,i.encodeURIPath)(e);return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,r.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},52728:(e,t)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return a}})},58381:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.default,__next_app__:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>o});var s=a(50842),r=a(13725),n=a(82416),i=a(70122),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let o={children:["",{children:["app",{children:["[appId]",{children:["client-config",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3017)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/client-config/page.tsx"]}]},{}]},{error:[()=>Promise.resolve().then(a.bind(a,87033)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/error.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,72330)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,9556)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/error.tsx"],"global-error":[()=>Promise.resolve().then(a.bind(a,82416)),"/Users/wemo/new-flow/ai/AINO/AINO-studio/app/global-error.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,31435,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,11622,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5887,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/wemo/new-flow/ai/AINO/AINO-studio/app/app/[appId]/client-config/page.tsx"],d={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/app/[appId]/client-config/page",pathname:"/app/[appId]/client-config",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79545:(e,t,a)=>{"use strict";a.d(t,{S:()=>l});var s=a(33752);a(82153);var r=a(55108),n=a(55529),i=a(1237);function l({className:e,...t}){return(0,s.jsx)(r.bL,{"data-slot":"checkbox",className:(0,i.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,s.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,s.jsx)(n.A,{className:"size-3.5"})})})}},83073:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(74112).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},86312:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return c}});let s=a(33752),r=a(82153),n=a(34715),i=a(46006);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},a=(0,r.lazy)(()=>t.loader().then(l)),c=t.loading;function d(e){let l=c?(0,s.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?r.Suspense:r.Fragment,p=t.ssr?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.PreloadChunks,{moduleIds:t.modules}),(0,s.jsx)(a,{...e})]}):(0,s.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(a,{...e})});return(0,s.jsx)(d,{...o?{fallback:l}:{},children:p})}return d.displayName="LoadableComponent",d}},94732:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(33752);a(82153);var r=a(1237);function n({className:e,...t}){return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[662,593,195,217,669,516,186,167,58],()=>a(58381));module.exports=s})();