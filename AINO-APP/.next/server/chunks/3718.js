"use strict";exports.id=3718,exports.ids=[3718],exports.modules={13718:(a,b,c)=>{c.d(b,{M3:()=>Y,Zd:()=>W});var d=c(80742),e=c(30311),f=c.n(e),g=c(428),h=c(66497),i=c(62752),j=c(39870),k=c(89462),l=c(87840),m=c(51926),n=c(88810),o=c(79538),p=c(75717),q=c(91219),r=c(65496),s=c(26063),t=c(62957),u=c(2094),v=c(35286),w=c(7605),x=c(54255),y=c(7829),z=c(42764),A=c(3208);let B=(0,A.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var C=c(8710);let D=(0,A.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var E=c(69274);let F=(0,A.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var G=c(11341),H=c(66193);let I=(0,A.A)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);var J=c(79162),K=c(74497),L=c(85338),M=c(80512),N=c(19805),O=c(61980),P=c(19145);let Q=({code:a,props:b,data:c,theme:f,ui:g,className:h})=>{let i=(0,e.useRef)(null),j=(0,e.useMemo)(()=>`<!doctype html><html><head><meta charset="utf-8"><style>html,body,#root{height:100%;margin:0}</style>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head><body><div id="root"></div>
  <script>
  const render = (payload) => {
    try {
      const { code, props, data, theme, ui } = payload
      const transformed = Babel.transform(code, { presets: ['react'] }).code
      const exports = {}
      const module = { exports }
      const req = () => ({})
      const fn = new Function('exports','module','require','React','props','data','theme','ui', transformed + '; return module.exports || exports.default || exports')
      const Comp = fn(exports, module, req, window.React, props, data, theme, ui)
      const el = React.createElement(Comp.default || Comp, { props, data, theme, ui })
      ReactDOM.createRoot(document.getElementById('root')).render(el)
    } catch (e) {
      document.getElementById('root').innerText = 'Sandbox error: ' + (e && e.message ? e.message : e)
    }
  }
  window.addEventListener('message', (e)=>{ if (e.data && e.data.type==='RUN'){ render(e.data) } })
  </script>
  </body></html>`,[]);return(0,e.useEffect)(()=>{let d=i.current?.contentWindow;d&&d.postMessage({type:"RUN",code:a,props:b,data:c,theme:f,ui:g},"*")},[a,b,c,f,g]),(0,d.jsx)("iframe",{ref:i,className:h,sandbox:"allow-scripts",srcDoc:j})};var R=c(72923),S=c(82062),T=c(94721),U=c(98523),V=c(84336);let W={workspace:{id:"workspace",name:"工作台",description:"可拖拽的工作台卡片系统",type:"workspace",config:{showHeader:!0,showBottomNav:!1,allowEdit:!0,layout:"mobile"}},content:{id:"content",name:"内容管理",description:"内容管理平台界面",type:"content",config:{showHeader:!0,showBottomNav:!0,allowEdit:!1,layout:"mobile"}},education:{id:"education",name:"在线教育",description:"在线教育移动应用",type:"education",config:{showHeader:!0,showBottomNav:!1,allowEdit:!0,layout:"mobile"}},"pc-workspace":{id:"pc-workspace",name:"PC工作台",description:"PC版可拖拽的工作台卡片系统",type:"workspace",config:{showHeader:!1,showBottomNav:!1,allowEdit:!0,layout:"pc"}}},X=[{id:"user-info",name:"用户信息",category:"基础",component:(0,d.jsx)(k.AppCard,{className:"p-6 hover:shadow-lg transition-all duration-300",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,d.jsx)(o.A,{className:"w-5 h-5 text-accent"}),(0,d.jsx)("h4",{className:"text-lg font-bold",children:"用户信息"})]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"查看和编辑用户基本信息"}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("img",{src:"/generic-user-avatar.png",alt:"用户头像",className:"w-12 h-12 rounded-full object-cover border-2 border-accent/20"}),(0,d.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full border-2 border-background"})]}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"font-medium",children:"张三"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",children:"zhang.san@example.com"}),(0,d.jsx)(i.E,{variant:"secondary",className:"mt-1 text-xs",children:"活跃用户"})]})]}),(0,d.jsxs)(h.$,{variant:"outline",className:"w-full hover:bg-accent hover:text-accent-foreground transition-colors mt-4 bg-transparent",children:[(0,d.jsx)(p.A,{className:"w-4 h-4 mr-2"}),"编辑资料"]})]})})},{id:"sales-data",name:"销售数据",category:"基础",component:(0,d.jsx)(k.AppCard,{className:"p-6 hover:shadow-lg transition-all duration-300",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,d.jsx)(q.A,{className:"w-5 h-5 text-green-600"}),(0,d.jsx)("h4",{className:"text-lg font-bold",children:"今日销售"})]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"实时销售数据统计"}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)("div",{className:"text-3xl font-bold",children:"\xa512,345"}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[(0,d.jsx)(q.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"font-medium",children:"+15.2%"}),(0,d.jsx)("span",{className:"text-muted-foreground",children:"较昨日"})]}),(0,d.jsx)(i.E,{variant:"outline",className:"text-green-600 border-green-600/30",children:"增长中"})]}),(0,d.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:"75%"}})})]})]})})},{id:"quick-actions",name:"快速操作",category:"基础",component:(0,d.jsx)(k.AppCard,{className:"p-6 hover:shadow-lg transition-all duration-300",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,d.jsx)(r.A,{className:"w-5 h-5 text-accent"}),(0,d.jsx)("h4",{className:"text-lg font-bold",children:"快速操作"})]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"常用功能快捷入口"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)(h.$,{variant:"outline",size:"sm",className:"h-12 flex-col space-y-1 hover:bg-accent hover:text-accent-foreground transition-colors bg-transparent",children:[(0,d.jsx)(s.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-xs",children:"订单"})]}),(0,d.jsxs)(h.$,{variant:"outline",size:"sm",className:"h-12 flex-col space-y-1 hover:bg-red-500 hover:text-white transition-colors bg-transparent",children:[(0,d.jsx)(t.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-xs",children:"收藏"})]}),(0,d.jsxs)(h.$,{variant:"outline",size:"sm",className:"h-12 flex-col space-y-1 hover:bg-accent hover:text-accent-foreground transition-colors bg-transparent",children:[(0,d.jsx)(u.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-xs",children:"分享"})]}),(0,d.jsxs)(h.$,{variant:"outline",size:"sm",className:"h-12 flex-col space-y-1 hover:bg-yellow-500 hover:text-white transition-colors bg-transparent",children:[(0,d.jsx)(r.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"text-xs",children:"评价"})]})]})]})})}];function Y({category:a,locale:b,layout:c,showHeader:q,showBottomNav:s,headerTitle:t,showBack:u,aiOpsUrl:A,aiOpsLabel:Y,topTabsConfig:Z,contentNavConfig:$,initialTabIndex:_,pageId:aa}){let[ab,ac]=(0,e.useState)([]);(0,e.useRef)({});let[ad,ae]=(0,e.useState)(!1),af=(0,V.useSearchParams)();(0,V.useRouter)(),(0,V.usePathname)();let ag="true"===af.get("isEdite")||"true"===af.get("isEdit"),[ah,ai]=(0,e.useState)(ag),[aj,ak]=(0,e.useState)("全部"),[al,am]=(0,e.useState)(!1),[an,ao]=(0,e.useState)(null),[ap,aq]=(0,e.useState)([]),[ar,as]=(0,e.useState)(null),[at,au]=(0,e.useState)({}),[av,aw]=(0,e.useState)(_??0),[ax,ay]=(0,e.useState)(0),[az,aA]=(0,e.useState)(0),[aB,aC]=(0,e.useState)({}),aD=(0,e.useMemo)(()=>{try{return null}catch{return null}},[aa,av,az]),aE=(0,e.useMemo)(()=>{try{if(Z&&"text"===Z.type&&Array.isArray(Z.items)&&Z.items.length>0)return Z;let a=aD&&aD.topBar||null,b=!!(a&&a.enabled),c=b&&a.tabs||[];if(b&&Array.isArray(c)&&c.length>0)return{type:"text",items:c.map(a=>({title:a&&(a.title||"").trim()||"标签"}))};let d=aD&&aD.contentNav;if(d){let a=d.style;if("text"===a)return{...d,type:"text"};if("text"===d.type)return d}return null}catch{return null}},[aD]),aF=(0,e.useMemo)(()=>{let a=a=>{if(!a)return null;let b=a.style;return"text"===b||"icon"===b?{...a,type:"text"===b?"text":"iconText"}:"text"===a.type||"iconText"===a.type?a:null};try{if(aE){let b=aD&&aD.tabContent||{},c=b?.[av]||{};return a(c?.contentNav)||null}return a(aD&&aD.contentNav)||null}catch{return null}},[aD,aE,av]),aG=(0,e.useMemo)(()=>{let b=!!(aE&&"text"===aE.type),c=!!(aF&&"iconText"===aF.type);return b&&c?`${a}-tab-${av}-icon-${ax}`:b?`${a}-tab-${av}`:c?`${a}-icon-${ax}`:a},[a,aE,aF,av,ax]),aH=`dynamic_page_layout_${aG}_${b}`,aI=a=>a.map(a=>({id:a.id,type:a.type}));(0,e.useRef)(null);let aJ=(0,e.useMemo)(()=>{try{if(!aa);return ab}catch{return ab}},[ab,aa,aE,aF,av,ax]),aK=(()=>{let a=[];return a.push(...X),j.U.getAll().forEach(b=>{if(b.component){let c=b.component,e=(a=>{switch(a){case"mobile-navigation":return{title:"移动端导航",items:[{id:"home",label:"首页",icon:(0,d.jsx)(v.A,{className:"w-4 h-4"}),href:"/",isActive:!0},{id:"courses",label:"课程",icon:(0,d.jsx)(w.A,{className:"w-4 h-4"}),href:"/courses"},{id:"profile",label:"个人中心",icon:(0,d.jsx)(x.A,{className:"w-4 h-4"}),href:"/profile"},{id:"settings",label:"设置",icon:(0,d.jsx)(p.A,{className:"w-4 h-4"}),href:"/settings"}],showQuickActions:!0};case"pc-toolbar":return{title:"编辑工具栏",showShortcuts:!0,isCollapsed:!1,items:[{id:"save",label:"保存",icon:(0,d.jsx)(y.A,{className:"w-4 h-4"}),shortcut:"Ctrl+S",group:"file"},{id:"edit",label:"编辑",icon:(0,d.jsx)(z.A,{className:"w-4 h-4"}),group:"edit"},{id:"favorite",label:"收藏",icon:(0,d.jsx)(r.A,{className:"w-4 h-4"}),group:"view"}]};case"universal-info":return{title:"平台概况",description:"关键指标总览",showActions:!0,source:"系统统计",items:[{label:"活跃用户",value:12890,type:"number",trend:"up"},{label:"日访问量",value:52340,type:"number",trend:"up"},{label:"转化率",value:3.2,type:"percentage",trend:"stable"},{label:"营收",value:98765,type:"currency",trend:"down"}]};default:return{}}})(b.name);a.push({id:b.name,name:b.displayName||b.name,category:b.category,width:b.width,component:f().createElement(c,{data:e,onAction:(a,b)=>console.log("Card action:",a,b)})})}else a.push({id:b.name,name:b.displayName||b.name,category:b.category,width:"full",component:(0,d.jsx)(k.AppCard,{className:"p-6 hover:shadow-lg transition-all duration-300",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,d.jsx)(B,{className:"w-5 h-5 text-accent"}),(0,d.jsx)("h4",{className:"text-lg font-bold",children:b.displayName||b.name})]}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"string"==typeof b.businessFlow?b.businessFlow:b.businessFlow?.description||""}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-sm font-medium",children:"状态"}),(0,d.jsx)(i.E,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:"开发中"})]}),(0,d.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full transition-all duration-500",style:{width:"30%"}})}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:["类别：",b.category]}),(0,d.jsx)(h.$,{variant:"outline",size:"sm",className:"w-full bg-transparent",disabled:!0,children:"即将推出"})]})]})})})}),a})(),aL="全部"===aj?aK:aK.filter(a=>a.category===aj),aM=["全部",...Array.from(new Set(j.U.getAll().map(a=>a.category)))].map(a=>({label:a,icon:({全部:(0,d.jsx)(C.A,{className:"w-4 h-4 mr-2"}),基础:(0,d.jsx)(B,{className:"w-4 h-4 mr-2"}),教育:(0,d.jsx)(w.A,{className:"w-4 h-4 mr-2"}),媒体:(0,d.jsx)(D,{className:"w-4 h-4 mr-2"}),招聘:(0,d.jsx)(E.A,{className:"w-4 h-4 mr-2"}),电商:(0,d.jsx)(F,{className:"w-4 h-4 mr-2"}),内容:(0,d.jsx)(G.A,{className:"w-4 h-4 mr-2"}),社交:(0,d.jsx)(o.A,{className:"w-4 h-4 mr-2"}),数据:(0,d.jsx)(H.A,{className:"w-4 h-4 mr-2"}),零售:(0,d.jsx)(I,{className:"w-4 h-4 mr-2"}),旅行:(0,d.jsx)(J.A,{className:"w-4 h-4 mr-2"}),功能:(0,d.jsx)(K.A,{className:"w-4 h-4 mr-2"})})[a]||(0,d.jsx)(B,{className:"w-4 h-4 mr-2"})})),aN=(0,e.useMemo)(()=>"pc"===c&&"workspace"===a?W["pc-workspace"]:W[a]||W.workspace,[a,c]),aO=q??aN.config.showHeader;return s??aN.config.showBottomNav,(0,d.jsxs)(N.J,{visible:ah,children:[(0,d.jsxs)("div",{className:(0,n.cn)("min-h-screen relative","bg-transparent"),children:[aO&&"pc"!==c&&(0,d.jsx)(g.AppHeader,{title:t||("education"===aN.type?"教育应用Demo":"/zh/preview"===window.location.pathname?"首页":"自定义动态页面"),showBackButton:u}),aE&&"text"===aE.type&&(0,d.jsx)("div",{className:(0,n.cn)("px-4 mb-2","pc"===c?"hidden":"block",aO?"pt-16":"pt-2"),children:(0,d.jsx)(R.A,{config:aE,activeIndex:av,disableNavigate:!0,onSwitchTab:({index:a})=>{if("number"==typeof a){try{let b=new URLSearchParams(af?.toString?.()||"");0===a?b.delete("tab"):b.set("tab",String(a)),b.toString()}catch{}aw(a),ay(0)}}})}),aO&&"pc"!==c&&A&&(0,d.jsx)("div",{className:"fixed top-3 right-20 z-30",children:(0,d.jsx)("a",{href:A,target:"_blank",rel:"noreferrer",children:(0,d.jsx)(h.$,{size:"sm",variant:"secondary",className:"rounded-full h-8 px-3",children:Y||"AI运营"})})}),"workspace"===aN.type&&(0,d.jsxs)("div",{className:(0,n.cn)("relative z-10","pc"===c?"p-6":aE?"p-4 pt-4":"p-4 pt-20"),children:[aF&&"iconText"===aF.type&&(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(R.A,{config:aF,activeIndex:ax,disableNavigate:!0,onSwitchTab:({index:a})=>{if("number"==typeof a){try{let b=new URLSearchParams(af?.toString?.()||"");0===a?b.delete("nav"):b.set("nav",String(a)),b.toString()}catch{}ay(a)}}})}),(0,d.jsx)("div",{className:"mb-6",children:0===ab.length?(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,d.jsx)(B,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"pc"===c?"PC自定义工作台":"自定义动态页面"}),(0,d.jsx)("p",{className:"text-gray-600 mb-4",children:"点击右下角 ➕ 按钮添加功能卡片，自定义您的页面"})]}):(0,d.jsx)(l.F,{items:aJ.map(a=>{let b,g;return{id:a.id,content:(0,d.jsx)(O.x,{value:a.id,children:(0,d.jsxs)("div",{className:`relative group ${"half"===a.width?"w-full":""}`,children:[ah&&aN.config.allowEdit&&(0,d.jsx)(h.$,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 p-0 z-10",onClick:()=>{var b;return b=a.id,void ac(ab.filter(a=>a.id!==b))},children:(0,d.jsx)(L.A,{className:"w-3 h-3"})}),ah&&aN.config.allowEdit&&(0,d.jsx)(h.$,{variant:"ghost",size:"sm",className:"absolute top-2 right-10 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 p-0 z-10",onClick:()=>(a=>{ao(a),as(null);try{aq([]),as("未找到 APPLICATION_CONFIG"),am(!0);return}catch(a){as("解析 APPLICATION_CONFIG 失败"),aq([]),am(!0)}})(a.id),title:"配置数据",children:(0,d.jsx)(p.A,{className:"w-3 h-3"})}),ah&&aN.config.allowEdit&&at[a.id]&&(0,d.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,d.jsx)(i.E,{variant:"secondary",className:"bg-blue-50 text-blue-600 border-blue-200",children:at[a.id]})}),(b=(()=>{try{let b,c,e,g,h=j.U.getAll().find(b=>b.name===a.type);if(!h||!h.component)return a.component;let i=h.component,k={},l=!!(aE&&"text"===aE.type),m=!!(aF&&"iconText"===aF.type),n=l&&m?`tab-${av}::icon-${ax}`:void 0,o=n||(l?`tab-${av}`:m?`icon-${ax}`:"");if(aa&&o)try{let d=localStorage.getItem(`APP_PAGE_${aa}`),f=d?JSON.parse(d):{},h=b=>b?f?.overrides?.[b]?.[a.type]:void 0,i=h(n)||h(o);c=i?.props,b=i?.jsx,e=i?.display,g=i?.filters}catch{}if(b)return(0,d.jsx)(Q,{code:b,data:k,props:c,theme:{},className:"w-full"});let p=(()=>{try{if(!g?.enabled||!Array.isArray(g?.fields))return[];return g.fields.map(a=>{let b=[];if(Array.isArray(a.options)&&"select"===a.type)a.options.forEach(a=>{"string"==typeof a?b.push({label:String(a),value:String(a)}):a&&"object"==typeof a&&b.push({label:a.label??String(a.value??""),value:String(a.value??a.label??"")})});else if(Array.isArray(a.optionsTree)&&"cascader"===a.type){let c=(a,d,e)=>{a.forEach(a=>{let f=[...d,String(a.name??a.label??a.id??"")],g=[...e,String(a.id??a.value??a.name??"")];Array.isArray(a.children)&&a.children.length>0?c(a.children,f,g):b.push({label:f.join(" / "),value:g.join("/")})})};c(a.optionsTree,[],[])}return 0===b.length&&("select"===a.type?b.push({label:"全部",value:"all"},{label:"选项A",value:"a"},{label:"选项B",value:"b"}):"cascader"===a.type&&b.push({label:"中国 / 北京",value:"cn/bj"},{label:"中国 / 上海",value:"cn/sh"},{label:"美国 / 纽约",value:"us/ny"})),{category:a.label||a.fieldId,options:b,defaultValue:a.default}})}catch{return[]}})(),q=aB[a.id]||(()=>{let a={};return p.forEach(b=>{let c=b.defaultValue||b.options[0]?.value||"";a[b.category]=c}),a})(),r=(()=>{let a={};return g?.enabled&&Array.isArray(g.fields)&&g.fields.forEach(b=>{let c=b.label||b.fieldId,d=q[c];null!=d&&(a[b.fieldId||c]=d)}),a})(),s={...c||{},listLimit:e&&e.limit,activeFilters:r};return(0,d.jsxs)("div",{className:"space-y-2",children:[g?.enabled&&p.length>0&&(0,d.jsx)(S.E,{items:p,values:q,onValueChange:(b,c)=>{aC(d=>({...d,[a.id]:{...d[a.id]||{},[b]:c}}))}}),f().createElement(i,{data:k,props:s,onAction:(a,b)=>console.log("Card action:",a,b)})]})}catch{return a.component}})(),g=a.id,(0,e.isValidElement)(b)?(0,e.cloneElement)(b,{id:g,"data-theme-key":g}):b)]})}),className:(0,n.cn)("pc"===c?"half"===a.width?"col-span-1":"col-span-2 lg:col-span-3":"half"===a.width?"col-span-1":"col-span-2")}}),onReorder:a=>{ac(a.map(a=>ab.find(b=>b.id===a)).filter(Boolean))},layout:"grid",className:"pc"===c?"grid grid-cols-2 lg:grid-cols-3 gap-6":"grid grid-cols-2 gap-4",disabled:!ah},aH)}),ag&&aN.config.allowEdit&&(0,d.jsx)("div",{className:"flex gap-2",children:(0,d.jsx)(h.$,{variant:"outline",className:"flex-1 hover:bg-accent hover:text-accent-foreground",onClick:()=>{ah&&(()=>{try{let a={cards:aI(ab),themes:{},dataSources:{},updatedAt:Date.now()};localStorage.setItem(aH,JSON.stringify(a));try{fetch(`http://47.94.52.142:3007/api/page-configs/key/${encodeURIComponent(aH)}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).catch(()=>{})}catch{}}catch(a){console.error("保存布局到本地存储失败",a)}})(),ai(!ah)},children:ah?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(y.A,{className:"w-4 h-4 mr-2"}),"保存布局"]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(z.A,{className:"w-4 h-4 mr-2"}),"编辑布局"]})})})]},aG),ah&&aN.config.allowEdit&&(0,d.jsx)(h.$,{className:(0,n.cn)("fixed shadow-lg z-30 w-14 h-14 rounded-full bg-accent text-accent-foreground hover:bg-accent/90","pc"===c?"bottom-8 right-8":"bottom-24 right-6"),size:"icon",onClick:()=>ae(!0),children:(0,d.jsx)(M.A,{className:"w-6 h-6"})}),ad&&ah&&aN.config.allowEdit&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40",onClick:()=>ae(!1)}),(0,d.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-xl rounded-t-3xl shadow-2xl max-h-[75vh] overflow-hidden border-t border-white/20",children:[(0,d.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full mx-auto mt-3 mb-4"}),(0,d.jsxs)("div",{className:"px-6 pb-4 border-b border-gray-100/50",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"选择功能卡片"}),(0,d.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"预览卡片效果，点击添加到工作台"})]}),(0,d.jsx)(h.$,{variant:"ghost",size:"sm",className:"rounded-full w-8 h-8 p-0 hover:bg-gray-100",onClick:()=>ae(!1),children:(0,d.jsx)(L.A,{className:"w-4 h-4"})})]}),(0,d.jsx)(m.d,{items:aM,activeItem:aj,onItemChange:ak,className:"flex-nowrap overflow-x-auto scrollbar-hide whitespace-nowrap pb-2"})]}),(0,d.jsx)("div",{className:"px-6 py-4 overflow-y-auto max-h-[calc(75vh-180px)]",children:(0,d.jsx)("div",{className:"space-y-4",children:aL.map(a=>{let b=ab.some(b=>b.type===a.id);return(0,d.jsx)("div",{className:(0,n.cn)("transition-all duration-300 border rounded-2xl overflow-hidden",b?"bg-gray-50/80 border-gray-200 opacity-60":"bg-white/90 backdrop-blur-sm border-gray-200 hover:shadow-xl hover:scale-[1.02] hover:border-accent cursor-pointer"),onClick:()=>!b&&(a=>{let b=[...ab,{id:`${a.id}-${Date.now()}`,type:a.id,name:a.name,category:a.category,component:a.component,width:a.width}];ac(b);try{localStorage.setItem(aH,JSON.stringify({cards:aI(b)}))}catch{}ae(!1)})(a),children:(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h5",{className:"font-semibold text-base text-gray-900 mb-1",children:a.name}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(i.E,{variant:"outline",className:"text-xs bg-accent/10 text-accent-foreground border-accent/20",children:a.category}),b&&(0,d.jsx)(i.E,{variant:"secondary",className:"text-xs bg-green-50 text-green-700 border-green-200",children:"已添加"})]})]})}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-2 border border-gray-200/50 overflow-hidden",children:(0,d.jsx)("div",{className:"transform scale-[0.7] origin-top-left w-[143%] pointer-events-none",children:(0,d.jsx)("div",{className:"max-h-48 overflow-hidden",children:a.component})})}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/80 via-transparent to-transparent rounded-xl flex items-end justify-center pb-2",children:(0,d.jsx)("div",{className:"text-xs text-gray-600 font-medium bg-white/90 px-2 py-1 rounded-full",children:"点击添加"})})]})]})},a.id)})})})]})]})]}),(0,d.jsx)(P.lG,{open:al,onOpenChange:am,children:(0,d.jsxs)(P.Cf,{className:"max-w-md",children:[(0,d.jsx)(P.c7,{children:(0,d.jsx)(P.L3,{children:"选择数据源"})}),(0,d.jsxs)("div",{className:"mt-2 space-y-2",children:[ar&&(0,d.jsx)("div",{className:"text-sm text-red-600",children:ar}),!ar&&0===ap.length&&(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:"暂无可用数据源"}),(0,d.jsx)("div",{className:"grid grid-cols-1 gap-2",children:ap.map(a=>(0,d.jsx)(h.$,{variant:"outline",className:"justify-start",onClick:()=>(a=>{if(an){console.log(an,a),au(b=>({...b,[an]:a.label}));try{localStorage.setItem(`CARD_DS_${an}`,JSON.stringify({key:a.key,label:a.label}))}catch{}try{let b=(0,T.CV)(),c=ab.find(a=>a.id===an),d=c?j.U.getConfig(c.type):void 0,e=U.g[c?.type]||{};b.post("aino:data",{card:{id:c?.id,name:c?.name,type:c?.type,config:d?{displayName:d.displayName,category:d.category,width:d.width,businessFlow:d.businessFlow}:void 0},inputs:e,dataSource:{key:a.key,label:a.label},timestamp:Date.now()})}catch{}am(!1)}})(a),children:a.label},a.key))})]})]})})]})}},19145:(a,b,c)=>{c.d(b,{Cf:()=>l,L3:()=>n,c7:()=>m,lG:()=>i});var d=c(80742),e=c(30311),f=c(71443),g=c(85338),h=c(88810);let i=f.bL;f.l9;let j=f.ZL;f.bm;let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));k.displayName=f.hJ.displayName;let l=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(j,{children:[(0,d.jsx)(k,{}),(0,d.jsxs)(f.UC,{ref:e,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[b,(0,d.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));l.displayName=f.UC.displayName;let m=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});m.displayName="DialogHeader";let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));n.displayName=f.hE.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b})).displayName=f.VY.displayName},26063:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(3208).A)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},87840:(a,b,c)=>{c.d(b,{F:()=>l});var d=c(80742),e=c(30311),f=c.n(e),g=c(8184),h=c(52747),i=c(99506),j=c(88810);function k({id:a,children:b,className:c}){let{attributes:e,listeners:g,setNodeRef:k,transform:l,transition:m,isDragging:n}=(0,h.gl)({id:a}),o={transform:i.Ks.Transform.toString(l),transition:m,opacity:n?.5:1,zIndex:n?1e3:1};return(0,d.jsx)("div",{ref:k,style:o,...e,...g,className:(0,j.cn)("relative cursor-grab active:cursor-grabbing transition-all duration-200",n&&"shadow-2xl scale-105",c),children:f().isValidElement(b)?f().cloneElement(b,{id:a,"data-theme-key":a}):b})}function l({items:a,onReorder:b,className:c="space-y-4",layout:e="vertical",disabled:i=!1,gridCols:l=3}){let[m,n]=f().useState(a),[o,p]=f().useState(null),q=(0,g.FR)((0,g.MS)(g.AN,{activationConstraint:{distance:8}}),(0,g.MS)(g.uN,{coordinateGetter:h.JR})),r="grid"===e?h.kL:h._G,s="grid"===e?(0,j.cn)(`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-${l} gap-6`,c):c,t=m.find(a=>a.id===o);return i?(0,d.jsx)("div",{className:s,children:m.map(a=>(0,d.jsx)("div",{className:a.className,children:f().isValidElement(a.content)?f().cloneElement(a.content,{id:a.id,"data-theme-key":a.id}):a.content},a.id))}):(0,d.jsxs)(g.Mp,{sensors:q,collisionDetection:g.fp,onDragStart:function(a){p(a.active.id)},onDragEnd:function(a){let{active:c,over:d}=a;if(p(null),d&&c.id!==d.id){let a=m.findIndex(a=>a.id===c.id),e=m.findIndex(a=>a.id===d.id),f=(0,h.be)(m,a,e);n(f),b?.(f.map(a=>a.id))}},children:[(0,d.jsx)(h.gB,{items:m.map(a=>a.id),strategy:r,children:(0,d.jsx)("div",{className:s,children:m.map(a=>(0,d.jsx)(k,{id:a.id,className:(0,j.cn)("transition-all duration-200",a.className),children:a.content},a.id))})}),(0,d.jsx)(g.Hd,{children:t?(0,d.jsx)("div",{className:"transform rotate-3 shadow-2xl",children:f().isValidElement(t.content)?f().cloneElement(t.content,{id:String(t.id),"data-theme-key":String(t.id)}):t.content}):null})]})}},91219:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(3208).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},94721:(a,b,c)=>{c.d(b,{CV:()=>g,zU:()=>e});class d{constructor(a,b){this.target=a??null,this.targetOrigin=b?.targetOrigin??"*",this.channel=b?.channel}setTarget(a){this.target=a}setTargetOrigin(a){this.targetOrigin=a}setChannel(a){this.channel=a}post(a,b,c){if(!this.target)return;let d={type:a,payload:b,correlationId:c,channel:this.channel};try{this.target.postMessage(d,this.targetOrigin)}catch(a){}}}function e(a,b){return()=>{}}let f=null;function g(a){return f?(a?.targetOrigin&&f.setTargetOrigin(a.targetOrigin),a?.channel&&f.setChannel(a.channel)):f=new d(void 0,a),f}},98523:(a,b,c)=>{c.d(b,{a:()=>g,g:()=>f});var d=c(93531),e=c(39870);let f={"job-position":{id:"String",title:"String",salary:"String",location:"String",demandGrowth:"String",salaryGrowth:"String",locale:"String"},"job-posting":{title:"String",company:"String",location:"String",salary:"String",experience:"String",education:"String",tags:"String[]"},"related-jobs-list":{title:"String",avgSalary:"String",location:"String",education:"String",experience:"String",jobType:"String"},"job-experience-ratio":{title:"String",description:"String",list:[{name:"String",value:"Number",jobs:"Number"}]},"job-header":{title:"String",salary:"String",location_province:"String",location_city:"String",location_district:"String",education:"String",experience:"String",employmentType:"String"},"job-benefits":{title:"String",benefits:"String[]"},"job-requirements":{title:"String",requirements:"String[]"},"apply-resume":{buttonText:"String"},"job-detail-intro":{title:"String",description:"String",avgMonthlySalary:"String",dataSource:"String"},"education-salary-requirements":{title:"String",description:"String",data:[{label:"String",value:"String",percentage:"Number",color:"String"}]},"job-prospect-trend":{title:"String",monthlyNewJobs:"String",monthlyLabel:"String",rankText:"String",chartData:[{month:"String",value:"Number"}]},"job-city-ranking":{title:"String",description:"String",data:[{label:"String",value:"String|Number",percentage:"Number"}]},"monthly-job-growth":{title:"String",chartData:[{month:"String",jobs:"Number"}]},"ability-requirements-radar":{title:"String",chartData:[{subject:"String",value:"Number",fullMark:"Number"}]},"company-info":{name:"String",logo:"String",description:"String"}},g=async()=>{let a=localStorage.getItem("APPLICATION_CONFIG"),b=a?JSON.parse(a):{},c=b.config?.clientManifest?.dataMappings||{},f=[];Object.keys(c).forEach(async a=>{let[b,g]=a.split("::"),[h,i,j]=g.split("_");f.push(new Promise(async(f,g)=>{let k,l,m=c[a];if("table"===h){let{data:a}=await d.A.get(`http://47.94.52.142:3007/api/records/${i}?noAuth=true`);k=a.data,l=[],k.forEach(a=>{let b={};Object.keys(m).forEach(c=>{b[c]=a[m[c]]}),l.push(b)})}else if("record"===h){let{data:a}=await d.A.get(`http://47.94.52.142:3007/api/records/${i}/${j}?noAuth=true`);k=a.data,l={},Object.keys(m).forEach(a=>{if(a.indexOf("[].")>-1){let b=a.split("[].");l[b[0]]||(l[b[0]]=[]);let c=m[a].split(".");k[c[0]].forEach((a,d)=>{let e={};a.images.concat(a.numbers).concat(a.texts).forEach(a=>{e[a.id]=a}),l[b[0]][d]||(l[b[0]][d]={}),l[b[0]][d][b[1]]=e[c[1]].value})}else l[a]=k[m[a]]})}e.U.setData(b,l),f(!0)}))}),await Promise.all(f)}}};