"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3378],{2794:(e,t,a)=>{a.d(t,{d:()=>s});var r=a(89835),l=a(15496),n=a(60267);function s(e){let{items:t,activeItem:a,onItemChange:s,className:i}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex justify-center flex-wrap gap-3",i),children:t.map(e=>(0,r.jsxs)(n.K,{variant:a===e.label?"primary":"default",onClick:()=>s(e.label),className:"flex items-center",children:[e.icon,e.label]},e.label))})}},3833:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(89835),l=a(55931),n=a(15496),s=a(79588),i=a(79644),o=a(59213);let c=function(e){let{config:t,className:a,onSwitchTab:c,activeIndex:d,disableNavigate:u}=e,m=(0,s.useRouter)(),p=(0,s.useParams)(),g=(null==p?void 0:p.locale)||"zh",[h,y]=(0,l.useState)(null!=d?d:0);(0,l.useEffect)(()=>{"number"==typeof d&&d!==h&&y(d)},[d]);let f=(0,l.useMemo)(()=>"grid-5"===t.layout?5:4,[t.layout]),x=(e,t)=>{let a=null==t?void 0:t.event;if(u||!a||!a.action||"switchTab"===a.action){y(e),null==c||c({tabKey:null==a?void 0:a.tabKey,tabIndex:null==a?void 0:a.tabIndex,index:e});return}if("navigate"===a.action){if("internal"===a.pageType){let e=a.page||"home",t=e.startsWith("p-")?"/".concat(g,"/p/").concat(e.replace(/^p-/,"")):"/".concat(g,"/").concat(e.replace(/^\//,""));m.push(t)}else if("external"===a.pageType&&a.url)try{window.open(a.url,"_blank")}catch(e){location.href=a.url}}};if(!t||!Array.isArray(t.items)||0===t.items.length)return null;if("text"===t.type){var b,v,w,j,N,k;return(0,r.jsxs)("div",{className:(0,n.cn)("w-full rounded-2xl shadow-md backdrop-blur-md bg-white/60 dark:bg-neutral-900/30",a),children:[((null==(b=t.header)?void 0:b.title)||(null==(v=t.header)?void 0:v.search)||(null==(w=t.header)?void 0:w.notify))&&(0,r.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex-1"}),(0,r.jsx)("div",{className:"text-base font-semibold select-none",children:null==(j=t.header)?void 0:j.title}),(0,r.jsxs)("div",{className:"flex-1 flex items-center justify-end gap-2",children:[(null==(N=t.header)?void 0:N.search)&&(0,r.jsx)("button",{className:"size-8 rounded-full flex items-center justify-center hover:bg-muted/70 text-muted-foreground","aria-label":"search",children:(0,r.jsx)(i.A,{className:"w-4 h-4"})}),(null==(k=t.header)?void 0:k.notify)&&(0,r.jsx)("button",{className:"size-8 rounded-full flex items-center justify-center hover:bg-muted/70 text-muted-foreground","aria-label":"notify",children:(0,r.jsx)(o.A,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"px-2 py-2 overflow-x-auto scrollbar-hide",style:{background:"white"},children:(0,r.jsx)("div",{className:"flex items-center gap-6 px-2 min-w-max",children:t.items.map((e,t)=>(0,r.jsxs)("button",{className:(0,n.cn)("relative text-sm font-medium transition-colors pb-2",t===h?"text-primary":"text-muted-foreground hover:text-foreground"),onClick:()=>{y(t),null==c||c({index:t})},children:[e.title||"Tab ".concat(t+1),t===h&&(0,r.jsx)("span",{className:"absolute left-1/2 -translate-x-1/2 -bottom-0.5 h-0.5 w-6 bg-primary rounded-full"})]},t))})})]})}return"scroll"===t.layout?(0,r.jsx)("div",{className:(0,n.cn)("w-full rounded-xl bg-card text-card-foreground shadow-sm px-4 py-3",a),children:(0,r.jsx)("div",{className:"flex items-stretch gap-4 overflow-x-auto scrollbar-hide",children:t.items.map((e,t)=>(0,r.jsxs)("button",{className:"flex-shrink-0 w-20 flex flex-col items-center gap-2",onClick:()=>x(t,e),children:[(0,r.jsx)("div",{className:(0,n.cn)("w-16 h-16 rounded-full bg-muted flex items-center justify-center overflow-hidden shadow-sm"),children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.title||"icon",className:"w-full h-full object-cover"}):(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"img"})}),(0,r.jsx)("div",{className:(0,n.cn)("text-xs",t===h?"text-primary":"text-foreground"),children:e.title||"Item ".concat(t+1)}),t===h&&(0,r.jsx)("div",{className:"h-0.5 w-6 rounded bg-primary"})]},t))})}):(0,r.jsx)("div",{className:(0,n.cn)("w-full rounded-xl bg-card text-card-foreground shadow-sm px-4 py-4",a),children:(0,r.jsx)("div",{className:(0,n.cn)("grid gap-4",5===f?"grid-cols-5":"grid-cols-4"),children:t.items.map((e,t)=>(0,r.jsxs)("button",{className:"flex flex-col items-center gap-2",onClick:()=>x(t,e),children:[(0,r.jsx)("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center overflow-hidden shadow-sm",children:e.image?(0,r.jsx)("img",{src:e.image,alt:e.title||"icon",className:"w-full h-full object-cover"}):(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:"img"})}),(0,r.jsx)("div",{className:(0,n.cn)("text-xs",t===h?"text-primary":"text-foreground"),children:e.title||"Item ".concat(t+1)}),t===h&&(0,r.jsx)("div",{className:"h-0.5 w-6 rounded bg-primary"})]},t))})})}},6195:(e,t,a)=>{a.d(t,{CV:()=>s,zU:()=>l});class r{setTarget(e){this.target=e}setTargetOrigin(e){this.targetOrigin=e}setChannel(e){this.channel=e}post(e,t,a){if(!this.target)return;let r={type:e,payload:t,correlationId:a,channel:this.channel};try{this.target.postMessage(r,this.targetOrigin)}catch(e){}}constructor(e,t){var a;this.target=null!=e?e:window.parent,this.targetOrigin=null!=(a=null==t?void 0:t.targetOrigin)?a:"*",this.channel=null==t?void 0:t.channel}}function l(e,t){let a=document,r=t?a.querySelector(t):a.body;if(!r)return()=>{};let l=0,n=()=>{let t=Math.max(r.scrollHeight,r.offsetHeight,r.clientHeight);t!==l&&(l=t,e.post("aino:height",{height:t}))};n();let s=new ResizeObserver(()=>n());s.observe(r);let i=()=>n();window.addEventListener("resize",i),document.fonts&&document.fonts.addEventListener&&document.fonts.addEventListener("loadingdone",n);let o=new MutationObserver(()=>n());return o.observe(r,{subtree:!0,childList:!0,attributes:!0,characterData:!0}),()=>{try{s.disconnect()}catch(e){}try{o.disconnect()}catch(e){}window.removeEventListener("resize",i)}}let n=null;function s(e){return n?((null==e?void 0:e.targetOrigin)&&n.setTargetOrigin(e.targetOrigin),(null==e?void 0:e.channel)&&n.setChannel(e.channel)):n=new r(void 0,e),n}},8892:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},9716:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]])},11226:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]])},12680:(e,t,a)=>{a.d(t,{L:()=>i});var r=a(77455),l=a(29088);let n=(()=>{let e=r.A.create({baseURL:l.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:3007",timeout:1e4,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use(e=>{let t=window.localStorage.getItem("aino_auth_token")||window.localStorage.getItem("aino_token")||"";return t&&(e.headers.Authorization="Bearer ".concat(t)),"get"===e.method&&(e.params={...e.params,_t:Date.now()}),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("aino_auth_token"),window.location.href="/auth/login"),Promise.reject(e)}),e})(),s=async e=>{try{return(await n(e)).data}catch(r){var t;if(!r.response)throw Error("Network error - please check your connection");let e=r.response.status,a=(null==(t=r.response.data)?void 0:t.message)||r.message;throw Error("Request failed (".concat(e,"): ").concat(a))}},i={get:(e,t)=>s({...t,method:"GET",url:e}),post:(e,t,a)=>s({...a,method:"POST",url:e,data:t}),put:(e,t,a)=>s({...a,method:"PUT",url:e,data:t}),patch:(e,t,a)=>s({...a,method:"PATCH",url:e,data:t}),delete:(e,t)=>s({...t,method:"DELETE",url:e}),upload:(e,t,a)=>{let r=new FormData;return r.append("file",t),s({...a,method:"POST",url:e,data:r,headers:{"Content-Type":"multipart/form-data",...null==a?void 0:a.headers}})},download:async(e,t,a)=>{try{let r=await n({...a,method:"GET",url:e,responseType:"blob"}),l=new Blob([r.data]),s=window.URL.createObjectURL(l),i=document.createElement("a");i.href=s,i.download=t||"download",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}catch(e){throw Error("Download failed")}}}},14192:(e,t,a)=>{a.d(t,{F:()=>d});var r=a(89835),l=a(55931),n=a(27426),s=a(33031),i=a(69140),o=a(15496);function c(e){let{id:t,children:a,className:n}=e,{attributes:c,listeners:d,setNodeRef:u,transform:m,transition:p,isDragging:g}=(0,s.gl)({id:t}),h={transform:i.Ks.Transform.toString(m),transition:p,opacity:g?.5:1,zIndex:g?1e3:1};return(0,r.jsx)("div",{ref:u,style:h,...c,...d,className:(0,o.cn)("relative cursor-grab active:cursor-grabbing transition-all duration-200",g&&"shadow-2xl scale-105",n),children:l.isValidElement(a)?l.cloneElement(a,{id:t,"data-theme-key":t}):a})}function d(e){let{items:t,onReorder:a,className:i="space-y-4",layout:d="vertical",disabled:u=!1,gridCols:m=3}=e,[p,g]=l.useState(t),[h,y]=l.useState(null),f=(0,n.FR)((0,n.MS)(n.AN,{activationConstraint:{distance:8}}),(0,n.MS)(n.uN,{coordinateGetter:s.JR}));l.useEffect(()=>{g(t)},[t]);let x="grid"===d?s.kL:s._G,b="grid"===d?(0,o.cn)("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-".concat(m," gap-6"),i):i,v=p.find(e=>e.id===h);return u?(0,r.jsx)("div",{className:b,children:p.map(e=>(0,r.jsx)("div",{className:e.className,children:l.isValidElement(e.content)?l.cloneElement(e.content,{id:e.id,"data-theme-key":e.id}):e.content},e.id))}):(0,r.jsxs)(n.Mp,{sensors:f,collisionDetection:n.fp,onDragStart:function(e){y(e.active.id)},onDragEnd:function(e){let{active:t,over:r}=e;if(y(null),r&&t.id!==r.id){let e=p.findIndex(e=>e.id===t.id),l=p.findIndex(e=>e.id===r.id),n=(0,s.be)(p,e,l);g(n),null==a||a(n.map(e=>e.id))}},children:[(0,r.jsx)(s.gB,{items:p.map(e=>e.id),strategy:x,children:(0,r.jsx)("div",{className:b,children:p.map(e=>(0,r.jsx)(c,{id:e.id,className:(0,o.cn)("transition-all duration-200",e.className),children:e.content},e.id))})}),(0,r.jsx)(n.Hd,{children:v?(0,r.jsx)("div",{className:"transform rotate-3 shadow-2xl",children:l.isValidElement(v.content)?l.cloneElement(v.content,{id:String(v.id),"data-theme-key":String(v.id)}):v.content}):null})]})}},15764:(e,t,a)=>{a.d(t,{E:()=>i});var r=a(89835);a(55931);var l=a(7951),n=a(15496);let s=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...l}=e;return(0,r.jsx)("div",{className:(0,n.cn)(s({variant:a}),t),...l})}},17553:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},26443:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},33378:(e,t,a)=>{a.d(t,{M3:()=>Z,Zd:()=>G});var r=a(89835),l=a(55931),n=a(12680),s=a(54890),i=a(92475),o=a(15764),c=a(84215),d=a(44359),u=a(96037),m=a(14192),p=a(2794),g=a(15496),h=a(77796),y=a(6533),f=a(42039),x=a(97909),b=a(26941),v=a(9716),w=a(8892),j=a(51894);let N=(0,j.A)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var k=a(11226);let S=(0,j.A)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var I=a(68736);let A=(0,j.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);var E=a(17553),C=a(84212),P=a(76865);let _=(0,j.A)("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);var M=a(64684),O=a(26443),D=a(68232),R=a(7504),L=a(91603),T=a(61138),z=a(73607);let F=e=>{let{code:t,props:a,data:n,theme:s,ui:i,className:o}=e,c=(0,l.useRef)(null),d=(0,l.useMemo)(()=>"<!doctype html><html><head><meta charset=\"utf-8\"><style>html,body,#root{height:100%;margin:0}</style>\n  <script crossorigin src=\"https://unpkg.com/react@18/umd/react.production.min.js\"><\/script>\n  <script crossorigin src=\"https://unpkg.com/react-dom@18/umd/react-dom.production.min.js\"><\/script>\n  <script crossorigin src=\"https://unpkg.com/@babel/standalone/babel.min.js\"><\/script>\n  </head><body><div id=\"root\"></div>\n  <script>\n  const render = (payload) => {\n    try {\n      const { code, props, data, theme, ui } = payload\n      const transformed = Babel.transform(code, { presets: ['react'] }).code\n      const exports = {}\n      const module = { exports }\n      const req = () => ({})\n      const fn = new Function('exports','module','require','React','props','data','theme','ui', transformed + '; return module.exports || exports.default || exports')\n      const Comp = fn(exports, module, req, window.React, props, data, theme, ui)\n      const el = React.createElement(Comp.default || Comp, { props, data, theme, ui })\n      ReactDOM.createRoot(document.getElementById('root')).render(el)\n    } catch (e) {\n      document.getElementById('root').innerText = 'Sandbox error: ' + (e && e.message ? e.message : e)\n    }\n  }\n  window.addEventListener('message', (e)=>{ if (e.data && e.data.type==='RUN'){ render(e.data) } })\n  <\/script>\n  </body></html>",[]);return(0,l.useEffect)(()=>{var e;let r=null==(e=c.current)?void 0:e.contentWindow;r&&r.postMessage({type:"RUN",code:t,props:a,data:n,theme:s,ui:i},"*")},[t,a,n,s,i]),(0,r.jsx)("iframe",{ref:c,className:o,sandbox:"allow-scripts",srcDoc:d})};var B=a(3833),U=a(62780),J=a(6195),V=a(65794),q=a(79588);let G={workspace:{id:"workspace",name:"工作台",description:"可拖拽的工作台卡片系统",type:"workspace",config:{showHeader:!0,showBottomNav:!1,allowEdit:!0,layout:"mobile"}},content:{id:"content",name:"内容管理",description:"内容管理平台界面",type:"content",config:{showHeader:!0,showBottomNav:!0,allowEdit:!1,layout:"mobile"}},education:{id:"education",name:"在线教育",description:"在线教育移动应用",type:"education",config:{showHeader:!0,showBottomNav:!1,allowEdit:!0,layout:"mobile"}},"pc-workspace":{id:"pc-workspace",name:"PC工作台",description:"PC版可拖拽的工作台卡片系统",type:"workspace",config:{showHeader:!1,showBottomNav:!1,allowEdit:!0,layout:"pc"}}},H={"recruitment-package":"rec","recruitment-package-sub":"recSub","education-package":"edu","education-package-sub":"eduSub"},$=[];function Z(e){let{category:t,locale:a,layout:j,showHeader:Z,showBottomNav:W,headerTitle:Y,showBack:K,aiOpsUrl:Q,aiOpsLabel:X,topTabsConfig:ee,contentNavConfig:et,initialTabIndex:ea,pageId:er}=e,[el,en]=(0,l.useState)([]),es=(0,l.useRef)({}),[ei,eo]=(0,l.useState)(!1),ec=(0,q.useSearchParams)();(0,q.useRouter)();let ed=(0,q.usePathname)(),eu="true"===ec.get("isEdite")||"true"===ec.get("isEdit"),[em,ep]=(0,l.useState)(eu),[eg,eh]=(0,l.useState)("全部"),[ey,ef]=(0,l.useState)(!1),[ex,eb]=(0,l.useState)(null),[ev,ew]=(0,l.useState)([]),[ej,eN]=(0,l.useState)(null),[ek,eS]=(0,l.useState)({}),[eI,eA]=(0,l.useState)(null!=ea?ea:0),[eE,eC]=(0,l.useState)(0),[eP,e_]=(0,l.useState)(0),[eM,eO]=(0,l.useState)({}),[eD,eR]=(0,l.useState)(!1),[eL,eT]=(0,l.useState)(null),[ez,eF]=(0,l.useState)([]),eB=(e,t)=>{try{es.current[e]=t}catch(e){}e===e$&&en(t)};(0,l.useEffect)(()=>{"number"==typeof ea&&eA(ea)},[ea]);let eU=(0,l.useMemo)(()=>{try{if(!er)return null;let e=localStorage.getItem("APP_PAGE_".concat(er));return e?JSON.parse(e):null}catch(e){return null}},[er,eI,eP]),eJ=async()=>{let e=window.localStorage.getItem("APP_ID"),{modules:t}=(await n.L.get("/api/applications/".concat(e,"/modules"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(window.localStorage.getItem("aino_auth_token"))}})).data;eF(t)};(0,l.useEffect)(()=>{eJ()},[]);let eV=async()=>{if(void 0!==window){var e,t,a,r,l,s,i,o;let c=window.localStorage.getItem("APP_ID"),d=await n.L.get("/api/applications/".concat(encodeURIComponent(String(c)),"?noAuth=true"));if(!d)return;let{config:u}=(d&&"object"==typeof d&&"data"in d?d.data:d)||{},m=new URLSearchParams(window.location.search).get("tab")||0;if(null==u||null==(r=u.clientManifest)||null==(a=r.pages)||null==(t=a["p-".concat(er)])||null==(e=t.overrides)?void 0:e["tab-".concat(m)]){let e=null==u||null==(o=u.clientManifest)||null==(i=o.pages)||null==(s=i["p-".concat(er)])||null==(l=s.overrides)?void 0:l["tab-".concat(m)];localStorage.setItem("CARD_DISPLAY_DATA",JSON.stringify(e))}}};(0,l.useEffect)(()=>{eV()},[er]);let eq=(0,l.useMemo)(()=>{try{if(ee&&"text"===ee.type&&Array.isArray(ee.items)&&ee.items.length>0)return ee;let e=eU&&eU.topBar||null,t=!!(e&&e.enabled),a=t&&e.tabs||[];if(t&&Array.isArray(a)&&a.length>0)return{type:"text",items:a.map(e=>({title:e&&(e.title||"").trim()||"标签"}))};let r=eU&&eU.contentNav;if(r){let e=r.style;if("text"===e)return{...r,type:"text"};if("text"===r.type)return r}return null}catch(e){return null}},[eU]),eG=(0,l.useMemo)(()=>{let e=e=>{if(!e)return null;let t=e.style;return"text"===t||"icon"===t?{...e,type:"text"===t?"text":"iconText"}:"text"===e.type||"iconText"===e.type?e:null};try{if(eq){let t=eU&&eU.tabContent||{},a=(null==t?void 0:t[eI])||{};return e(null==a?void 0:a.contentNav)||null}return e(eU&&eU.contentNav)||null}catch(e){return null}},[eU,eq,eI]),eH=(0,l.useMemo)(()=>{let e=!!(eq&&"text"===eq.type),a=!!(eG&&"iconText"===eG.type);return e&&a?"".concat(t,"-tab-").concat(eI,"-icon-").concat(eE):e?"".concat(t,"-tab-").concat(eI):a?"".concat(t,"-icon-").concat(eE):t},[t,eq,eG,eI,eE]),e$="dynamic_page_layout_".concat(eH,"_").concat(a),eZ=e=>e.map(e=>({id:e.id,type:e.type})),eW=e=>{let t=eX(),a=Date.now();return e.map((e,r)=>{let l=t.find(t=>t.id===e.type);return l?{id:e.id||"".concat(l.id,"-").concat(a,"-").concat(r),type:l.id,name:l.name,category:l.category,component:l.component,packageId:l.packageId,width:l.width}:null}).filter(Boolean)},eY=()=>{try{let e={},t={};el.forEach(a=>{try{let t=localStorage.getItem(a.id),r=localStorage.getItem("card_theme_".concat(a.id)),l=t||r;l&&(e[a.id]=JSON.parse(l))}catch(e){}try{let e=localStorage.getItem("CARD_DS_".concat(a.id));e&&(t[a.id]=JSON.parse(e))}catch(r){let e=localStorage.getItem("CARD_DS_".concat(a.id));e&&(t[a.id]=e)}});let a={cards:eZ(el),themes:e,dataSources:t,updatedAt:Date.now()};localStorage.setItem(e$,JSON.stringify(a));try{n.L.put("/api/page-configs/key/".concat(encodeURIComponent(e$)),a).catch(()=>{})}catch(e){}}catch(e){console.error("保存布局到本地存储失败",e)}},eK=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(em){try{eK.current&&window.clearTimeout(eK.current),eK.current=window.setTimeout(()=>{try{eY()}catch(e){}},400)}catch(e){}return()=>{eK.current&&(window.clearTimeout(eK.current),eK.current=null)}}},[el,ek,e$,em]),(0,l.useEffect)(()=>{let e=e=>{try{if(!em)return;let t=e.key||"";(er&&t==="APP_PAGE_".concat(er)||t.startsWith("CARD_DS_"))&&(eK.current&&window.clearTimeout(eK.current),eK.current=window.setTimeout(()=>{try{eY()}catch(e){}},300))}catch(e){}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[em,er]),(0,l.useEffect)(()=>{let e=e=>{let t=e.data;if(t&&"SET_OVERRIDE"===t.type)try{let{pageId:e,sectionKey:a,cardType:r,props:l,jsx:s,display:i,filters:o}=t;if(!e||e!==er)return;let c="APP_PAGE_".concat(e),d=localStorage.getItem(c),u=d?JSON.parse(d):{},m={...u.overrides||{}},p={...m[a]||{}},g={...p[r]||{}};void 0!==l&&(g.props=l),void 0!==s&&(g.jsx=s),void 0!==i&&(g.display=i),void 0!==o&&(g.filters=o),p[r]=g,m[a]=p;let h={...u,overrides:m};localStorage.setItem(c,JSON.stringify(h)),e_(e=>e+1);try{n.L.put("/api/page-configs/key/".concat(encodeURIComponent(c)),h).catch(()=>{})}catch(e){}}catch(e){console.error("SET_OVERRIDE failed:",e)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[er]),(0,l.useEffect)(()=>{let e=e=>{let t=e.data;if(t&&"GET_OVERRIDE"===t.type)try{var a,r,l,n,s,i,o,c,d,u;let{pageId:e,sectionKey:m,cardType:p}=t;if(!e||e!==er)return;let g=localStorage.getItem("APP_PAGE_".concat(e)),h=g?JSON.parse(g):{},y=null==h||null==(l=h.overrides)||null==(r=l[m])||null==(a=r[p])?void 0:a.props,f=null==h||null==(i=h.overrides)||null==(s=i[m])||null==(n=s[p])?void 0:n.jsx,x=null==h||null==(d=h.overrides)||null==(c=d[m])||null==(o=c[p])?void 0:o.filters;null==(u=window.parent)||u.postMessage({type:"OVERRIDE",pageId:e,sectionKey:m,cardType:p,props:y,jsx:f,filters:x},"*")}catch(e){console.error("GET_OVERRIDE failed:",e)}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[er]),(0,l.useEffect)(()=>{try{var e;null==(e=window.parent)||e.postMessage({type:"DYN_CARDS",category:eH,cards:el.map(e=>({id:e.id,type:e.type,displayName:e.name,packageId:e.packageId,inputFields:V.g[e.type]}))},"*")}catch(e){}},[el,eH]);let eQ=(0,l.useMemo)(()=>{try{var e,t,a,r,l,n,s;if(!er)return el;let i=localStorage.getItem("APP_PAGE_".concat(er));if(!i)return el;let o=JSON.parse(i||"{}"),c=null==o||null==(a=o.visibility)||null==(t=a.combined)||null==(e=t[eI])?void 0:e[eE];if(c&&c.length>0)return el.filter(e=>c.includes(e.type));let d=null==o||null==(l=o.visibility)||null==(r=l.icon)?void 0:r[eE];if(d&&d.length>0)return el.filter(e=>d.includes(e.type));let u=null==o||null==(s=o.visibility)||null==(n=s.text)?void 0:n[eI];if(u&&u.length>0)return el.filter(e=>u.includes(e.type));return el}catch(e){return el}},[el,er,eq,eG,eI,eE]);(0,l.useEffect)(()=>{try{let e=localStorage.getItem(e$);if(!e)return void(async()=>{try{let e=await n.L.get("/api/page-configs/key/".concat(encodeURIComponent(e$)));if(e&&Array.isArray(e.cards)){try{localStorage.setItem(e$,JSON.stringify(e))}catch(e){}let t=e.cards.map(e=>"string"==typeof e?{type:e}:{id:e.id,type:e.type});if(e.themes&&"object"==typeof e.themes)try{Object.entries(e.themes).forEach(e=>{let[t,a]=e,r=JSON.stringify(a);try{localStorage.setItem(t,r)}catch(e){}if(t.startsWith("card_theme_")){let e=t.replace(/^card_theme_/,"");try{localStorage.setItem(e,r)}catch(e){}}})}catch(e){}if(e.dataSources&&"object"==typeof e.dataSources){let t={};try{Object.entries(e.dataSources).forEach(e=>{let[a,r]=e;try{localStorage.setItem("CARD_DS_".concat(a),JSON.stringify(r))}catch(e){}let l=r&&r.label||"";l&&(t[a]=String(l))})}catch(e){}Object.keys(t).length>0&&eS(e=>({...e,...t}))}let a=eW(t);if(a.length>0){eB(e$,a),ep(!1);return}}}catch(e){}})();let t=JSON.parse(e);if(t&&Array.isArray(t.cards)){let e=t.cards.map(e=>"string"==typeof e?{type:e}:{id:e.id,type:e.type});if(t.themes&&"object"==typeof t.themes)try{Object.entries(t.themes).forEach(e=>{let[t,a]=e,r=JSON.stringify(a);try{localStorage.setItem(t,r)}catch(e){}if(t.startsWith("card_theme_")){let e=t.replace(/^card_theme_/,"");try{localStorage.setItem(e,r)}catch(e){}}})}catch(e){}if(t.dataSources&&"object"==typeof t.dataSources){let e={};try{Object.entries(t.dataSources).forEach(t=>{let[a,r]=t;try{localStorage.setItem("CARD_DS_".concat(a),JSON.stringify(r))}catch(e){}let l=r&&r.label||"";l&&(e[a]=String(l))})}catch(e){}Object.keys(e).length>0&&eS(t=>({...t,...e}))}let a=eW(e);a.length>0&&(eB(e$,a),ep(!1))}}catch(e){console.error("恢复布局失败",e)}},[e$]),(0,l.useEffect)(()=>{try{let e={};el.forEach(t=>{try{let a=localStorage.getItem("CARD_DS_".concat(t.id));if(a){let r=JSON.parse(a),l="string"==typeof r?r:r&&r.label;l&&(e[t.id]=l)}}catch(r){let a=localStorage.getItem("CARD_DS_".concat(t.id));a&&(e[t.id]=a)}}),Object.keys(e).length>0&&eS(t=>({...t,...e}))}catch(e){}},[el]);let eX=()=>{let e=[];e.push(...$);let t=d.E.getMainCards(),a=[];return t.forEach(e=>{a.push(...d.E.getSubCardsByMainCard(e.id))}),[...t,...a].forEach(t=>{if(t.component){let a=t.component,n=(e=>{switch(e){case"mobile-navigation":return{title:"移动端导航",items:[{id:"home",label:"首页",icon:(0,r.jsx)(h.A,{className:"w-4 h-4"}),href:"/",isActive:!0},{id:"courses",label:"课程",icon:(0,r.jsx)(y.A,{className:"w-4 h-4"}),href:"/courses"},{id:"profile",label:"个人中心",icon:(0,r.jsx)(f.A,{className:"w-4 h-4"}),href:"/profile"},{id:"settings",label:"设置",icon:(0,r.jsx)(x.A,{className:"w-4 h-4"}),href:"/settings"}],showQuickActions:!0};case"pc-toolbar":return{title:"编辑工具栏",showShortcuts:!0,isCollapsed:!1,items:[{id:"save",label:"保存",icon:(0,r.jsx)(b.A,{className:"w-4 h-4"}),shortcut:"Ctrl+S",group:"file"},{id:"edit",label:"编辑",icon:(0,r.jsx)(v.A,{className:"w-4 h-4"}),group:"edit"},{id:"favorite",label:"收藏",icon:(0,r.jsx)(w.A,{className:"w-4 h-4"}),group:"view"}]};case"universal-info":return{title:"平台概况",description:"关键指标总览",showActions:!0,source:"系统统计",items:[{label:"活跃用户",value:12890,type:"number",trend:"up"},{label:"日访问量",value:52340,type:"number",trend:"up"},{label:"转化率",value:3.2,type:"percentage",trend:"stable"},{label:"营收",value:98765,type:"currency",trend:"down"}]};default:return{}}})(t.id);e.push({id:t.id,name:t.name,category:t.category,width:"full",component:l.createElement(a,{data:n,onAction:(e,t)=>console.log("Card action:",e,t)}),businessFlow:t.businessFlow,packageId:H[t.packageId]||t.packageId,inputFields:V.g[t.id]||{}})}else{var a;e.push({id:t.id,name:t.name,category:t.category,width:"full",component:(0,r.jsx)(u.AppCard,{className:"p-6 hover:shadow-lg transition-all duration-300",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,r.jsx)(N,{className:"w-5 h-5 text-accent"}),(0,r.jsx)("h4",{className:"text-lg font-bold",children:t.name})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"string"==typeof t.businessFlow?t.businessFlow:(null==(a=t.businessFlow)?void 0:a.description)||""}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"状态"}),(0,r.jsx)(o.E,{variant:"outline",className:"text-xs bg-yellow-50 text-yellow-700 border-yellow-200",children:"开发中"})]}),(0,r.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-yellow-500 h-2 rounded-full transition-all duration-500",style:{width:"30%"}})}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground",children:["类别：",t.category]}),(0,r.jsx)(i.$,{variant:"outline",size:"sm",className:"w-full bg-transparent",disabled:!0,children:"即将推出"})]})]})})})}}),e},e0=eX(),e1="全部"===eg?e0:e0.filter(e=>e.category===eg),e2=["全部",...Array.from(new Set(c.U.getAll().map(e=>e.category)))].map(e=>({label:e,icon:({全部:(0,r.jsx)(k.A,{className:"w-4 h-4 mr-2"}),基础:(0,r.jsx)(N,{className:"w-4 h-4 mr-2"}),教育:(0,r.jsx)(y.A,{className:"w-4 h-4 mr-2"}),媒体:(0,r.jsx)(S,{className:"w-4 h-4 mr-2"}),招聘:(0,r.jsx)(I.A,{className:"w-4 h-4 mr-2"}),电商:(0,r.jsx)(A,{className:"w-4 h-4 mr-2"}),内容:(0,r.jsx)(E.A,{className:"w-4 h-4 mr-2"}),社交:(0,r.jsx)(C.A,{className:"w-4 h-4 mr-2"}),数据:(0,r.jsx)(P.A,{className:"w-4 h-4 mr-2"}),零售:(0,r.jsx)(_,{className:"w-4 h-4 mr-2"}),旅行:(0,r.jsx)(M.A,{className:"w-4 h-4 mr-2"}),功能:(0,r.jsx)(O.A,{className:"w-4 h-4 mr-2"})})[e]||(0,r.jsx)(N,{className:"w-4 h-4 mr-2"})})),e4=e=>{let t=[...el,{id:"".concat(e.id,"-").concat(Date.now()),type:e.id,name:e.name,category:e.category,component:e.component,width:e.width,packageId:H[e.packageId]||e.packageId,inputFields:V.g[e.id]||{}}];en(t);try{localStorage.setItem(e$,JSON.stringify({cards:eZ(t)}))}catch(e){}eo(!1)},e5=(0,l.useMemo)(()=>"pc"===j&&"workspace"===t?G["pc-workspace"]:G[t]||G.workspace,[t,j]),e3=null!=Z?Z:e5.config.showHeader;return null!=W||e5.config.showBottomNav,(0,r.jsxs)(L.J,{visible:em,children:[(0,r.jsxs)("div",{className:(0,g.cn)("min-h-screen relative","bg-transparent"),children:[e3&&"pc"!==j&&(0,r.jsx)(s.AppHeader,{title:Y||("education"===e5.type?"教育应用Demo":"/zh/preview"===window.location.pathname?"首页":"自定义动态页面"),showBackButton:K}),eq&&"text"===eq.type&&(0,r.jsx)("div",{className:(0,g.cn)("px-4 mb-2","pc"===j?"hidden":"block",e3?"pt-16":"pt-2"),children:(0,r.jsx)(B.A,{config:eq,activeIndex:eI,disableNavigate:!0,onSwitchTab:e=>{let{index:t}=e;if("number"==typeof t){var a;try{let e=new URLSearchParams((null==ec||null==(a=ec.toString)?void 0:a.call(ec))||"");0===t?e.delete("tab"):e.set("tab",String(t));let r=e.toString(),l=r?"".concat(ed,"?").concat(r):"".concat(ed);window.history.replaceState(window.history.state,"",l)}catch(e){}eA(t),eC(0)}}})}),e3&&"pc"!==j&&Q&&(0,r.jsx)("div",{className:"fixed top-3 right-20 z-30",children:(0,r.jsx)("a",{href:Q,target:"_blank",rel:"noreferrer",children:(0,r.jsx)(i.$,{size:"sm",variant:"secondary",className:"rounded-full h-8 px-3",children:X||"AI运营"})})}),"workspace"===e5.type&&(0,r.jsxs)("div",{className:(0,g.cn)("relative z-10","pc"===j?"p-6":eq?"p-4 pt-4":"p-4 pt-20"),children:[eG&&"iconText"===eG.type&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(B.A,{config:eG,activeIndex:eE,disableNavigate:!0,onSwitchTab:e=>{let{index:t}=e;if("number"==typeof t){var a;try{let e=new URLSearchParams((null==ec||null==(a=ec.toString)?void 0:a.call(ec))||"");0===t?e.delete("nav"):e.set("nav",String(t));let r=e.toString(),l=r?"".concat(ed,"?").concat(r):"".concat(ed);window.history.replaceState(window.history.state,"",l)}catch(e){}eC(t)}}})}),(0,r.jsx)("div",{className:"mb-6",children:0===el.length?(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(N,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"pc"===j?"PC自定义工作台":"自定义动态页面"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"点击右下角 ➕ 按钮添加功能卡片，自定义您的页面"})]}):(0,r.jsx)(m.F,{items:eQ.map(e=>{let t,a;return{id:e.id,content:(0,r.jsx)(T.x,{value:e.id,children:(0,r.jsxs)("div",{className:"relative group ".concat("half"===e.width?"w-full":""),children:[em&&e5.config.allowEdit&&(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 p-0 z-10",onClick:()=>{var t;return t=e.id,void en(el.filter(e=>e.id!==t))},children:(0,r.jsx)(D.A,{className:"w-3 h-3"})}),em&&e5.config.allowEdit&&(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"absolute top-2 right-10 opacity-0 group-hover:opacity-100 transition-opacity w-6 h-6 p-0 z-10",onClick:()=>(e=>{eb(e),eN(null);try{let e=localStorage.getItem("APPLICATION_CONFIG");if(!e){ew([]),eN("未找到 APPLICATION_CONFIG"),ef(!0);return}let t=JSON.parse(e),a=t&&t.config&&t.config.clientManifest&&t.config.clientManifest.dataSources,r=[];a&&"object"==typeof a&&(r=Object.keys(a).map(e=>({key:e,label:a[e]&&a[e].label||e}))),r.length||eN("dataSources 为空或结构不正确"),ew(r),ef(!0)}catch(e){eN("解析 APPLICATION_CONFIG 失败"),ew([]),ef(!0)}})(e.id),title:"配置数据",children:(0,r.jsx)(x.A,{className:"w-3 h-3"})}),em&&e5.config.allowEdit&&ek[e.id]&&(0,r.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,r.jsx)(o.E,{variant:"secondary",className:"bg-blue-50 text-blue-600 border-blue-200",children:ek[e.id]})}),(t=(()=>{try{let t,a,n,s,i=c.U.getAll().find(t=>t.name===e.type);if(!i||!i.component)return e.component;let o=i.component,d={},u=!!(eq&&"text"===eq.type),m=!!(eG&&"iconText"===eG.type),p=u&&m?"tab-".concat(eI,"::icon-").concat(eE):void 0,g=p||(u?"tab-".concat(eI):m?"icon-".concat(eE):"");if(er&&g)try{let r=localStorage.getItem("APP_PAGE_".concat(er)),l=r?JSON.parse(r):{},i=t=>{var a,r;return t?null==l||null==(r=l.overrides)||null==(a=r[t])?void 0:a[e.type]:void 0},o=i(p)||i(g);a=null==o?void 0:o.props,t=null==o?void 0:o.jsx,n=null==o?void 0:o.display,s=null==o?void 0:o.filters}catch(e){}if(t)return(0,r.jsx)(F,{code:t,data:d,props:a,theme:{},className:"w-full"});let h=(()=>{try{if(!(null==s?void 0:s.enabled)||!Array.isArray(null==s?void 0:s.fields))return[];return s.fields.map(e=>{let t=[];if(Array.isArray(e.options)&&"select"===e.type)e.options.forEach(e=>{var a,r,l,n;"string"==typeof e?t.push({label:String(e),value:String(e)}):e&&"object"==typeof e&&t.push({label:null!=(r=e.label)?r:String(null!=(a=e.value)?a:""),value:String(null!=(n=null!=(l=e.value)?l:e.label)?n:"")})});else if(Array.isArray(e.optionsTree)&&"cascader"===e.type){let a=(e,r,l)=>{e.forEach(e=>{var n,s,i,o,c,d;let u=[...r,String(null!=(i=null!=(s=null!=(n=e.name)?n:e.label)?s:e.id)?i:"")],m=[...l,String(null!=(d=null!=(c=null!=(o=e.id)?o:e.value)?c:e.name)?d:"")];Array.isArray(e.children)&&e.children.length>0?a(e.children,u,m):t.push({label:u.join(" / "),value:m.join("/")})})};a(e.optionsTree,[],[])}return 0===t.length&&("select"===e.type?t.push({label:"全部",value:"all"},{label:"选项A",value:"a"},{label:"选项B",value:"b"}):"cascader"===e.type&&t.push({label:"中国 / 北京",value:"cn/bj"},{label:"中国 / 上海",value:"cn/sh"},{label:"美国 / 纽约",value:"us/ny"})),{category:e.label||e.fieldId,options:t,defaultValue:e.default}})}catch(e){return[]}})(),y=eM[e.id]||(()=>{let e={};return h.forEach(t=>{var a;let r=t.defaultValue||(null==(a=t.options[0])?void 0:a.value)||"";e[t.category]=r}),e})(),f=(()=>{let e={};return(null==s?void 0:s.enabled)&&Array.isArray(s.fields)&&s.fields.forEach(t=>{let a=t.label||t.fieldId,r=y[a];null!=r&&(e[t.fieldId||a]=r)}),e})(),x=c.U.getRealData(e.id);(null==s?void 0:s.fields)&&h.length&&h.forEach(e=>{let t=s.fields.find(t=>t.label===e.category);if(e.options.push({value:"none",label:"不限"}),t){let a={};x.forEach(e=>{a[e[t.fieldId]]=t.fieldId}),Object.keys(a).forEach(t=>{e.options.push({value:t,fieldId:a[t],label:t})})}});let b={...a||{},listLimit:n&&n.limit,activeFilters:f};return(0,r.jsxs)("div",{className:"space-y-2",children:[(null==s?void 0:s.enabled)&&h.length>0&&(0,r.jsx)(U.E,{cardId:e.id,items:h,values:y,onValueChange:(t,a)=>{eO(r=>({...r,[e.id]:{...r[e.id]||{},[t]:a}}))}}),l.createElement(o,{data:d,props:b,onAction:(e,t)=>console.log("Card action:",e,t)})]})}catch(t){return e.component}})(),a=e.id,(0,l.isValidElement)(t)?(0,l.cloneElement)(t,{id:a,"data-theme-key":a}):t)]})}),className:(0,g.cn)("pc"===j?"half"===e.width?"col-span-1":"col-span-2 lg:col-span-3":"half"===e.width?"col-span-1":"col-span-2")}}),onReorder:e=>{en(e.map(e=>el.find(t=>t.id===e)).filter(Boolean))},layout:"grid",className:"pc"===j?"grid grid-cols-2 lg:grid-cols-3 gap-6":"grid grid-cols-2 gap-4",disabled:!em},e$)}),eu&&e5.config.allowEdit&&(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)(i.$,{variant:"outline",className:"flex-1 hover:bg-accent hover:text-accent-foreground",onClick:()=>{em&&eY(),ep(!em)},children:em?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"保存布局"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"编辑布局"]})})})]},eH),em&&e5.config.allowEdit&&(0,r.jsx)(i.$,{className:(0,g.cn)("fixed shadow-lg z-30 w-14 h-14 rounded-full bg-accent text-accent-foreground hover:bg-accent/90","pc"===j?"bottom-8 right-8":"bottom-24 right-6"),size:"icon",onClick:()=>eo(!0),children:(0,r.jsx)(R.A,{className:"w-6 h-6"})}),ei&&em&&e5.config.allowEdit&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40",onClick:()=>eo(!1)}),(0,r.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-xl rounded-t-3xl shadow-2xl max-h-[75vh] overflow-hidden border-t border-white/20",children:[(0,r.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full mx-auto mt-3 mb-4"}),(0,r.jsxs)("div",{className:"px-6 pb-4 border-b border-gray-100/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"选择功能卡片"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"预览卡片效果，点击添加到工作台"})]}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"rounded-full w-8 h-8 p-0 hover:bg-gray-100",onClick:()=>eo(!1),children:(0,r.jsx)(D.A,{className:"w-4 h-4"})})]}),(0,r.jsx)(p.d,{items:e2,activeItem:eg,onItemChange:eh,className:"flex-nowrap overflow-x-auto scrollbar-hide whitespace-nowrap pb-2"})]}),(0,r.jsx)("div",{className:"px-6 py-4 overflow-y-auto max-h-[calc(75vh-180px)]",children:(0,r.jsx)("div",{className:"space-y-4",children:e1.map(e=>{let t=el.some(t=>t.type===e.id);return(0,r.jsx)("div",{className:(0,g.cn)("transition-all duration-300 border rounded-2xl overflow-hidden",t?"bg-gray-50/80 border-gray-200 opacity-60":"bg-white/90 backdrop-blur-sm border-gray-200 hover:shadow-xl hover:scale-[1.02] hover:border-accent cursor-pointer"),onClick:()=>!t&&e4(e),children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h5",{className:"font-semibold text-base text-gray-900 mb-1",children:e.name}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(o.E,{variant:"outline",className:"text-xs bg-accent/10 text-accent-foreground border-accent/20",children:e.category}),t&&(0,r.jsx)(o.E,{variant:"secondary",className:"text-xs bg-green-50 text-green-700 border-green-200",children:"已添加"})]})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-2 border border-gray-200/50 overflow-hidden",children:(0,r.jsx)("div",{className:"transform scale-[0.7] origin-top-left w-[143%] pointer-events-none",children:(0,r.jsx)("div",{className:"max-h-48 overflow-hidden",children:e.component})})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/80 via-transparent to-transparent rounded-xl flex items-end justify-center pb-2",children:(0,r.jsx)("div",{className:"text-xs text-gray-600 font-medium bg-white/90 px-2 py-1 rounded-full",children:"主卡片效果"})})]}),(0,r.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"名称"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"类别"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(i.$,{variant:"outline",size:"sm",className:"h-7 px-3 text-xs rounded-full border-gray-300 hover:border-accent hover:bg-accent/5",onClick:t=>{t.stopPropagation(),eT(e.id),eR(!0)},children:"子卡片"}),e.businessFlow&&"object"==typeof e.businessFlow&&(e.businessFlow.hasDetailPage||e.businessFlow.hasModal)&&(0,r.jsx)(i.$,{variant:"outline",size:"sm",className:"h-7 px-3 text-xs rounded-full border-gray-300 hover:border-accent hover:bg-accent/5",onClick:t=>{t.stopPropagation(),"object"==typeof e.businessFlow&&(e.businessFlow.hasModal?console.log("显示弹窗:",e.name):e.businessFlow.hasDetailPage&&console.log("跳转内页:",e.name))},children:"内页"})]})]})]})},e.id)})})})]})]}),eD&&eL&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-40",onClick:()=>eR(!1)}),(0,r.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-xl rounded-t-3xl shadow-2xl max-h-[75vh] overflow-hidden border-t border-white/20",children:[(0,r.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full mx-auto mt-3 mb-4"}),(0,r.jsx)("div",{className:"px-6 pb-4 border-b border-gray-100/50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-600 bg-clip-text text-transparent",children:"选择子卡片"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"选择要添加的子卡片组件"})]}),(0,r.jsx)(i.$,{variant:"ghost",size:"sm",className:"rounded-full w-8 h-8 p-0 hover:bg-gray-100",onClick:()=>eR(!1),children:(0,r.jsx)(D.A,{className:"w-4 h-4"})})]})}),(0,r.jsx)("div",{className:"px-6 py-4 overflow-y-auto max-h-[calc(75vh-120px)]",children:(0,r.jsxs)("div",{className:"space-y-4",children:[d.E.getSubCardsByMainCard(eL).map(e=>(0,r.jsx)("div",{className:"transition-all duration-300 border rounded-2xl overflow-hidden bg-white/90 backdrop-blur-sm border-gray-200 hover:shadow-xl hover:scale-[1.02] hover:border-accent cursor-pointer",onClick:()=>{e4(e),eR(!1)},children:(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h5",{className:"font-semibold text-base text-gray-900 mb-1",children:e.name}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)(o.E,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:e.type||"子卡片"})})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-2 border border-gray-200/50 overflow-hidden",children:(0,r.jsx)("div",{className:"transform scale-[0.7] origin-top-left w-[143%] pointer-events-none",children:(0,r.jsx)("div",{className:"max-h-48 overflow-hidden",children:e.component&&l.createElement(e.component)})})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-white/80 via-transparent to-transparent rounded-xl flex items-end justify-center pb-2",children:(0,r.jsx)("div",{className:"text-xs text-gray-600 font-medium bg-white/90 px-2 py-1 rounded-full",children:"点击添加"})})]})]})},e.id)),0===d.E.getSubCardsByMainCard(eL).length&&(0,r.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,r.jsx)("p",{children:"该卡片包暂无子卡片"})})]})})]})]})]}),(0,r.jsx)(z.lG,{open:ey,onOpenChange:ef,children:(0,r.jsxs)(z.Cf,{className:"max-w-md",children:[(0,r.jsx)(z.c7,{children:(0,r.jsx)(z.L3,{children:"选择数据源"})}),(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[ej&&(0,r.jsx)("div",{className:"text-sm text-red-600",children:ej}),!ej&&0===ev.length&&(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"暂无可用数据源"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:ev.map(e=>(0,r.jsx)(i.$,{variant:"outline",className:"justify-start",onClick:()=>(e=>{if(ex){console.log(ex,e),eS(t=>({...t,[ex]:e.label}));try{localStorage.setItem("CARD_DS_".concat(ex),JSON.stringify({key:e.key,label:e.label}))}catch(e){}try{let t=(0,J.CV)(),a=el.find(e=>e.id===ex),r=a?c.U.getConfig(a.type):void 0,l=V.g[null==a?void 0:a.type]||{};t.post("aino:data",{card:{id:null==a?void 0:a.id,name:null==a?void 0:a.name,type:null==a?void 0:a.type,config:r?{displayName:r.displayName,category:r.category,width:r.width,businessFlow:r.businessFlow}:void 0},inputs:l,dataSource:{key:e.key,label:e.label},timestamp:Date.now()})}catch(e){}ef(!1)}})(e),children:e.label},e.key))})]})]})})]})}},44359:(e,t,a)=>{a.d(t,{E:()=>n});var r=a(84215);let l={recruitment:{packageId:"recruitment-package",packageName:"招聘管理",packageCategory:"招聘",mainCard:{cardId:"job-position",displayName:"职位概览",component:null},subCards:[{cardId:"job-salary-overview",packageId:"recruitment-package-sub",displayName:"薪资概览",type:"chart",category:"data"},{cardId:"education-salary-requirements",packageId:"recruitment-package-sub",displayName:"学历收入要求",type:"list",category:"data"},{cardId:"job-experience-ratio",packageId:"recruitment-package-sub",displayName:"工作年限占比分析",type:"chart",category:"data"},{cardId:"job-prospect-trend",packageId:"recruitment-package-sub",displayName:"就业前景趋势",type:"chart",category:"data"},{cardId:"monthly-job-growth",packageId:"recruitment-package-sub",displayName:"月度职位增长",type:"chart",category:"data"},{cardId:"job-city-ranking",packageId:"recruitment-package-sub",displayName:"城市排名",type:"chart",category:"data"},{cardId:"company-ranking",packageId:"recruitment-package-sub",displayName:"公司排名",type:"chart",category:"data"},{cardId:"ability-requirements-radar",packageId:"recruitment-package-sub",displayName:"能力要求雷达图",type:"chart",category:"ability"},{cardId:"core-skills-mastery",packageId:"recruitment-package-sub",displayName:"核心技能掌握",type:"chart",category:"ability"},{cardId:"basic-ability-requirements",packageId:"recruitment-package-sub",displayName:"基础能力要求",type:"list",category:"ability"},{cardId:"education-background",packageId:"recruitment-package-sub",displayName:"教育背景分布",type:"chart",category:"ability"},{cardId:"related-jobs-list",packageId:"recruitment-package-sub",displayName:"相关岗位列表",type:"list",category:"related"},{cardId:"job-detail-intro",packageId:"recruitment-package-sub",displayName:"职位详情介绍",type:"display",category:"info"},{cardId:"job-posting",packageId:"recruitment-package-sub",displayName:"职位发布",type:"form",category:"action"},{cardId:"job-header",packageId:"recruitment-package-sub",displayName:"职位头部",type:"display"},{cardId:"job-requirements",packageId:"recruitment-package-sub",displayName:"职位要求",type:"display"},{cardId:"job-benefits",packageId:"recruitment-package-sub",displayName:"职位福利",type:"display"},{cardId:"company-info",packageId:"recruitment-package-sub",displayName:"公司信息",type:"display"},{cardId:"apply-resume",packageId:"recruitment-package-sub",displayName:"投递简历",type:"form"}],businessFlow:{description:"完整的招聘管理解决方案，从职位发布到人才分析的全流程支持",hasDetailPage:!0,hasModal:!0,actions:["publish","analyze","manage"],dataSource:"api"},detailPage:{enabled:!0,route:"/cards/[cardName]/detail/[id]"},modal:{enabled:!0},developer:{name:"HR Management System",version:"2.0.0",description:"集成化招聘管理卡片包，提供完整的人力资源解决方案"}},education:{packageId:"education-package",packageName:"教育管理",packageCategory:"教育",mainCard:{cardId:"instructor-courses-list",displayName:"导师课程列表",component:null,belongs:"edu"},subCards:[],businessFlow:{description:"教育管理解决方案，支持课程管理和学习跟踪",hasDetailPage:!0,hasModal:!1,actions:["manage","track"],dataSource:"api"},detailPage:{enabled:!0,route:"/cards/[cardName]/detail/[id]"},modal:{enabled:!1},developer:{name:"Education Management System",version:"2.0.0",description:"集成化教育管理卡片包，提供完整的教育解决方案"}}};class n{static registerPackage(e){this.packages.set(e.packageId,e),e.subCards.forEach(t=>{this.subCardToPackage.set(t.cardId,e.packageId)})}static getAllPackages(){return Array.from(this.packages.values())}static getMainCards(){return Array.from(this.packages.values()).map(e=>{var t,a;let l=r.U.get(e.mainCard.cardId);return{id:e.mainCard.cardId,name:e.packageName,category:e.packageCategory,component:(null==l?void 0:l.component)||e.mainCard.component,businessFlow:e.businessFlow,developer:e.developer,packageId:e.packageId,hasSubCards:e.subCards.length>0,hasDetailPage:(null==(t=e.detailPage)?void 0:t.enabled)||!1,hasModal:(null==(a=e.modal)?void 0:a.enabled)||!1}})}static getSubCardsByMainCard(e){let t=Array.from(this.packages.values()).find(t=>t.mainCard.cardId===e);return t?t.subCards.map(e=>{let t=r.U.get(e.cardId);return{packageId:e.packageId,id:e.cardId,name:e.displayName,component:(null==t?void 0:t.component)||null,type:e.type,category:e.category}}).filter(e=>null!==e.component):[]}static isMainCard(e){return Array.from(this.packages.values()).some(t=>t.mainCard.cardId===e)}static isSubCard(e){return this.subCardToPackage.has(e)}static getPackageBySubCard(e){let t=this.subCardToPackage.get(e);return t&&this.packages.get(t)||null}static getPackage(e){return this.packages.get(e)||null}static supportsDetailPage(e){var t;let a=this.getPackageByMainCard(e);return(null==a||null==(t=a.detailPage)?void 0:t.enabled)||!1}static supportsModal(e){var t;let a=this.getPackageByMainCard(e);return(null==a||null==(t=a.modal)?void 0:t.enabled)||!1}static getDetailPageRoute(e){var t;let a=this.getPackageByMainCard(e);return(null==a||null==(t=a.detailPage)?void 0:t.route)||null}static getPackageByMainCard(e){return Array.from(this.packages.values()).find(t=>t.mainCard.cardId===e)||null}static async initializePackages(){Object.values(l).forEach(e=>{let t=r.U.get(e.mainCard.cardId);t&&(e.mainCard.component=t.component),this.registerPackage(e)})}}n.packages=new Map,n.subCardToPackage=new Map,n.initializePackages()},54890:(e,t,a)=>{a.d(t,{AppHeader:()=>c});var r=a(89835),l=a(55931),n=a(15496),s=a(76539),i=a(18959),o=a(79588);function c(e){let{title:t,showBackButton:a=!1,className:c}=e,[d,u]=(0,l.useState)(!1),m=(0,o.useRouter)();return(0,l.useEffect)(()=>{let e=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,r.jsxs)("header",{className:(0,n.cn)("fixed top-0 left-0 right-0 z-30 flex items-center justify-between p-3 h-14 transition-all duration-300",{"bg-white/80 backdrop-blur-lg shadow-sm":d,"bg-transparent shadow-none":!d},c),children:[(0,r.jsx)("div",{className:"flex-1",children:a&&(0,r.jsx)("button",{onClick:()=>m.back(),className:"p-2 rounded-full hover:bg-gray-100/50",children:(0,r.jsx)(s.A,{className:"w-6 h-6 text-gray-800"})})}),(0,r.jsx)("div",{className:"flex-1 text-center",children:(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900 whitespace-nowrap inline-block",children:t})}),(0,r.jsx)("div",{className:"flex-1 flex justify-end items-center space-x-1",children:(0,r.jsx)("button",{className:(0,n.cn)("p-2 rounded-full hover:bg-gray-100/50 transition-opacity duration-300",{"opacity-100":d,"opacity-0 pointer-events-none":!d}),children:(0,r.jsx)(i.A,{className:"w-6 h-6 text-gray-800"})})})]})}},59213:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},62780:(e,t,a)=>{a.d(t,{E:()=>u});var r=a(89835),l=a(55931),n=a(15496),s=a(85794),i=a(77908),o=a(77860),c=a(41657),d=a(84215);function u(e){var t;let{cardId:a,items:u,values:m,onValueChange:p,className:g}=e,{theme:h}=(0,c.b)(),[y,f]=(0,l.useState)(!1),[x,b]=(0,l.useState)(null);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,n.cn)("flex flex-nowrap overflow-x-auto gap-3 pb-2 scrollbar-hide",g),children:u.map(e=>{var t,a;let l=m[e.category]||e.defaultValue||(null==(t=e.options[0])?void 0:t.value)||"",i=(null==(a=e.options.find(e=>e.value===l))?void 0:a.label)||"";return(0,r.jsxs)("button",{onClick:()=>{b(e.category),f(!0)},className:(0,n.cn)("group flex items-center gap-2 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-300 flex-shrink-0","bg-white/60 backdrop-blur-md border border-gray-200/40","hover:bg-white/80 hover:border-gray-300/60 hover:scale-105","focus:outline-none focus:ring-2 focus:ring-gray-500/20","shadow-sm hover:shadow-lg"),style:{color:h.textColor,fontFamily:h.fontFamily},children:[(0,r.jsx)("span",{style:{color:h.textColor,opacity:.7},className:"group-hover:opacity-90",children:e.category}),(0,r.jsx)("span",{style:{color:h.textColor},className:"font-semibold group-hover:opacity-90",children:i}),(0,r.jsx)(s.A,{style:{color:h.textColor,opacity:.6},className:"w-4 h-4 group-hover:opacity-80 transition-transform group-hover:rotate-180"})]},e.category)})}),(0,r.jsx)(o.J,{isOpen:y,onClose:()=>{f(!1),b(null)},title:x?"选择".concat(x):"选择筛选条件",children:(0,r.jsx)("div",{className:"space-y-2",children:x&&(null==(t=u.find(e=>e.category===x))?void 0:t.options.map(e=>{var t;let l=(m[x]||(null==(t=u.find(e=>e.category===x))?void 0:t.defaultValue)||"")===e.value;return(0,r.jsxs)("button",{onClick:()=>{var t;return t=e.value,void(d.U.selectFilter(a,e),p(x,t),f(!1),b(null))},className:(0,n.cn)("w-full flex items-center justify-between px-4 py-4 text-left text-sm transition-all duration-200 rounded-xl","hover:bg-gray-50 active:scale-98",l?"bg-gray-100 font-semibold border border-gray-300":""),style:{color:h.textColor,fontFamily:h.fontFamily},children:[(0,r.jsx)("span",{children:e.label}),l&&(0,r.jsx)(i.A,{style:{color:h.textColor},className:"w-5 h-5"})]},e.value)}))})})]})}},65794:(e,t,a)=>{a.d(t,{a:()=>s,g:()=>n});var r=a(12680),l=a(84215);let n={"job-position":{id:"String",title:"String",salary:"String",location:"String",demandGrowth:"String",salaryGrowth:"String",locale:"String"},"job-salary-overview":{rankingData:[{name:"String",ranl:"Number"}],salaryDistribution:[{range:"String",percentage:"Number"}]},"job-posting":{title:"String",company:"String",location:"String",salary:"String",experience:"String",education:"String",tags:"String[]"},"related-jobs-list":{title:"String",avgSalary:"String",location:"String",education:"String",experience:"String",jobType:"String"},"job-experience-ratio":{title:"String",description:"String",list:[{name:"String",value:"Number",jobs:"Number"}]},"job-header":{title:"String",salary:"String",location_province:"String",location_city:"String",location_district:"String",education:"String",experience:"String",employmentType:"String"},"job-benefits":{title:"String",benefits:"String[]"},"job-requirements":{title:"String",requirements:"String[]"},"apply-resume":{buttonText:"String",href:"String"},"job-detail-intro":{title:"String",description:"String",avgMonthlySalary:"String",dataSource:"String"},"education-salary-requirements":{title:"String",description:"String",data:[{label:"String",value:"String",percentage:"Number",color:"String"}]},"job-prospect-trend":{title:"String",monthlyNewJobs:"String",monthlyLabel:"String",rankText:"String",chartData:[{month:"String",value:"Number"}]},"job-city-ranking":{title:"String",description:"String",data:[{label:"String",value:"String|Number",percentage:"Number"}]},"monthly-job-growth":{title:"String",chartData:[{month:"String",jobs:"Number"}]},"ability-requirements-radar":{title:"String",chartData:[{subject:"String",value:"Number",fullMark:"Number"}]},"company-info":{name:"String",logo:"String",description:"String"},"instructor-courses-list":{id:"String",name:"String",duration:"String",students:"Number",certificate:"String",tags:"String[]"}},s=async()=>{var e,t;let a=localStorage.getItem("APPLICATION_CONFIG"),n=(null==(t=(a?JSON.parse(a):{}).config)||null==(e=t.clientManifest)?void 0:e.dataMappings)||{},s=[];Object.keys(n).forEach(async e=>{let[t,a]=e.split("::"),[i,o,c]=a.split("_");s.push(new Promise(async(a,s)=>{let d,u,m=n[e];"table"===i?(d=(await r.L.get("/api/records/".concat(o,"?noAuth=true"))).data,u=[],d.forEach((e,t)=>{let a={};Object.keys(m).forEach(t=>{if(t.indexOf("[].")>-1){let r=t.split("[].");a[r[0]]||(a[r[0]]=[]);let l=m[t].split(".");e[l[0]].forEach((e,t)=>{let n={};e.images.concat(e.numbers).concat(e.texts).forEach(e=>{n[e.id]=e}),a[r[0]][t]||(a[r[0]][t]={}),a[r[0]][t][r[1]]=n[l[1]].value})}else a[t]=e[m[t]]}),u.push(a)})):"record"===i&&(d=await r.L.get("/api/records/".concat(o,"/").concat(c,"?noAuth=true")),u={},Object.keys(m).forEach(e=>{if(e.indexOf("[].")>-1){let t=e.split("[].");u[t[0]]||(u[t[0]]=[]);let a=m[e].split(".");d[a[0]].forEach((e,r)=>{let l={};e.images.concat(e.numbers).concat(e.texts).forEach(e=>{l[e.id]=e}),u[t[0]][r]||(u[t[0]][r]={}),u[t[0]][r][t[1]]=l[a[1]].value})}else u[e]=d[m[e]]})),l.U.setData(t,u,d),a(!0)}))}),await Promise.all(s)}},73607:(e,t,a)=>{a.d(t,{Cf:()=>u,L3:()=>p,c7:()=>m,lG:()=>o});var r=a(89835),l=a(55931),n=a(11353),s=a(68232),i=a(15496);let o=n.bL;n.l9;let c=n.ZL;n.bm;let d=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});d.displayName=n.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,children:l,...o}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsxs)(n.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...o,children:[l,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(s.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};m.displayName="DialogHeader";let p=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});p.displayName=n.hE.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(n.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...l})}).displayName=n.VY.displayName},76865:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(51894).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])}}]);