"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{11012:(e,s,a)=>{a.d(s,{SQ:()=>u,_2:()=>f,lp:()=>x,mB:()=>p,rI:()=>c,ty:()=>m});var t=a(89835),l=a(55931),r=a(13353),n=a(40612),d=a(77908),o=a(73388),i=a(15496);let c=r.bL,m=r.l9;r.YJ,r.ZL,r.Pb,r.z6,l.forwardRef((e,s)=>{let{className:a,inset:l,children:d,...o}=e;return(0,t.jsxs)(r.ZP,{ref:s,className:(0,i.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...o,children:[d,(0,t.jsx)(n.A,{className:"ml-auto"})]})}).displayName=r.ZP.displayName,l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.G5,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=r.G5.displayName;let u=l.forwardRef((e,s)=>{let{className:a,sideOffset:l=4,...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsx)(r.UC,{ref:s,sideOffset:l,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});u.displayName=r.UC.displayName;let f=l.forwardRef((e,s)=>{let{className:a,inset:l,...n}=e;return(0,t.jsx)(r.q7,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...n})});f.displayName=r.q7.displayName,l.forwardRef((e,s)=>{let{className:a,children:l,checked:n,...o}=e;return(0,t.jsxs)(r.H_,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:n,...o,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(d.A,{className:"h-4 w-4"})})}),l]})}).displayName=r.H_.displayName,l.forwardRef((e,s)=>{let{className:a,children:l,...n}=e;return(0,t.jsxs)(r.hN,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(o.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=r.hN.displayName;let x=l.forwardRef((e,s)=>{let{className:a,inset:l,...n}=e;return(0,t.jsx)(r.JU,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...n})});x.displayName=r.JU.displayName;let p=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.wv,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});p.displayName=r.wv.displayName},36449:(e,s,a)=>{a.d(s,{IO:()=>r.I,IQ:()=>l.I,Su:()=>t.S});var t=a(25597),l=a(20537);a(55098),a(89407);var r=a(83953)},68268:(e,s,a)=>{a.d(s,{BK:()=>c,eu:()=>i,q5:()=>m});var t=a(89835),l=a(55931),r=a(84969),n=a(7951),d=a(15496);let o=(0,n.F)("relative flex shrink-0 overflow-hidden rounded-full",{variants:{size:{sm:"h-8 w-8",default:"h-10 w-10",lg:"h-12 w-12",xl:"h-16 w-16"}},defaultVariants:{size:"default"}}),i=l.forwardRef((e,s)=>{let{className:a,size:l,...n}=e;return(0,t.jsx)(r.Root,{ref:s,className:(0,d.cn)(o({size:l}),a),...n})});i.displayName=r.Root.displayName;let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Image,{ref:s,className:(0,d.cn)("aspect-square h-full w-full",a),...l})});c.displayName=r.Image.displayName;let m=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)(r.Fallback,{ref:s,className:(0,d.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...l})});m.displayName=r.Fallback.displayName},83953:(e,s,a)=>{a.d(s,{I:()=>b});var t=a(89835),l=a(55931),r=a(15496),n=a(68268),d=a(92475),o=a(11012),i=a(42039),c=a(38474),m=a(98118),u=a(24215),f=a(97909),x=a(91),p=a(91591),h=a(79514),N=a(79588);function b(e){var s,a,b;let{className:v,size:w="md",showDropdown:g=!0,onClick:j}=e,{user:y,isAuthenticated:k,logout:C}=(0,h.A)(),R=(0,N.useRouter)(),[_,A]=(0,l.useState)(!1),z={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"},I=()=>{R.push("/auth/login")},B=async()=>{A(!0);try{C()}catch(e){console.error("退出登录失败:",e)}finally{A(!1)}},q=()=>{R.push("/profile")};return k?(0,t.jsx)("div",{className:(0,r.cn)("flex items-center",v),children:g?(0,t.jsxs)(o.rI,{children:[(0,t.jsx)(o.ty,{asChild:!0,children:(0,t.jsxs)("button",{onClick:j,className:(0,r.cn)("relative rounded-full transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50",z[w]),children:[(0,t.jsxs)(n.eu,{className:(0,r.cn)("border-2 border-white shadow-lg",z[w]),children:[(0,t.jsx)(n.BK,{src:null==y?void 0:y.avatar,alt:null==y?void 0:y.name}),(0,t.jsx)(n.q5,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white font-semibold",children:(null==y||null==(s=y.name)?void 0:s.charAt(0))||"U"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"})]})}),(0,t.jsxs)(o.SQ,{align:"end",className:"w-64",children:[(0,t.jsx)("div",{className:"px-3 py-2 border-b",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)(n.eu,{className:"w-10 h-10",children:[(0,t.jsx)(n.BK,{src:null==y?void 0:y.avatar,alt:null==y?void 0:y.name}),(0,t.jsx)(n.q5,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white",children:(null==y||null==(a=y.name)?void 0:a.charAt(0))||"U"})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",children:null==y?void 0:y.name}),(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:null==y?void 0:y.phone}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 mt-1",children:[(0,t.jsx)(u.A,{className:"w-3 h-3 text-yellow-500"}),(0,t.jsxs)("span",{className:"text-xs text-gray-600",children:[null==y?void 0:y.points," 积分"]})]})]})]})}),(0,t.jsxs)(o._2,{onClick:q,className:"cursor-pointer",children:[(0,t.jsx)(i.A,{className:"w-4 h-4 mr-2"}),"个人中心"]}),(0,t.jsxs)(o._2,{onClick:()=>{R.push("/profile/settings")},className:"cursor-pointer",children:[(0,t.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"设置"]}),(0,t.jsx)(o.mB,{}),(0,t.jsxs)(o._2,{onClick:B,className:"cursor-pointer text-red-600 focus:text-red-600",disabled:_,children:[(0,t.jsx)(x.A,{className:"w-4 h-4 mr-2"}),_?"退出中...":"退出登录"]})]})]}):(0,t.jsxs)("button",{onClick:j||q,className:(0,r.cn)("relative rounded-full transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500/50",z[w]),children:[(0,t.jsxs)(n.eu,{className:(0,r.cn)("border-2 border-white shadow-lg",z[w]),children:[(0,t.jsx)(n.BK,{src:null==y?void 0:y.avatar,alt:null==y?void 0:y.name}),(0,t.jsx)(n.q5,{className:"bg-gradient-to-br from-blue-500 to-purple-600 text-white font-semibold",children:(null==y||null==(b=y.name)?void 0:b.charAt(0))||"U"})]}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full"}),(null==y?void 0:y.points)&&y.points>1e3&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(p.A,{className:"w-3 h-3 text-white"})})]})}):(0,t.jsx)("div",{className:(0,r.cn)("flex items-center space-x-2",v),children:g?(0,t.jsx)(o.rI,{children:(0,t.jsx)(o.ty,{asChild:!0,children:(0,t.jsxs)(d.$,{variant:"outline",size:"sm",className:"flex items-center space-x-2 bg-white/20 backdrop-blur-md border-white/30 hover:bg-white/30",onClick:I,children:[(0,t.jsx)(i.A,{className:"w-4 h-4"}),"登录"]})})}):(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(d.$,{variant:"outline",size:"sm",onClick:I,className:"bg-white/20 backdrop-blur-md border-white/30 hover:bg-white/30",children:[(0,t.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"登录"]}),(0,t.jsxs)(d.$,{variant:"default",size:"sm",onClick:()=>{R.push("/auth/register")},className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700",children:[(0,t.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"注册"]})]})})}},84089:(e,s,a)=>{a.d(s,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d});var t=a(89835),l=a(55931),r=a(15496);let n=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let d=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});d.displayName="CardHeader";let o=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle";let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})});i.displayName="CardDescription";let c=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"}}]);