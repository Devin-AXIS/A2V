"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7655],{3976:(e,r,t)=>{t.d(r,{Z:()=>l,q:()=>s});var o=t(89835),a=t(55931);let n=(0,a.createContext)(void 0);function s(e){let{children:r}=e,[t,s]=(0,a.useState)(!1),l=(0,a.useMemo)(()=>({isFrosted:t,setIsFrosted:s}),[t]);return(0,o.jsx)(n.Provider,{value:l,children:r})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useFrostedEffect must be used within a FrostedEffectProvider");return e}},11408:(e,r,t)=>{t.d(r,{j:()=>l});var o=t(55931),a=t(79588),n=t(17131),s=(t(12680),t(29088));function l(){var e,r;let{tokens:t,updateTokens:l}=(0,n.y)(),c=(0,o.useRef)(!1),i=(0,o.useRef)(null),d=void 0!==s&&(null==(e=s.env)?void 0:e.NEXT_PUBLIC_API_BASE)||"http://47.94.52.142::3007",u=(0,a.usePathname)();(0,o.useMemo)(()=>{try{if(u){let e=u.split("/"),r=e.indexOf("app");if(r>=0&&e[r+1])return e[r+1];let t=e.indexOf("preview");if(t>=0&&e[t+1])return"preview-".concat(e[t+1])}{let e=localStorage.getItem("CURRENT_APP_ID")||localStorage.getItem("APP_ID");if(e)return e}}catch(e){}return"global"},[u]);let h=(0,o.useRef)(!1),f=(0,o.useRef)(!1),b=(0,o.useCallback)(e=>{let r="";switch(e){case"card":r='[class*="card"], [class*="Card"], .card, .Card';break;case"button":r='button, .btn, [class*="button"], [class*="Button"]';break;case"input":r='input, textarea, select, [class*="input"], [class*="Input"]';break;case"modal":r='[class*="modal"], [class*="Modal"]'}let t=document.querySelectorAll(r);if(t.length>0){let e=t[0],r=window.getComputedStyle(e).borderRadius;if("0px"===r||"0"===r)return"none";if("2px"===r||"0.125rem"===r)return"sm";if("6px"===r||"0.375rem"===r)return"md";if("8px"===r||"0.5rem"===r)return"lg";if("12px"===r||"0.75rem"===r)return"xl";if("9999px"===r)return"full"}return"md"},[]),g=(0,o.useCallback)(()=>{if(c.current||f.current)return;let e=b("card"),r=b("button"),o=b("input"),a=b("modal");i.current={card:e,button:r,input:o,modal:a},(null==t?void 0:t.globalRadius)&&l({...t,globalRadius:{...t.globalRadius,presets:{...t.globalRadius.presets,default:{name:"默认",description:"页面刷新后的真实初始状态",values:{card:e,button:r,input:o,modal:a}}}}}),c.current=!0},[t,l,b]);(0,o.useEffect)(()=>{let e=()=>{setTimeout(()=>{g()},1e3)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e();let r=()=>{setTimeout(()=>{g()},500)};if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",r),()=>document.removeEventListener("DOMContentLoaded",r)},[g]),(0,o.useEffect)(()=>((async()=>{try{return}catch(e){console.log("[GlobalRadius] GET failed",e)}finally{h.current=!0}})(),()=>{}),[d,null]),(0,o.useEffect)(()=>{h.current=!0},[null]);let m=(0,o.useMemo)(()=>(null==t?void 0:t.globalRadius)?t.globalRadius.active:"default",[null==t?void 0:t.globalRadius]),p=(0,o.useCallback)(e=>{var r,o,a,n,s;if(!(null==t?void 0:t.globalRadius))return(null==t||null==(a=t.radius)?void 0:a.md)||"0.375rem";let l=t.globalRadius.active,c=t.globalRadius.presets[l];if(!c)return(null==t||null==(n=t.radius)?void 0:n.md)||"0.375rem";let d=c.values[e],u=null==t||null==(r=t.radius)?void 0:r[d];if("default"===l&&i.current){let r=i.current[e],o=null==t||null==(s=t.radius)?void 0:s[r];if(o)return o}return u||(null==t||null==(o=t.radius)?void 0:o.md)||"0.375rem"},[t]),v=(0,o.useCallback)(async e=>{try{return}catch(e){}},[d,null,null==t?void 0:t.globalRadius]),x=(0,o.useCallback)(e=>{if(null==t?void 0:t.globalRadius){if(console.log("\uD83D\uDD04 切换到预设: ".concat(e)),"default"===e&&i.current){console.log("\uD83C\uDFAF 切换到默认预设，使用捕获的初始状态:",i.current);let r={...t,globalRadius:{...t.globalRadius,active:e,presets:{...t.globalRadius.presets,default:{name:"默认",description:"页面刷新后的真实初始状态",values:{card:i.current.card,button:i.current.button,input:i.current.input,modal:i.current.modal}}}}};l(r),v(r.globalRadius)}else{let r={...t,globalRadius:{...t.globalRadius,active:e}};l(r),v(r.globalRadius)}setTimeout(()=>{k()},0)}},[t,l,i,v]),y=(0,o.useCallback)(()=>{if(!(null==t?void 0:t.globalRadius))return;let e=b("card"),r=b("button"),o=b("input"),a=b("modal"),n={...t,globalRadius:{...t.globalRadius,presets:{...t.globalRadius.presets,default:{name:"默认",description:"当前页面的实际状态",values:{card:e,button:r,input:o,modal:a}}}}};l(n),v(n.globalRadius),i.current={card:e,button:r,input:o,modal:a},console.log('✅ 已更新"默认"预设为当前状态:',i.current)},[t,l,b,v]),C=(0,o.useCallback)(()=>{if(!(null==t?void 0:t.globalRadius))return"";let e=":root {\n";Object.entries(t.globalRadius.presets).forEach(r=>{let[o,a]=r;Object.entries(a.values).forEach(r=>{var a;let[n,s]=r,l=(null==(a=t.radius)?void 0:a[s])||"0.375rem";e+="  --radius-".concat(o,"-").concat(n,": ").concat(l,";\n")})});let r=t.globalRadius.presets[t.globalRadius.active];return r&&Object.entries(r.values).forEach(r=>{var o;let[a,n]=r,s=(null==(o=t.radius)?void 0:o[n])||"0.375rem";e+="  --radius-current-".concat(a,": ").concat(s,";\n")}),e+="}"},[t]),k=(0,o.useCallback)(()=>{if(!(null==t?void 0:t.globalRadius)||!t.globalRadius.presets[t.globalRadius.active])return;let e=p("card"),r=p("button");"rounded"===t.globalRadius.active&&(e="9999px",r="9999px"),"default"===t.globalRadius.active&&(e="0.75rem",r="0.75rem");let o=document.documentElement;o.style.setProperty("--radius-current-card",e),o.style.setProperty("--radius-current-button",r);let a=document.getElementById("radius-override-styles");a||((a=document.createElement("style")).id="radius-override-styles",document.head.appendChild(a)),a.textContent='\n      /* 只影响卡片组件 - 使用更精确的选择器 */\n      .rounded-xl.group,\n      [class*="card"].rounded-xl,\n      [class*="Card"].rounded-xl,\n      .card.rounded-xl,\n      .Card.rounded-xl,\n      [data-card].rounded-xl,\n      [data-component="card"].rounded-xl,\n      /* AppCard 组件的特定选择器 */\n      .group.rounded-xl,\n      /* 确保只影响卡片容器，不影响内部元素 */\n      .group.rounded-xl:not(button):not(input):not(textarea):not(select):not(.btn):not([class*="button"]) {\n        border-radius: var(--radius-current-card) !important;\n        transition: border-radius 0.2s ease-in-out;\n      }\n      \n      /* 影响按钮组件 - 只针对特定按钮 */\n      button[class*="rounded-lg"],\n      button[class*="rounded-md"],\n      button[class*="rounded-xl"],\n      .btn[class*="rounded-lg"],\n      .btn[class*="rounded-md"],\n      .btn[class*="rounded-xl"],\n      [class*="button"][class*="rounded-lg"],\n      [class*="button"][class*="rounded-md"],\n      [class*="button"][class*="rounded-xl"] {\n        border-radius: var(--radius-current-button) !important;\n        transition: border-radius 0.2s ease-in-out;\n      }\n      \n      /* 明确排除非目标元素，确保它们保持原有圆角 */\n      input:not([class*="card"]):not([class*="Card"]),\n      textarea:not([class*="card"]):not([class*="Card"]),\n      select:not([class*="card"]):not([class*="Card"]) {\n        /* 保持原有圆角，不受全局配置影响 */\n      }\n    '},[t,p]),w=(0,o.useCallback)(()=>{if(!(null==t?void 0:t.globalRadius))return;let e=C();if(!e)return;let r=document.getElementById("global-radius-variables");r||((r=document.createElement("style")).id="global-radius-variables",document.head.appendChild(r)),r.textContent=e,k()},[C,k,null==t?void 0:t.globalRadius]);return{activePreset:m,presets:(null==t||null==(r=t.globalRadius)?void 0:r.presets)||{},getComponentRadius:p,setActivePreset:x,generateRadiusCSSVariables:C,applyRadiusToDOM:w,applyRadiusToExistingComponents:k,captureInitialRadius:g,updateDefaultPreset:y,initialRadiusValues:i.current}}},12680:(e,r,t)=>{t.d(r,{L:()=>l});var o=t(77455),a=t(29088);let n=(()=>{let e=o.A.create({baseURL:a.env.NEXT_PUBLIC_API_BASE_URL||"http://47.94.52.142::3007",timeout:1e4,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use(e=>{let r=window.localStorage.getItem("aino_auth_token")||window.localStorage.getItem("aino_token")||"";return r&&(e.headers.Authorization="Bearer ".concat(r)),"get"===e.method&&(e.params={...e.params,_t:Date.now()}),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,e=>{var r;return(null==(r=e.response)?void 0:r.status)===401&&(localStorage.removeItem("aino_auth_token"),window.location.href="/auth/login"),Promise.reject(e)}),e})(),s=async e=>{try{return(await n(e)).data}catch(o){var r;if(!o.response)throw Error("Network error - please check your connection");let e=o.response.status,t=(null==(r=o.response.data)?void 0:r.message)||o.message;throw Error("Request failed (".concat(e,"): ").concat(t))}},l={get:(e,r)=>s({...r,method:"GET",url:e}),post:(e,r,t)=>s({...t,method:"POST",url:e,data:r}),put:(e,r,t)=>s({...t,method:"PUT",url:e,data:r}),patch:(e,r,t)=>s({...t,method:"PATCH",url:e,data:r}),delete:(e,r)=>s({...r,method:"DELETE",url:e}),upload:(e,r,t)=>{let o=new FormData;return o.append("file",r),s({...t,method:"POST",url:e,data:o,headers:{"Content-Type":"multipart/form-data",...null==t?void 0:t.headers}})},download:async(e,r,t)=>{try{let o=await n({...t,method:"GET",url:e,responseType:"blob"}),a=new Blob([o.data]),s=window.URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=r||"download",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)}catch(e){throw Error("Download failed")}}}},13557:(e,r,t)=>{t.d(r,{QR:()=>d,Y3:()=>u});var o=t(89835),a=t(55931),n=t(17131),s=t(41657);class l{static getInstance(){return l.instance||(l.instance=new l),l.instance}setDesignConfig(e,r){this.designTokens=e,this.cardTheme=r}validateComponent(e,r){let t=[],o=[];return this.designTokens&&this.validateColorUsage(e,r,t,o),this.designTokens&&this.validateFontUsage(e,r,t,o),this.cardTheme&&this.validateCardTheme(e,r,t,o),this.validateLayout(e,r,t,o),{isValid:0===t.length,violations:t,recommendations:o}}validateColorUsage(e,r,t,o){if(!this.designTokens)return;let a=this.findHardcodedColors(r);a.length>0&&(t.push("组件 ".concat(e," 使用了硬编码颜色: ").concat(a.join(", "))),o.push("使用 designTokens 中的颜色变量"));let n=Object.keys(this.designTokens.colors),s=this.extractUsedColors(r).filter(e=>!n.includes(e));s.length>0&&(t.push("组件 ".concat(e," 使用了未定义的主题颜色: ").concat(s.join(", "))),o.push("只使用 designTokens.colors 中定义的颜色"))}validateFontUsage(e,r,t,o){if(!this.designTokens)return;let a=this.findHardcodedFonts(r);a.length>0&&(t.push("组件 ".concat(e," 使用了硬编码字体: ").concat(a.join(", "))),o.push("使用 designTokens 中的字体变量"))}validateCardTheme(e,r,t,o){this.cardTheme&&(this.hasCardThemeUsage(r)||o.push("使用 useCardTheme() 获取卡片主题配置"))}validateLayout(e,r,t,o){this.hasUnifiedSpacing(r)||o.push("使用统一的间距系统 (p-4, m-6 等)"),this.hasUnifiedRadius(r)||o.push("使用统一的圆角系统 (rounded-lg, rounded-xl 等)")}getComponentRecommendations(e){return this.designTokens?{colors:Object.keys(this.designTokens.colors),fonts:Object.keys(this.designTokens.typography.fonts),spacing:["p-2","p-4","p-6","p-8","m-2","m-4","m-6","m-8"],radius:["rounded","rounded-lg","rounded-xl","rounded-2xl"]}:{colors:[],fonts:[],spacing:[],radius:[]}}generateConstraintReport(e){let r={totalComponents:e.length,validComponents:0,invalidComponents:0,violations:[]};return e.forEach(e=>{let{name:t,props:o}=e,a=this.validateComponent(t,o);a.isValid?r.validComponents++:(r.invalidComponents++,r.violations.push({component:t,violations:a.violations,recommendations:a.recommendations}))}),r}isComponentCompliant(e,r){return this.validateComponent(e,r).isValid}findHardcodedColors(e){return[]}findHardcodedFonts(e){return[]}extractUsedColors(e){return[]}hasCardThemeUsage(e){return!1}hasUnifiedSpacing(e){return!1}hasUnifiedRadius(e){return!1}constructor(){this.designTokens=null,this.cardTheme=null}}let c=l.getInstance(),i=(0,a.createContext)(void 0);function d(e){let{children:r}=e,{tokens:t}=(0,n.y)(),{theme:l}=(0,s.b)();return(0,a.useEffect)(()=>{t&&l&&c.setDesignConfig(t,l)},[t,l]),(0,a.useEffect)(()=>{},[t,l]),(0,o.jsx)(i.Provider,{value:{validateComponent:(e,r)=>c.validateComponent(e,r),getRecommendations:e=>c.getComponentRecommendations(e),generateReport:e=>c.generateConstraintReport(e),enforceConstraints:()=>{}},children:r})}function u(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useUnifiedDesignConstraints must be used within a UnifiedDesignConstraintsProvider");return e}},16545:(e,r,t)=>{t.d(r,{F:()=>l,Y:()=>s});var o=t(89835),a=t(55931);let n=(0,a.createContext)(void 0);function s(e){let{children:r,initialLocale:t}=e,[s,l]=a.useState(t);(0,a.useEffect)(()=>{"undefined"!=typeof document&&(document.documentElement.lang=s)},[s]);let c=a.useMemo(()=>({locale:s,setLocale:l}),[s]);return(0,o.jsx)(n.Provider,{value:c,children:r})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useLocale must be used within a LocaleProvider");return e}},19707:(e,r,t)=>{t.d(r,{K1:()=>c,OQ:()=>n,P3:()=>a,cP:()=>s,ij:()=>l,iq:()=>o});let o={"surface.default":{background:"hsl(var(--background))",color:"hsl(var(--foreground))",border:"hsl(var(--border))",fallback:["hsl(var(--neutral-50))","hsl(var(--neutral-100))"]},"surface.secondary":{background:"hsl(var(--background-secondary))",color:"hsl(var(--foreground-secondary))",border:"hsl(var(--border))",fallback:["hsl(var(--neutral-100))","hsl(var(--neutral-200))"]},"surface.tertiary":{background:"hsl(var(--background-tertiary))",color:"hsl(var(--foreground-tertiary))",border:"hsl(var(--border))",fallback:["hsl(var(--neutral-200))","hsl(var(--neutral-300))"]},"surface.card":{background:"hsl(var(--card))",color:"hsl(var(--card-foreground))",border:"hsl(var(--border))",shadow:"var(--shadow-sm)",fallback:["hsl(var(--background))","hsl(var(--neutral-50))"]},"surface.popover":{background:"hsl(var(--popover))",color:"hsl(var(--popover-foreground))",border:"hsl(var(--border))",shadow:"var(--shadow-lg)",fallback:["hsl(var(--card))","hsl(var(--background))"]},"surface.overlay":{background:"hsl(var(--background) / 0.8)",color:"hsl(var(--foreground))",border:"hsl(var(--border))",backdrop:"blur(8px)",fallback:["hsl(var(--background) / 0.9)","hsl(var(--neutral-900) / 0.8)"]},"text.primary":{color:"hsl(var(--foreground))",fallback:["hsl(var(--neutral-900))","hsl(var(--neutral-800))"]},"text.secondary":{color:"hsl(var(--foreground-secondary))",fallback:["hsl(var(--neutral-700))","hsl(var(--neutral-600))"]},"text.tertiary":{color:"hsl(var(--foreground-tertiary))",fallback:["hsl(var(--neutral-500))","hsl(var(--neutral-400))"]},"text.inverse":{color:"hsl(var(--foreground-inverse))",fallback:["hsl(var(--neutral-50))","hsl(var(--neutral-100))"]},"text.muted":{color:"hsl(var(--muted-foreground))",fallback:["hsl(var(--neutral-500))","hsl(var(--neutral-400))"]},"primary.default":{background:"hsl(var(--primary-500))",color:"hsl(var(--primary-foreground))",border:"hsl(var(--primary-500))",fallback:["hsl(var(--primary-600))","hsl(var(--primary-700))"]},"primary.hover":{background:"hsl(var(--primary-600))",color:"hsl(var(--primary-foreground))",border:"hsl(var(--primary-600))",fallback:["hsl(var(--primary-700))","hsl(var(--primary-800))"]},"primary.active":{background:"hsl(var(--primary-700))",color:"hsl(var(--primary-foreground))",border:"hsl(var(--primary-700))",fallback:["hsl(var(--primary-800))","hsl(var(--primary-900))"]},"primary.focus":{background:"hsl(var(--primary-500))",color:"hsl(var(--primary-foreground))",border:"hsl(var(--ring))",ring:"hsl(var(--ring) / 0.2)",fallback:["hsl(var(--primary-600))","hsl(var(--ring))"]},"secondary.default":{background:"hsl(var(--secondary-500))",color:"hsl(var(--secondary-foreground))",border:"hsl(var(--secondary-500))",fallback:["hsl(var(--secondary-600))","hsl(var(--neutral-600))"]},"secondary.hover":{background:"hsl(var(--secondary-600))",color:"hsl(var(--secondary-foreground))",border:"hsl(var(--secondary-600))",fallback:["hsl(var(--secondary-700))","hsl(var(--neutral-700))"]},"success.default":{background:"hsl(var(--success-500))",color:"hsl(var(--success-foreground))",border:"hsl(var(--success-500))",fallback:["hsl(var(--success-600))","hsl(var(--success-700))"]},"success.hover":{background:"hsl(var(--success-600))",color:"hsl(var(--success-foreground))",border:"hsl(var(--success-600))",fallback:["hsl(var(--success-700))","hsl(var(--success-800))"]},"warning.default":{background:"hsl(var(--warning-500))",color:"hsl(var(--warning-foreground))",border:"hsl(var(--warning-500))",fallback:["hsl(var(--warning-600))","hsl(var(--warning-700))"]},"warning.hover":{background:"hsl(var(--warning-600))",color:"hsl(var(--warning-foreground))",border:"hsl(var(--warning-600))",fallback:["hsl(var(--warning-700))","hsl(var(--warning-800))"]},"danger.default":{background:"hsl(var(--destructive))",color:"hsl(var(--destructive-foreground))",border:"hsl(var(--destructive))",fallback:["hsl(var(--error-600))","hsl(var(--error-700))"]},"danger.hover":{background:"hsl(var(--destructive-600))",color:"hsl(var(--destructive-foreground))",border:"hsl(var(--destructive-600))",fallback:["hsl(var(--error-700))","hsl(var(--error-800))"]},"focus.ring":{ring:"hsl(var(--ring) / 0.2)",border:"hsl(var(--ring))",fallback:["hsl(var(--primary-500) / 0.2)","hsl(var(--primary-600))"]},"focus.visible":{outline:"2px solid hsl(var(--ring))",outlineOffset:"2px",fallback:["2px solid hsl(var(--primary-500))","2px solid hsl(var(--primary-600))"]},"selection.background":{background:"hsl(var(--primary-200) / 0.3)",fallback:["hsl(var(--primary-300) / 0.3)","hsl(var(--primary-400) / 0.3)"]},"selection.text":{color:"hsl(var(--primary-900))",fallback:["hsl(var(--primary-800))","hsl(var(--primary-700))"]},"input.default":{background:"hsl(var(--input))",color:"hsl(var(--input-foreground))",border:"hsl(var(--border-input))",fallback:["hsl(var(--background))","hsl(var(--neutral-100))"]},"input.focus":{background:"hsl(var(--input))",color:"hsl(var(--input-foreground))",border:"hsl(var(--ring))",ring:"hsl(var(--ring) / 0.1)",fallback:["hsl(var(--background))","hsl(var(--primary-500))"]},"input.error":{background:"hsl(var(--input))",color:"hsl(var(--destructive))",border:"hsl(var(--destructive))",ring:"hsl(var(--destructive) / 0.1)",fallback:["hsl(var(--background))","hsl(var(--error-500))"]},"input.disabled":{background:"hsl(var(--muted))",color:"hsl(var(--muted-foreground))",border:"hsl(var(--muted))",fallback:["hsl(var(--neutral-100))","hsl(var(--neutral-200))"]},"glass.soft":{background:"hsl(var(--background) / 0.7)",backdrop:"blur(4px)",border:"hsl(var(--border) / 0.3)",fallback:["hsl(var(--neutral-50) / 0.9)","hsl(var(--neutral-100) / 0.8)"]},"glass.medium":{background:"hsl(var(--background) / 0.8)",backdrop:"blur(8px)",border:"hsl(var(--border) / 0.4)",fallback:["hsl(var(--neutral-50) / 0.85)","hsl(var(--neutral-100) / 0.75)"]},"glass.strong":{background:"hsl(var(--background) / 0.9)",backdrop:"blur(16px)",border:"hsl(var(--border) / 0.5)",fallback:["hsl(var(--neutral-50) / 0.8)","hsl(var(--neutral-100) / 0.7)"]},"elevation.0":{shadow:"none",border:"hsl(var(--border))",fallback:["none","1px solid hsl(var(--neutral-200))"]},"elevation.1":{shadow:"var(--shadow-sm)",border:"hsl(var(--border))",fallback:["0 1px 2px 0 hsl(var(--neutral-900) / 0.05)","1px solid hsl(var(--neutral-200))"]},"elevation.2":{shadow:"var(--shadow-md)",border:"hsl(var(--border))",fallback:["0 4px 6px -1px hsl(var(--neutral-900) / 0.1)","1px solid hsl(var(--neutral-200))"]},"elevation.3":{shadow:"var(--shadow-lg)",border:"hsl(var(--border))",fallback:["0 10px 15px -3px hsl(var(--neutral-900) / 0.1)","1px solid hsl(var(--neutral-200))"]},"elevation.4":{shadow:"var(--shadow-xl)",border:"hsl(var(--border))",fallback:["0 20px 25px -5px hsl(var(--neutral-900) / 0.1)","1px solid hsl(var(--neutral-200))"]},"elevation.5":{shadow:"var(--shadow-2xl)",border:"hsl(var(--border))",fallback:["0 25px 50px -12px hsl(var(--neutral-900) / 0.25)","1px solid hsl(var(--neutral-200))"]}},a=[{name:"default",description:"默认语义上下文",tokens:o},{name:"high-contrast",description:"高对比度语义上下文",tokens:{"surface.default":{background:"hsl(var(--neutral-900))",color:"hsl(var(--neutral-50))",border:"hsl(var(--neutral-700))",fallback:["hsl(var(--neutral-800))","hsl(var(--neutral-900))"]},"text.primary":{color:"hsl(var(--neutral-50))",fallback:["hsl(var(--neutral-100))","hsl(var(--neutral-200))"]},"focus.ring":{ring:"hsl(var(--primary-400) / 0.4)",border:"hsl(var(--primary-400))",fallback:["hsl(var(--primary-300) / 0.5)","hsl(var(--primary-500))"]}}}];function n(e){var r;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=null==(r=a.find(e=>e.name===t))?void 0:r.tokens;return n?n[e]||o[e]:(console.warn("Semantic context '".concat(t,"' not found, falling back to default")),o[e])}function s(e){return o[e]?{isValid:!0}:{isValid:!1,error:"Semantic token '".concat(e,"' not found")}}function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",t=n(e,r);return(null==t?void 0:t.fallback)||[]}function c(){var e;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=(null==(e=a.find(e=>e.name===r))?void 0:e.tokens)||o,n="/* Semantic tokens for context: ".concat(r," */\n:root {\n");return Object.entries(t).forEach(e=>{let[r,t]=e,o="--".concat(r.replace(/\./g,"-"));t.background&&(n+="  ".concat(o,"-bg: ").concat(t.background,";\n")),t.color&&(n+="  ".concat(o,"-color: ").concat(t.color,";\n")),t.border&&(n+="  ".concat(o,"-border: ").concat(t.border,";\n")),t.shadow&&(n+="  ".concat(o,"-shadow: ").concat(t.shadow,";\n")),t.ring&&(n+="  ".concat(o,"-ring: ").concat(t.ring,";\n")),t.backdrop&&(n+="  ".concat(o,"-backdrop: ").concat(t.backdrop,";\n"))}),n+="}"}},29561:(e,r,t)=>{t.d(r,{n:()=>u,$:()=>h});var o=t(89835),a=t(55931),n=t(15433);let s=[{name:"现代",description:"现代简约风格，适合年轻用户",category:"modern",config:{fontColors:{heading:"#1f2937",body:"#4b5563"},componentColors:{primary:"#000000",secondary:"#8b5cf6",danger:"#f59e0b"},chartColors:{colors:["#000000","#8b5cf6","#f59e0b","#22c55e","#ef4444","#64748b"]}}},{name:"极简",description:"极简主义风格，适合追求简洁的用户",category:"minimal",config:{fontColors:{heading:"#000000",body:"#374151"},componentColors:{primary:"#000000",secondary:"#525252",danger:"#dc2626"},chartColors:{colors:["#171717","#525252","#9ca3af","#6b7280","#d1d5db","#e5e7eb"]}}},{name:"经典",description:"经典商务风格，适合企业应用",category:"classic",config:{fontColors:{heading:"#1e40af",body:"#374151"},componentColors:{primary:"#000000",secondary:"#64748b",danger:"#ef4444"},chartColors:{colors:["#000000","#64748b","#ef4444","#22c55e","#f59e0b","#9ca3af"]}}},{name:"自然",description:"自然生态风格，适合环保主题",category:"nature",config:{fontColors:{heading:"#166534",body:"#374151"},componentColors:{primary:"#22c55e",secondary:"#16a34a",danger:"#dc2626"},chartColors:{colors:["#22c55e","#16a34a","#4d7c0f","#f59e0b","#ef4444","#6b7280"]}}}];function l(e){return s.find(r=>r.name===e)}var c=t(12680),i=t(29088);let d=(0,a.createContext)(void 0);function u(e){var r;let{children:t}=e,[u,h]=(0,a.useState)(l("极简")||s[0]),[f,b]=(0,a.useState)(!1),g=void 0!==i&&(null==(r=i.env)?void 0:r.NEXT_PUBLIC_API_BASE)||"http://47.94.52.142::3007",m=(0,a.useCallback)(()=>{try{return localStorage.getItem("CURRENT_APP_ID")||localStorage.getItem("APP_ID")||null}catch(e){return null}},[]),p=(0,a.useCallback)(()=>{try{let e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},[]);(0,a.useEffect)(()=>{let e=!1;return(async()=>{try{let t=m();if(t){var r;let o="/api/page-configs/key/".concat(encodeURIComponent("unified-theme-".concat(t))),a=await c.L.get(o),n=null!=(r=null==a?void 0:a.data)?r:a,s=(null==n?void 0:n.themeName)||(null==n?void 0:n.name)||("string"==typeof n?n:void 0);if(s){let r=l(s);if(!e&&r){h(r),b(!0);return}}}}catch(e){}try{if(p()){let e=localStorage.getItem("aino_unified_theme");if(e){let r=l(e);r&&h(r)}}}catch(e){console.warn("Failed to load unified theme from localStorage:",e),h(l("极简")||s[0])}finally{e||b(!0)}})(),()=>{e=!0}},[g,m,p]),(0,a.useEffect)(()=>{if(f)try{p()&&localStorage.setItem("aino_unified_theme",u.name)}catch(e){console.warn("Failed to save unified theme to localStorage:",e)}},[u,f,p]),(0,a.useEffect)(()=>{if(f)return(async()=>{try{let e=m();if(!e)return;let r="/api/page-configs/key/".concat(encodeURIComponent("unified-theme-".concat(e)));await c.L.put(r,{themeName:u.name,updatedAt:Date.now()}).catch(()=>{})}catch(e){}})(),()=>{}},[g,m,u.name,f]);let v=(0,a.useCallback)(e=>{let r=l(e);r&&(h(r),y(r.config.fontColors),C(r.config.componentColors),k(r.config.chartColors))},[]),x=(0,a.useCallback)(()=>{let e=document.createElement("style");return e.id="unified-font-color-style",document.head.appendChild(e),e},[]),y=(0,a.useCallback)(e=>{document.documentElement.style.setProperty("--font-color-heading",e.heading),document.documentElement.style.setProperty("--font-color-body",e.body),(document.getElementById("unified-font-color-style")||x()).textContent="\n      h1, h2, h3, h4, h5, h6, .font-heading { color: ".concat(e.heading," !important; }\n      body, p, span, div, input, textarea, .font-body { color: ").concat(e.body," !important; }\n      /* 按钮文字颜色由智能对比度系统处理，不强制使用正文颜色 */\n    ")},[]),C=(0,a.useCallback)(e=>{document.documentElement.style.setProperty("--component-primary",e.primary),document.documentElement.style.setProperty("--component-secondary",e.secondary),document.documentElement.style.setProperty("--component-danger",e.danger);let r=e=>{let r=e.replace("#",""),t=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16);return(299*t+587*o+114*parseInt(r.substring(4,6),16))/1e3>128?"#000000":"#FFFFFF"},t=r(e.primary),o=r(e.secondary),a=r(e.danger);try{(0,n.Nr)("--primary-500",(0,n.nQ)(e.primary)),(0,n.Nr)("--primary-foreground",(0,n.nQ)(t)),(0,n.Nr)("--secondary-500",(0,n.nQ)(e.secondary)),(0,n.Nr)("--secondary-foreground",(0,n.nQ)(o)),(0,n.Nr)("--destructive",(0,n.nQ)(e.danger)),(0,n.Nr)("--destructive-foreground",(0,n.nQ)(a))}catch(e){console.warn("Failed to sync unified colors to CSS variables:",e)}(document.getElementById("unified-component-style")||R()).textContent="\n      .btn-primary { \n        background-color: ".concat(e.primary," !important; \n        color: ").concat(t," !important; \n      }\n      .btn-secondary { \n        background-color: ").concat(e.secondary," !important; \n        color: ").concat(o," !important; \n      }\n      .btn-danger { \n        background-color: ").concat(e.danger," !important; \n        color: ").concat(a,' !important; \n      }\n      /* 智能按钮文字颜色 */\n      [data-smart-button="primary"] { \n        background-color: ').concat(e.primary," !important; \n        color: ").concat(t,' !important; \n      }\n      [data-smart-button="secondary"] { \n        background-color: ').concat(e.secondary," !important; \n        color: ").concat(o,' !important; \n      }\n      [data-smart-button="danger"] { \n        background-color: ').concat(e.danger," !important; \n        color: ").concat(a," !important; \n      }\n    ");let s=new CustomEvent("unified-theme-component-colors-updated",{detail:{...e,textColors:{primary:t,secondary:o,danger:a}}});window.dispatchEvent(s)},[]),k=(0,a.useCallback)(e=>{e.colors.forEach((e,r)=>{document.documentElement.style.setProperty("--chart-".concat(r+1),e)});let r=new CustomEvent("unified-theme-chart-colors-updated",{detail:e.colors});window.dispatchEvent(r)},[]),w=(0,a.useCallback)(e=>{let r={...u.config.fontColors,...e};h({...u,config:{...u.config,fontColors:r}}),y(r)},[u,y]),S=(0,a.useCallback)(e=>{let r={...u.config.componentColors,...e};h({...u,config:{...u.config,componentColors:r}}),C(r)},[u,C]),E=(0,a.useCallback)(e=>{let r={...u.config.chartColors,...e};h({...u,config:{...u.config,chartColors:r}}),k(r)},[u,k]),j=(0,a.useCallback)(e=>{let r=l(e);r&&(h(r),v(e))},[v]),R=()=>{let e=document.createElement("style");return e.id="unified-component-style",document.head.appendChild(e),e};return(0,a.useEffect)(()=>{if(f)try{y(u.config.fontColors),C(u.config.componentColors),k(u.config.chartColors)}catch(e){console.warn("Failed to apply unified theme on hydrate:",e)}},[f,u,y,C,k]),(0,o.jsx)(d.Provider,{value:{currentTheme:u,availableThemes:s,applyTheme:v,updateFontColors:w,updateComponentColors:S,updateChartColors:E,resetToTheme:j,isHydrated:f},children:t})}function h(){let e=(0,a.useContext)(d);if(void 0===e)throw Error("useUnifiedTheme must be used within a UnifiedThemeProvider");return e}},47694:(e,r,t)=>{t.d(r,{Cv:()=>l,LK:()=>c});var o=t(55931),a=t(17131);let n={small:{scale:.8,name:"小"},normal:{scale:1,name:"正常"},large:{scale:1.2,name:"大"}},s={xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem"};function l(){let{getToken:e,setToken:r}=(0,a.y)(),[t,l]=(0,o.useState)(()=>e("fontSizeConfig")||{preset:"normal",scale:1,sizes:s}),c=(0,o.useMemo)(()=>{let{scale:e}=t,r={};return Object.entries(s).forEach(t=>{let[o,a]=t,n=parseFloat(a),s=a.replace(/[\d.]/g,"");r[o]="".concat(n*e).concat(s)}),r},[t]),i=(0,o.useCallback)(e=>{if("undefined"!=typeof document){let r=document.documentElement;Object.entries(e).forEach(e=>{let[t,o]=e;r.style.setProperty("--font-size-".concat(t),o)})}},[]),d=(0,o.useCallback)(e=>{console.log("Setting font size preset:",e);let t=n[e].scale,o={};Object.entries(s).forEach(e=>{let[r,a]=e,n=parseFloat(a),s=a.replace(/[\d.]/g,""),l=n*t;o[r]="".concat(l).concat(s)});let a={preset:e,scale:t,sizes:o};l(a),r("fontSizeConfig",a),r("typography.fontSize",a.sizes),i(o),console.log("Font size preset changed:",{preset:e,scale:t,newSizes:o})},[r,i]),u=(0,o.useCallback)(e=>{let{scale:r}=t,o=s[e];if(!o)return s.base;let a=parseFloat(o),n=o.replace(/[\d.]/g,"");return"".concat(a*r).concat(n)},[t]),h=(0,o.useCallback)(()=>{let e=t.preset;return{...n[e],current:e}},[t.preset]),f=(0,o.useCallback)(()=>Object.entries(n).map(e=>{let[r,t]=e;return{key:r,...t}}),[]);return(0,o.useEffect)(()=>{i(c)},[]),{fontSizeConfig:t,currentPreset:h(),presetOptions:f(),fontSizes:c,getFontSize:u,setFontSizePreset:d,presets:n}}function c(){let{setFontSizePreset:e,currentPreset:r,presetOptions:t}=l();return{setPreset:e,current:r,options:t}}},51620:(e,r,t)=>{t.d(r,{U:()=>c,g:()=>l});var o=t(89835),a=t(55931),n=t(19707);let s=(0,a.createContext)(void 0);function l(e){let{children:r}=e,[t,l]=(0,a.useState)("default"),[c]=(0,a.useState)({mapping:n.iq,contexts:n.P3,currentContext:"default"});return(0,a.useEffect)(()=>{let e=(0,n.K1)(t),r=document.getElementById("semantic-tokens-css");r||((r=document.createElement("style")).id="semantic-tokens-css",document.head.appendChild(r)),r.textContent=e},[t]),(0,o.jsx)(s.Provider,{value:{tokens:c,currentContext:t,setContext:e=>{n.P3.find(r=>r.name===e)?(l(e),c.currentContext=e):console.warn("Invalid semantic context: ".concat(e))},getToken:(e,r)=>{let o=r||t;return(0,n.OQ)(e,o)},validateToken:e=>(0,n.cP)(e),getFallback:(e,r)=>{let o=r||t;return(0,n.ij)(e,o)},generateCSS:e=>{let r=e||t;return(0,n.K1)(r)}},children:r})}function c(){let e=(0,a.useContext)(s);if(!e)throw Error("useSemanticTokens must be used within SemanticTokensProvider");return e}},58396:(e,r,t)=>{t.d(r,{D:()=>c,N:()=>l});var o=t(89835),a=t(55931);let n=[{id:1,name:"主色",value:"#ffffff",enabled:!0},{id:2,name:"次色",value:"#f8fafc",enabled:!0},{id:3,name:"强调色",value:"#f1f5f9",enabled:!0}],s=(0,a.createContext)(void 0);function l(e){let{children:r}=e,[t,l]=(0,a.useState)(n),c=(0,a.useCallback)((e,r)=>{l(t=>t.map(t=>t.id===e?{...t,value:r}:t))},[]),i=(0,a.useCallback)(e=>{l(r=>r.map(r=>r.id===e?{...r,enabled:!r.enabled}:r))},[]),d=(0,a.useCallback)(e=>{l([{id:1,name:"主色",value:e[0],enabled:!0},{id:2,name:"辅色",value:e[1],enabled:!0},{id:3,name:"点缀色",value:e[2],enabled:!0}])},[]),u=(0,a.useMemo)(()=>{let e=t.find(e=>1===e.id&&e.enabled);return e?e.value:n[0].value},[t]),h=(0,a.useMemo)(()=>{let e=t.find(e=>2===e.id&&e.enabled);return e?e.value:n[1].value},[t]),f=(0,a.useMemo)(()=>{let e=t.find(e=>3===e.id&&e.enabled);return e?e.value:n[2].value},[t]),b=(0,a.useMemo)(()=>{let e=t.filter(e=>e.enabled);if(0===e.length)return{backgroundColor:"#ffffff"};if(1===e.length)return{backgroundColor:e[0].value};if(2===e.length)return{background:"linear-gradient(135deg, ".concat(e[0].value," 40%, ").concat(e[1].value," 100%)")};if(3===e.length)return{background:"linear-gradient(135deg, ".concat(e[0].value," 25%, ").concat(e[1].value," 65%, ").concat(e[2].value," 100%)")};let r=e.map((r,t)=>"".concat(r.value," ").concat(t*(100/(e.length-1)),"%")).join(", ");return{background:"linear-gradient(135deg, ".concat(r,")")}},[t]),g=(0,a.useCallback)(e=>{var r;return(null==(r=t[e])?void 0:r.enabled)?t[e].value:"#dbeafe"},[t]),m=(0,a.useMemo)(()=>({colors:t,updateColor:c,toggleColor:i,applyPreset:d,gradientStyle:b,getGlowColor:g,primaryColor:u,secondaryColor:h,accentColor:f}),[t,c,i,d,b,g,u,h,f]);return(0,o.jsx)(s.Provider,{value:m,children:r})}function c(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},59770:(e,r,t)=>{t.d(r,{Fs:()=>c,RW:()=>i,tq:()=>d});var o=t(89835),a=t(55931);let n=[{name:"默认",colors:["#000000","#8b5cf6","#f59e0b","#22c55e","#ef4444","#64748b"]}],s=[{name:"默认",colors:["#000000","#8b5cf6","#f59e0b","#22c55e","#ef4444","#64748b"]}],l=(0,a.createContext)(void 0);function c(e){let{children:r}=e,[t,c]=(0,a.useState)(n[0].name),[i,d]=(0,a.useState)(s[0].name),[u,h]=(0,a.useState)([]),[f,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=e=>{h(e.detail)},r=e=>{b(e.detail)};return window.addEventListener("unified-theme-chart-colors-updated",e),window.addEventListener("unified-theme-component-colors-updated",r),()=>{window.removeEventListener("unified-theme-chart-colors-updated",e),window.removeEventListener("unified-theme-component-colors-updated",r)}},[]);let g=e=>{c(e)},m=e=>{s.find(r=>r.name===e)&&d(e)},p=(0,a.useMemo)(()=>{if(f)return[f.primary,f.secondary,f.danger,...n[0].colors.slice(3)];let e=n.find(e=>e.name===t);return e?e.colors:n[0].colors},[t,f]),v=(0,a.useMemo)(()=>{if(u.length>0)return u;let e=s.find(e=>e.name===i);return e?e.colors:s[0].colors},[i,u]),x=(0,a.useMemo)(()=>({chartPalette:p,activeChartPaletteName:t,applyChartPalette:g,dataChartPalette:v,activeDataChartPaletteName:i,applyDataChartPalette:m}),[p,t,v,i]);return(0,o.jsx)(l.Provider,{value:x,children:r})}function i(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useChartTheme must be used within a UnifiedChartThemeProvider");return{palette:e.chartPalette,activePaletteName:e.activeChartPaletteName,applyPalette:e.applyChartPalette}}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useDataChartTheme must be used within a UnifiedChartThemeProvider");return{palette:e.dataChartPalette,activePaletteName:e.activeDataChartPaletteName,applyPalette:e.applyDataChartPalette}}},87518:(e,r,t)=>{t.d(r,{UnifiedProvider:()=>W});var o=t(89835),a=t(16545),n=t(17131),s=t(51620),l=t(58396),c=t(59770),i=t(55931);let d={pageLayout:{type:"sidebar",sidebar:{width:280,collapsedWidth:80,position:"left",behavior:"fixed"},header:{height:64,sticky:!0,transparent:!1},footer:{height:60,sticky:!1,visible:!0},content:{maxWidth:1200,padding:24,margin:"auto"}},gridSystem:{columns:12,gutter:24,margin:16,breakpoints:{xs:0,sm:576,md:768,lg:992,xl:1200,"2xl":1400}},containers:{sm:540,md:720,lg:960,xl:1140,"2xl":1320,fluid:!1},spacing:{xs:4,sm:8,md:16,lg:24,xl:32,"2xl":48,"3xl":64}},u={default:d,compact:{...d,pageLayout:{...d.pageLayout,sidebar:{...d.pageLayout.sidebar,width:240,collapsedWidth:60},header:{...d.pageLayout.header,height:56},content:{...d.pageLayout.content,padding:16}},spacing:{xs:2,sm:4,md:8,lg:16,xl:24,"2xl":32,"3xl":48}},spacious:{...d,pageLayout:{...d.pageLayout,sidebar:{...d.pageLayout.sidebar,width:320,collapsedWidth:100},header:{...d.pageLayout.header,height:80},content:{...d.pageLayout.content,padding:32,maxWidth:1400}},spacing:{xs:8,sm:16,md:24,lg:32,xl:48,"2xl":64,"3xl":96}},topbar:{...d,pageLayout:{type:"topbar",sidebar:{width:0,collapsedWidth:0,position:"left",behavior:"static"},header:{height:64,sticky:!0,transparent:!1},footer:{height:60,sticky:!1,visible:!0},content:{maxWidth:1200,padding:24,margin:"auto"}}},fullscreen:{...d,pageLayout:{type:"fullscreen",sidebar:{width:0,collapsedWidth:0,position:"left",behavior:"static"},header:{height:0,sticky:!1,transparent:!0},footer:{height:0,sticky:!1,visible:!1},content:{maxWidth:0,padding:0,margin:"none"}}},split:{...d,pageLayout:{type:"split",sidebar:{width:320,collapsedWidth:80,position:"left",behavior:"fixed"},header:{height:64,sticky:!0,transparent:!1},footer:{height:60,sticky:!1,visible:!0},content:{maxWidth:0,padding:24,margin:"none"}}}};class h{getConfig(e){return this.getNestedValue(this.config,e)}setConfig(e,r){this.setNestedValue(this.config,e,r),this.notifySubscribers()}updateConfig(e){this.config={...this.config,...e},this.notifySubscribers()}getAllConfig(){return this.config}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}generateCSSVariables(){return this.generateCSSFromConfig(this.config)}export(e){switch(e){case"json":return JSON.stringify(this.config,null,2);case"css":return this.generateCSSVariables();default:throw Error("Unsupported format: ".concat(e))}}getNestedValue(e,r){return r.split(".").reduce((e,r)=>e&&void 0!==e[r]?e[r]:void 0,e)}setNestedValue(e,r,t){let o=r.split("."),a=o.pop();o.reduce((e,r)=>(e[r]||(e[r]={}),e[r]),e)[a]=t}notifySubscribers(){this.subscribers.forEach(e=>e(this.config))}generateCSSFromConfig(e){let r=[];return r.push("--layout-sidebar-width: ".concat(e.pageLayout.sidebar.width,"px;")),r.push("--layout-sidebar-collapsed-width: ".concat(e.pageLayout.sidebar.collapsedWidth,"px;")),r.push("--layout-header-height: ".concat(e.pageLayout.header.height,"px;")),r.push("--layout-footer-height: ".concat(e.pageLayout.footer.height,"px;")),r.push("--layout-content-max-width: ".concat(e.pageLayout.content.maxWidth,"px;")),r.push("--layout-content-padding: ".concat(e.pageLayout.content.padding,"px;")),r.push("--grid-columns: ".concat(e.gridSystem.columns,";")),r.push("--grid-gutter: ".concat(e.gridSystem.gutter,"px;")),r.push("--grid-margin: ".concat(e.gridSystem.margin,"px;")),Object.entries(e.gridSystem.breakpoints).forEach(e=>{let[t,o]=e;r.push("--breakpoint-".concat(t,": ").concat(o,"px;"))}),Object.entries(e.containers).forEach(e=>{let[t,o]=e;"number"==typeof o?r.push("--container-".concat(t,": ").concat(o,"px;")):r.push("--container-".concat(t,": ").concat(o,";"))}),Object.entries(e.spacing).forEach(e=>{let[t,o]=e;r.push("--spacing-".concat(t,": ").concat(o,"px;"))}),":root {\n  ".concat(r.join("\n  "),"\n}")}constructor(e){this.config=e,this.subscribers=new Set}}let f=(0,i.createContext)(void 0);function b(e){let{children:r}=e,[t,a]=(0,i.useState)(d),[n]=(0,i.useState)(()=>new h(d));(0,i.useEffect)(()=>{try{{let e=localStorage.getItem("aino_layout_config");if(e){let r=JSON.parse(e);a(r),n.updateConfig(r)}}}catch(e){console.warn("Failed to load layout config from localStorage:",e)}},[n]),(0,i.useEffect)(()=>{try{localStorage.setItem("aino_layout_config",JSON.stringify(t))}catch(e){console.warn("Failed to save layout config to localStorage:",e)}},[t]);let s=(0,i.useCallback)(e=>{let r={...t,...e};a(r),n.updateConfig(r)},[t,n]),l=(0,i.useCallback)(e=>n.getConfig(e),[n]),c=(0,i.useCallback)((e,r)=>{let o={...t};(function(e,r,t){let o=r.split("."),a=o.pop();o.reduce((e,r)=>(e[r]||(e[r]={}),e[r]),e)[a]=t})(o,e,r),a(o),n.updateConfig(o)},[t,n]),b=(0,i.useCallback)(()=>n.generateCSSVariables(),[n]),g=(0,i.useCallback)(e=>n.export(e),[n]),m=(0,i.useCallback)(e=>{let r=u[e];r&&(a(r),n.updateConfig(r))},[n]),p=(0,i.useMemo)(()=>({config:t,updateConfig:s,getConfig:l,setConfig:c,applyPreset:m,generateCSSVariables:b,export:g}),[t,s,l,c,m,b,g]);return(0,o.jsx)(f.Provider,{value:p,children:r})}let g={button:{base:{padding:"0.5rem 1rem",borderRadius:"0.375rem",fontSize:"0.875rem",fontWeight:"500",transition:"all 0.2s ease-in-out",cursor:"pointer",border:"1px solid transparent",outline:"none"},variants:{primary:{backgroundColor:"#000000",color:"#ffffff",borderColor:"#000000",hover:{backgroundColor:"#1a1a1a",color:"#ffffff",borderColor:"#1a1a1a"},active:{backgroundColor:"#333333",color:"#ffffff",borderColor:"#333333"},disabled:{backgroundColor:"#9ca3af",color:"#6b7280",borderColor:"#9ca3af",cursor:"not-allowed"}},secondary:{backgroundColor:"#6b7280",color:"#ffffff",borderColor:"#6b7280",hover:{backgroundColor:"#4b5563",color:"#ffffff",borderColor:"#4b5563"},active:{backgroundColor:"#374151",color:"#ffffff",borderColor:"#374151"},disabled:{backgroundColor:"#d1d5db",color:"#9ca3af",borderColor:"#d1d5db",cursor:"not-allowed"}},outline:{backgroundColor:"transparent",color:"#000000",borderColor:"#000000",hover:{backgroundColor:"#000000",color:"#ffffff",borderColor:"#000000"},active:{backgroundColor:"#333333",color:"#ffffff",borderColor:"#333333"},disabled:{backgroundColor:"transparent",color:"#9ca3af",borderColor:"#d1d5db",cursor:"not-allowed"}},ghost:{backgroundColor:"transparent",color:"#000000",borderColor:"transparent",hover:{backgroundColor:"#f5f5f5",color:"#000000",borderColor:"transparent"},active:{backgroundColor:"#e5e5e5",color:"#000000",borderColor:"transparent"},disabled:{backgroundColor:"transparent",color:"#9ca3af",borderColor:"transparent",cursor:"not-allowed"}}},sizes:{sm:{padding:"0.375rem 0.75rem",fontSize:"0.75rem",borderRadius:"0.25rem"},md:{padding:"0.5rem 1rem",fontSize:"0.875rem",borderRadius:"0.375rem"},lg:{padding:"0.75rem 1.5rem",fontSize:"1rem",borderRadius:"0.5rem"}}},input:{base:{padding:"0.5rem 0.75rem",borderRadius:"0.375rem",fontSize:"0.875rem",border:"1px solid #d1d5db",outline:"none",transition:"all 0.2s ease-in-out",backgroundColor:"#ffffff",color:"#111827"},states:{focus:{borderColor:"#000000",boxShadow:"0 0 0 3px rgba(0, 0, 0, 0.1)"},error:{borderColor:"#ef4444",backgroundColor:"#fef2f2"},disabled:{backgroundColor:"#f9fafb",color:"#6b7280",cursor:"not-allowed"}},sizes:{sm:{padding:"0.375rem 0.5rem",fontSize:"0.75rem",borderRadius:"0.25rem"},md:{padding:"0.5rem 0.75rem",fontSize:"0.875rem",borderRadius:"0.375rem"},lg:{padding:"0.75rem 1rem",fontSize:"1rem",borderRadius:"0.5rem"}}},card:{base:{backgroundColor:"#ffffff",borderRadius:"0.5rem",border:"1px solid #e5e7eb",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",padding:"1.5rem",transition:"all 0.2s ease-in-out"},variants:{default:{backgroundColor:"#ffffff",borderColor:"#e5e7eb",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"},elevated:{backgroundColor:"#ffffff",borderColor:"transparent",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},outlined:{backgroundColor:"transparent",borderColor:"#e5e7eb",boxShadow:"none"},ghost:{backgroundColor:"transparent",borderColor:"transparent",boxShadow:"none"}},sizes:{sm:{padding:"1rem",borderRadius:"0.375rem"},md:{padding:"1.5rem",borderRadius:"0.5rem"},lg:{padding:"2rem",borderRadius:"0.75rem"}}},navigation:{base:{backgroundColor:"#ffffff",borderBottom:"1px solid #e5e7eb",padding:"0 1rem",transition:"all 0.2s ease-in-out"},item:{base:{padding:"0.75rem 1rem",color:"#6b7280",textDecoration:"none",transition:"all 0.2s ease-in-out",borderRadius:"0.375rem"},states:{hover:{backgroundColor:"#f3f4f6",color:"#374151"},active:{backgroundColor:"#eff6ff",color:"#3b82f6",fontWeight:"600"},disabled:{color:"#9ca3af",cursor:"not-allowed"}}},dropdown:{backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",padding:"0.5rem"}},tag:{base:{padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",fontWeight:"500",border:"1px solid transparent",transition:"all 0.2s ease-in-out"},variants:{default:{backgroundColor:"#f3f4f6",color:"#374151",borderColor:"#d1d5db"},primary:{backgroundColor:"#eff6ff",color:"#3b82f6",borderColor:"#bfdbfe"},success:{backgroundColor:"#f0fdf4",color:"#16a34a",borderColor:"#bbf7d0"},warning:{backgroundColor:"#fffbeb",color:"#d97706",borderColor:"#fed7aa"},error:{backgroundColor:"#fef2f2",color:"#dc2626",borderColor:"#fecaca"}},sizes:{sm:{padding:"0.125rem 0.375rem",fontSize:"0.625rem",borderRadius:"0.125rem"},md:{padding:"0.25rem 0.5rem",fontSize:"0.75rem",borderRadius:"0.25rem"},lg:{padding:"0.375rem 0.75rem",fontSize:"0.875rem",borderRadius:"0.375rem"}}}},m={default:g,modern:{...g,button:{...g.button,base:{...g.button.base,borderRadius:"0.75rem",fontWeight:"600"},variants:{...g.button.variants,primary:{...g.button.variants.primary,backgroundColor:"#000000",borderColor:"#000000",hover:{backgroundColor:"#333333",color:"#ffffff",borderColor:"#333333"}}}},card:{...g.card,base:{...g.card.base,borderRadius:"1rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"}}},minimal:{...g,button:{...g.button,base:{...g.button.base,borderRadius:"0",border:"none",boxShadow:"none"}},input:{...g.input,base:{...g.input.base,borderRadius:"0",border:"none",borderBottom:"1px solid #d1d5db"}},card:{...g.card,base:{...g.card.base,borderRadius:"0",border:"none",boxShadow:"none"}}},colorful:{...g,button:{...g.button,variants:{primary:{backgroundColor:"#ec4899",color:"#ffffff",borderColor:"#ec4899",hover:{backgroundColor:"#db2777",color:"#ffffff",borderColor:"#db2777"},active:{backgroundColor:"#be185d",color:"#ffffff",borderColor:"#be185d"},disabled:{backgroundColor:"#fbcfe8",color:"#f9a8d4",borderColor:"#fbcfe8",cursor:"not-allowed"}},secondary:{backgroundColor:"#8b5cf6",color:"#ffffff",borderColor:"#8b5cf6",hover:{backgroundColor:"#7c3aed",color:"#ffffff",borderColor:"#7c3aed"},active:{backgroundColor:"#6d28d9",color:"#ffffff",borderColor:"#6d28d9"},disabled:{backgroundColor:"#ddd6fe",color:"#c4b5fd",borderColor:"#ddd6fe",cursor:"not-allowed"}}}},tag:{...g.tag,variants:{...g.tag.variants,primary:{backgroundColor:"#fdf2f8",color:"#ec4899",borderColor:"#fbcfe8"},success:{backgroundColor:"#f0fdf4",color:"#22c55e",borderColor:"#bbf7d0"},warning:{backgroundColor:"#fffbeb",color:"#f59e0b",borderColor:"#fed7aa"},error:{backgroundColor:"#fef2f2",color:"#ef4444",borderColor:"#fecaca"}}}}};class p{getConfig(e){return this.getNestedValue(this.config,e)}setConfig(e,r){this.setNestedValue(this.config,e,r),this.notifySubscribers()}updateConfig(e){this.config={...this.config,...e},this.notifySubscribers()}getAllConfig(){return this.config}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}generateCSSVariables(){return this.generateCSSFromConfig(this.config)}export(e){switch(e){case"json":return JSON.stringify(this.config,null,2);case"css":return this.generateCSSVariables();default:throw Error("Unsupported format: ".concat(e))}}getNestedValue(e,r){return r.split(".").reduce((e,r)=>e&&void 0!==e[r]?e[r]:void 0,e)}setNestedValue(e,r,t){let o=r.split("."),a=o.pop();o.reduce((e,r)=>(e[r]||(e[r]={}),e[r]),e)[a]=t}notifySubscribers(){this.subscribers.forEach(e=>e(this.config))}generateCSSFromConfig(e){let r=[];return this.generateButtonCSS(e.button,r),this.generateInputCSS(e.input,r),this.generateCardCSS(e.card,r),this.generateNavigationCSS(e.navigation,r),this.generateTagCSS(e.tag,r),":root {\n  ".concat(r.join("\n  "),"\n}")}generateButtonCSS(e,r){Object.entries(e.base).forEach(e=>{let[t,o]=e;r.push("--button-".concat(t,": ").concat(o,";"))}),Object.entries(e.variants).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;"hover"===o||"active"===o||"disabled"===o?Object.entries(a).forEach(e=>{let[a,n]=e;r.push("--button-".concat(t,"-").concat(o,"-").concat(a,": ").concat(n,";"))}):r.push("--button-".concat(t,"-").concat(o,": ").concat(a,";"))})}),Object.entries(e.sizes).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--button-".concat(t,"-").concat(o,": ").concat(a,";"))})})}generateInputCSS(e,r){Object.entries(e.base).forEach(e=>{let[t,o]=e;r.push("--input-".concat(t,": ").concat(o,";"))}),Object.entries(e.states).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--input-".concat(t,"-").concat(o,": ").concat(a,";"))})}),Object.entries(e.sizes).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--input-".concat(t,"-").concat(o,": ").concat(a,";"))})})}generateCardCSS(e,r){Object.entries(e.base).forEach(e=>{let[t,o]=e;r.push("--card-".concat(t,": ").concat(o,";"))}),Object.entries(e.variants).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--card-".concat(t,"-").concat(o,": ").concat(a,";"))})}),Object.entries(e.sizes).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--card-".concat(t,"-").concat(o,": ").concat(a,";"))})})}generateNavigationCSS(e,r){Object.entries(e.base).forEach(e=>{let[t,o]=e;r.push("--nav-".concat(t,": ").concat(o,";"))}),Object.entries(e.item.base).forEach(e=>{let[t,o]=e;r.push("--nav-item-".concat(t,": ").concat(o,";"))}),Object.entries(e.item.states).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--nav-item-".concat(t,"-").concat(o,": ").concat(a,";"))})}),Object.entries(e.dropdown).forEach(e=>{let[t,o]=e;r.push("--nav-dropdown-".concat(t,": ").concat(o,";"))})}generateTagCSS(e,r){Object.entries(e.base).forEach(e=>{let[t,o]=e;r.push("--tag-".concat(t,": ").concat(o,";"))}),Object.entries(e.variants).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--tag-".concat(t,"-").concat(o,": ").concat(a,";"))})}),Object.entries(e.sizes).forEach(e=>{let[t,o]=e;Object.entries(o).forEach(e=>{let[o,a]=e;r.push("--tag-".concat(t,"-").concat(o,": ").concat(a,";"))})})}constructor(e){this.config=e,this.subscribers=new Set}}let v=(0,i.createContext)(void 0);function x(e){let{children:r}=e,[t,a]=(0,i.useState)(g),[n]=(0,i.useState)(()=>new p(g));(0,i.useEffect)(()=>{try{{let e=localStorage.getItem("aino_component_style_config");if(e){let r=JSON.parse(e);a(r),n.updateConfig(r)}}}catch(e){console.warn("Failed to load component style config from localStorage:",e)}},[n]),(0,i.useEffect)(()=>{try{localStorage.setItem("aino_component_style_config",JSON.stringify(t))}catch(e){console.warn("Failed to save component style config to localStorage:",e)}},[t]);let s=(0,i.useCallback)(e=>{let r={...t,...e};a(r),n.updateConfig(r)},[t,n]),l=(0,i.useCallback)(e=>n.getConfig(e),[n]),c=(0,i.useCallback)((e,r)=>{let o={...t};(function(e,r,t){let o=r.split("."),a=o.pop();o.reduce((e,r)=>(e[r]||(e[r]={}),e[r]),e)[a]=t})(o,e,r),a(o),n.updateConfig(o)},[t,n]),d=(0,i.useCallback)(()=>n.generateCSSVariables(),[n]),u=(0,i.useCallback)(e=>n.export(e),[n]),h=(0,i.useCallback)(e=>{let r=m[e];r&&(a(r),n.updateConfig(r))},[n]),f=(0,i.useMemo)(()=>({config:t,updateConfig:s,getConfig:l,setConfig:c,applyPreset:h,generateCSSVariables:d,export:u}),[t,s,l,c,h,d,u]);return(0,o.jsx)(v.Provider,{value:f,children:r})}var y=t(41657),C=t(13557),k=t(29561);function w(e){let{children:r}=e;return(0,o.jsx)(n.A,{children:(0,o.jsx)(b,{children:(0,o.jsx)(x,{children:(0,o.jsx)(y.t,{children:(0,o.jsx)(k.n,{children:(0,o.jsx)(C.QR,{children:r})})})})})})}var S=t(3976),E=t(65795),j=t(35158),R=t(23244),N=t(51720),I=t(77796);class T{static getInstance(){return T.instance||(T.instance=new T),T.instance}setupGlobalErrorHandlers(){window.addEventListener("error",e=>{var r;this.captureError({message:e.message,stack:null==(r=e.error)?void 0:r.stack,category:"runtime",severity:this.calculateSeverity(e.error),metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener("unhandledrejection",e=>{var r,t;this.captureError({message:(null==(r=e.reason)?void 0:r.message)||"Unhandled Promise Rejection",stack:null==(t=e.reason)?void 0:t.stack,category:"runtime",severity:"high",metadata:{reason:e.reason}})}),window.addEventListener("offline",()=>{this.captureError({message:"Network connection lost",category:"network",severity:"medium"})})}calculateSeverity(e){if(!e)return"medium";let r=e.message.toLowerCase();return r.includes("network")||r.includes("fetch")?"medium":r.includes("syntax")||r.includes("reference")?"high":r.includes("memory")||r.includes("out of memory")?"critical":"medium"}captureError(e){if(!e||"object"!=typeof e)return console.error("Invalid error data provided to captureError:",e),"invalid-error-id";let r={errorId:"error_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),message:e.message||"Unknown error",stack:e.stack||"No stack trace",componentStack:e.componentStack||"No component stack",category:e.category||"unknown",severity:e.severity||"medium",metadata:e.metadata||{},timestamp:new Date().toISOString(),url:window.location.href,userAgent:window.navigator.userAgent};return this.errorQueue.push(r),this.errorQueue.length>this.maxQueueSize&&this.errorQueue.shift(),console.error("Error captured:",r),this.flushErrorQueue(),r.errorId}async flushErrorQueue(){if(!this.isReporting&&0!==this.errorQueue.length){this.isReporting=!0;try{let e=[...this.errorQueue];this.errorQueue=[],await this.sendErrorReports(e)}catch(e){console.error("Failed to send error reports:",e),this.errorQueue.unshift(...this.errorQueue)}finally{this.isReporting=!1}}}async sendErrorReports(e){}getErrorStats(){let e={total:this.errorQueue.length,bySeverity:{},byCategory:{},recentErrors:this.errorQueue.slice(-10)};return this.errorQueue.forEach(r=>{e.bySeverity[r.severity]=(e.bySeverity[r.severity]||0)+1,e.byCategory[r.category]=(e.byCategory[r.category]||0)+1}),e}clearErrorQueue(){this.errorQueue=[]}async forceFlush(){await this.flushErrorQueue()}constructor(){this.errorQueue=[],this.isReporting=!1,this.maxQueueSize=50,this.setupGlobalErrorHandlers()}}let P=T.getInstance();class _ extends i.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:"error_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}}componentDidCatch(e,r){var t,o;let a;if(!e||"object"!=typeof e)return void console.error("EnhancedErrorBoundary caught an invalid error:",{error:e,errorInfo:r});let n=(null==e?void 0:e.message)||"Unknown error",s=(null==e?void 0:e.stack)||"No stack trace",l=(null==r?void 0:r.componentStack)||"No component stack";console.error("EnhancedErrorBoundary caught an error:",{error:n,stack:s,componentStack:l,errorId:this.state.errorId}),this.setState({errorInfo:r}),null==(t=(o=this.props).onError)||t.call(o,e,r),a={message:n,stack:s,componentStack:l,category:"runtime",severity:"high",metadata:{errorBoundary:!0,errorId:this.state.errorId}},P.captureError(a)}fallbackCopyTextToClipboard(e){try{let r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.left="-999999px",r.style.top="-999999px",r.style.opacity="0",r.style.pointerEvents="none",document.body.appendChild(r),r.focus(),r.select(),document.execCommand("copy")?alert("错误信息已复制到剪贴板"):alert("复制失败，请手动复制错误信息"),document.body.contains(r)&&document.body.removeChild(r)}catch(e){console.error("Fallback copy failed:",e),alert("复制失败，请手动复制错误信息")}}render(){if(this.state.hasError){var e;return this.props.fallback?this.props.fallback:(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-orange-50 p-4",children:(0,o.jsxs)("div",{className:"max-w-2xl w-full bg-white shadow-xl rounded-xl p-8 border border-red-200",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,o.jsx)("div",{className:"flex-shrink-0",children:(0,o.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,o.jsx)(E.A,{className:"w-6 h-6 text-red-600"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"应用程序遇到错误"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:["错误ID: ",this.state.errorId]})]})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)(j.A,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-red-800 mb-1",children:"错误详情"}),(0,o.jsx)("p",{className:"text-sm text-red-700 font-mono",children:(null==(e=this.state.error)?void 0:e.message)||"未知错误"})]})]})}),this.props.showDebugInfo&&this.state.errorInfo&&(0,o.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,o.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,o.jsx)(R.A,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"调试信息"}),(0,o.jsxs)("details",{className:"text-sm text-gray-700",children:[(0,o.jsx)("summary",{className:"cursor-pointer hover:text-gray-900",children:"查看组件堆栈"}),(0,o.jsx)("pre",{className:"mt-2 text-xs bg-gray-100 p-2 rounded overflow-auto max-h-32",children:this.state.errorInfo.componentStack})]})]})]})})]}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,o.jsxs)("button",{onClick:this.handleRetry,className:"flex-1 flex items-center justify-center space-x-2 bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:[(0,o.jsx)(N.A,{className:"w-4 h-4"}),(0,o.jsx)("span",{children:"重试"})]}),(0,o.jsxs)("button",{onClick:this.handleGoHome,className:"flex-1 flex items-center justify-center space-x-2 bg-gray-600 text-white px-4 py-3 rounded-lg hover:bg-gray-700 transition-colors",children:[(0,o.jsx)(I.A,{className:"w-4 h-4"}),(0,o.jsx)("span",{children:"返回首页"})]}),(0,o.jsxs)("button",{onClick:this.handleCopyError,className:"flex-1 flex items-center justify-center space-x-2 bg-orange-600 text-white px-4 py-3 rounded-lg hover:bg-orange-700 transition-colors",children:[(0,o.jsx)(j.A,{className:"w-4 h-4"}),(0,o.jsx)("span",{children:"复制错误信息"})]})]}),(0,o.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,o.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,o.jsx)("p",{className:"mb-2",children:(0,o.jsx)("strong",{children:"如果问题持续存在，请："})}),(0,o.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,o.jsx)("li",{children:"刷新页面或清除浏览器缓存"}),(0,o.jsx)("li",{children:"检查网络连接是否正常"}),(0,o.jsx)("li",{children:"联系技术支持并提供错误ID"})]})]})})]})})}return this.props.children}constructor(e){super(e),this.reportError=(e,r)=>{console.log("Error Report:",{errorId:this.state.errorId,message:e.message,stack:e.stack,componentStack:r.componentStack,url:window.location.href,userAgent:window.navigator.userAgent,timestamp:new Date().toISOString()})},this.handleRetry=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0,errorId:void 0})},this.handleGoHome=()=>{window.location.href="/"},this.handleCopyError=()=>{var e,r,t;let o="\n错误ID: ".concat(this.state.errorId,"\n错误信息: ").concat((null==(e=this.state.error)?void 0:e.message)||"Unknown error","\n错误堆栈: ").concat((null==(r=this.state.error)?void 0:r.stack)||"No stack trace","\n组件堆栈: ").concat((null==(t=this.state.errorInfo)?void 0:t.componentStack)||"No component stack","\nURL: ").concat(window.location.href,"\n时间: ").concat(new Date().toLocaleString(),"\n    ").trim();navigator.clipboard?navigator.clipboard.writeText(o).then(()=>{alert("错误信息已复制到剪贴板")}).catch(()=>{this.fallbackCopyTextToClipboard(o)}):this.fallbackCopyTextToClipboard(o)},this.state={hasError:!1}}}var O=t(11408);function L(e){let{children:r}=e,t=(0,O.j)();return(0,i.useEffect)(()=>{try{t.applyRadiusToDOM();let e=setTimeout(()=>{try{t.applyRadiusToDOM()}catch(e){}},500);return()=>clearTimeout(e)}catch(e){}},[t]),(0,i.useEffect)(()=>{let e=()=>{try{t.applyRadiusToDOM()}catch(e){}};return window.addEventListener("radiusUpdated",e),window.addEventListener("forceRadiusUpdate",e),()=>{window.removeEventListener("radiusUpdated",e),window.removeEventListener("forceRadiusUpdate",e)}},[t]),(0,o.jsx)(o.Fragment,{children:r})}var U=t(68232),F=t(92475),D=t(7951),A=t(15496);let z=(0,D.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Q=i.forwardRef((e,r)=>{let{className:t,variant:a,...n}=e;return(0,o.jsx)("div",{ref:r,role:"alert",className:(0,A.cn)(z({variant:a}),t),...n})});Q.displayName="Alert";let B=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,o.jsx)("h5",{ref:r,className:(0,A.cn)("mb-1 font-medium leading-none tracking-tight",t),...a})});B.displayName="AlertTitle";let M=i.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,o.jsx)("div",{ref:r,className:(0,A.cn)("text-sm [&_p]:leading-relaxed",t),...a})});function V(e){let{onDismiss:r,showDetails:t=!1}=e,[a,n]=(0,i.useState)(null),[s,l]=(0,i.useState)([]),[c,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(t);return((0,i.useEffect)(()=>{let e=function(){let e=window.navigator.userAgent,r=function(e){if(e.includes("Chrome")){let r=e.match(/Chrome\/(\d+)/);return{name:"Chrome",version:r?r[1]:"unknown"}}if(e.includes("Firefox")){let r=e.match(/Firefox\/(\d+)/);return{name:"Firefox",version:r?r[1]:"unknown"}}if(e.includes("Safari")&&!e.includes("Chrome")){let r=e.match(/Version\/(\d+)/);return{name:"Safari",version:r?r[1]:"unknown"}}if(e.includes("Edge")){let r=e.match(/Edge\/(\d+)/);return{name:"Edge",version:r?r[1]:"unknown"}}return{name:"Unknown",version:"unknown"}}(e),t=function(){try{let e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}(),o=function(){try{let e="__sessionStorage_test__";return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(e){return!1}}(),a=function(){try{if(window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome"))try{return localStorage.setItem("__test__","test"),localStorage.removeItem("__test__"),!1}catch(e){return!0}if(window.navigator.userAgent.includes("Chrome"))return!window.indexedDB;return!1}catch(e){return!0}}();return{hasLocalStorage:t,hasSessionStorage:o,supportsBackdropBlur:function(){try{return CSS.supports("backdrop-filter","blur(10px)")||CSS.supports("-webkit-backdrop-filter","blur(10px)")}catch(e){return!1}}(),supportsCSSVariables:function(){try{return CSS.supports("color","var(--test)")}catch(e){return!1}}(),isPrivateMode:a,userAgent:e,browser:r.name,version:r.version}}(),r=function(e){let r=[];return e.hasLocalStorage||r.push("localStorage 不可用，主题设置无法保存"),e.isPrivateMode&&r.push("检测到隐私模式，某些功能可能受限"),e.supportsBackdropBlur||r.push("浏览器不支持 backdrop-blur，某些视觉效果可能不显示"),e.supportsCSSVariables||r.push("浏览器不支持 CSS 变量，主题切换功能可能受限"),"Chrome"===e.browser&&80>parseInt(e.version)&&r.push("Chrome 版本过低，建议升级到最新版本"),"Firefox"===e.browser&&75>parseInt(e.version)&&r.push("Firefox 版本过低，建议升级到最新版本"),"Safari"===e.browser&&13>parseInt(e.version)&&r.push("Safari 版本过低，建议升级到最新版本"),r}(e);n(e),l(r),d(r.length>0)},[]),c&&a)?(0,o.jsx)("div",{className:"fixed top-4 left-4 right-4 z-50 max-w-2xl mx-auto",children:(0,o.jsxs)(Q,{className:"border-orange-200 bg-orange-50",children:[(0,o.jsx)(E.A,{className:"h-4 w-4 text-orange-600"}),(0,o.jsx)(B,{className:"text-orange-800",children:"环境兼容性警告"}),(0,o.jsx)(M,{className:"text-orange-700",children:(0,o.jsxs)("div",{className:"space-y-2",children:[(0,o.jsx)("p",{children:"检测到您的浏览器环境可能存在兼容性问题，这可能导致主题功能无法正常工作。"}),(0,o.jsx)("div",{className:"space-y-1",children:s.map((e,r)=>(0,o.jsxs)("div",{className:"text-sm",children:["• ",e]},r))}),u&&(0,o.jsxs)("div",{className:"mt-3 p-3 bg-orange-100 rounded border border-orange-200",children:[(0,o.jsx)("div",{className:"text-sm font-medium mb-2",children:"环境详情："}),(0,o.jsxs)("div",{className:"text-xs space-y-1",children:[(0,o.jsxs)("div",{children:["浏览器: ",a.browser," ",a.version]}),(0,o.jsxs)("div",{children:["localStorage: ",a.hasLocalStorage?"✅":"❌"]}),(0,o.jsxs)("div",{children:["sessionStorage: ",a.hasSessionStorage?"✅":"❌"]}),(0,o.jsxs)("div",{children:["CSS 变量: ",a.supportsCSSVariables?"✅":"❌"]}),(0,o.jsxs)("div",{children:["backdrop-blur: ",a.supportsBackdropBlur?"✅":"❌"]}),(0,o.jsxs)("div",{children:["隐私模式: ",a.isPrivateMode?"⚠️":"✅"]})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:[(0,o.jsxs)(F.$,{size:"sm",variant:"outline",onClick:()=>{window.location.reload()},className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:[(0,o.jsx)(N.A,{className:"w-3 h-3 mr-1"}),"刷新页面"]}),!u&&(0,o.jsx)(F.$,{size:"sm",variant:"ghost",onClick:()=>h(!0),className:"text-orange-700 hover:bg-orange-100",children:"查看详情"}),(0,o.jsx)(F.$,{size:"sm",variant:"ghost",onClick:()=>{d(!1),null==r||r()},className:"text-orange-700 hover:bg-orange-100 ml-auto",children:(0,o.jsx)(U.A,{className:"w-3 h-3"})})]})]})})]})}):null}function W(e){let{children:r,locale:t,dict:i,showDebugInfo:d=!1}=e;return(0,o.jsx)(a.Y,{initialLocale:t,children:(0,o.jsx)(n.A,{children:(0,o.jsx)(s.g,{children:(0,o.jsx)(l.N,{children:(0,o.jsx)(k.n,{children:(0,o.jsx)(c.Fs,{children:(0,o.jsx)(w,{children:(0,o.jsx)(y.t,{children:(0,o.jsx)(L,{children:(0,o.jsx)(S.q,{children:(0,o.jsxs)(_,{showDebugInfo:d,children:[(0,o.jsx)(V,{}),r]})})})})})})})})})})})}M.displayName="AlertDescription"}}]);