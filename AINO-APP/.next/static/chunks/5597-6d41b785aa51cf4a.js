"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5597],{15496:(e,t,s)=>{s.d(t,{S:()=>l,cn:()=>a});var n=s(98951),r=s(45318);function a(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,n.$)(t))}function l(){let e=Math.floor(0xffffff*Math.random()).toString(16).padStart(6,"0");return"#".concat(e)}},25597:(e,t,s)=>{s.d(t,{S:()=>m});var n=s(89835),r=s(77455),a=s(55931),l=s(79588),o=s(15496),i=s(59445),d=s(32937),c=s(55098),u=s(89407),x=s(92475),h=s(58590);function m(e){let{onLogin:t,onRegister:s,onForgotPassword:m,className:p}=e,[f,b]=(0,a.useState)("phone"),[g,y]=(0,a.useState)("phone"),[v,j]=(0,a.useState)(""),[w,N]=(0,a.useState)(""),[k,A]=(0,a.useState)(""),[C,S]=(0,a.useState)(!1),[z,M]=(0,a.useState)(!1),[P,_]=(0,a.useState)(!1),[E,L]=(0,a.useState)({}),D=e=>{j(e),E.phone&&L(e=>({...e,phone:void 0}))},F=async()=>{if(!v)return void L(e=>({...e,phone:"请输入手机号"}));console.log("发送验证码到:",v),_(!0),y("verify")},O=async()=>{M(!0),L({});try{var e;let s={};if(v||(s.phone="请输入手机号"),"phone"===f?w||(s.code="请输入验证码"):k||(s.password="请输入密码"),Object.keys(s).length>0)return void L(s);let n=window.localStorage.getItem("APPLICATION_CONFIG"),a=JSON.parse(n),l=null==a?void 0:a.id,o=null==(e=(await r.A.post("http://localhost:3007/api/modules/system/user/login?applicationId=".concat(l),{password:k,phone_number:v})).data)?void 0:e.data;null==t||t(o)}catch(e){console.error("登录失败:",e),L(e=>({...e,..."password"===f?{password:"登录失败，请检查手机号或密码"}:{code:"登录失败，请检查验证码"}}))}finally{M(!1)}},I=(0,l.usePathname)(),[T,$]=(0,a.useState)(null);(0,a.useEffect)(()=>{try{let e=new URLSearchParams(window.location.search).get("authCfg");if(e){let t=JSON.parse(e);$(t);return}let t=window.localStorage.getItem("APP_AUTH_CONFIG");t&&$(JSON.parse(t))}catch(e){}},[]);let R=(0,a.useMemo)(()=>T&&Array.isArray(T.providers)?[{key:"phone",enabled:!0},...T.providers.filter(e=>e&&e.key&&["phone","wechat","bytedance","google","apple"].includes(e.key)).filter(e=>"phone"!==e.key)]:[{key:"phone",enabled:!0},{key:"wechat",enabled:!1},{key:"bytedance",enabled:!1},{key:"google",enabled:!1},{key:"apple",enabled:!1}],[T]),B=(null==T?void 0:T.titleColor)?{color:T.titleColor}:void 0,G=(null==T?void 0:T.bodyColor)?{color:T.bodyColor}:void 0,J=(0,a.useMemo)(()=>(null==I?void 0:I.startsWith("/en"))?"en":"zh",[I]),V=(0,a.useMemo)(()=>{let e=null==T?void 0:T.introTitle;return e?"string"==typeof e?e:e[J]||e.zh||e.en||null:null},[T,J]),q=(0,a.useMemo)(()=>{let e=null==T?void 0:T.introText;return e?"string"==typeof e?e:e[J]||e.zh||e.en||null:null},[T,J]),U=()=>{var e,t,s,r;return(0,n.jsxs)("div",{className:"flex items-center justify-center gap-6 pt-10",children:[(null==(e=R.find(e=>"wechat"===e.key))?void 0:e.enabled)&&(0,n.jsx)("button",{"aria-label":"wechat",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:"微"}),(null==(t=R.find(e=>"bytedance"===e.key))?void 0:t.enabled)&&(0,n.jsx)("button",{"aria-label":"bytedance",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:"字"}),(null==(s=R.find(e=>"google"===e.key))?void 0:s.enabled)&&(0,n.jsx)("button",{"aria-label":"google",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:"G"}),(null==(r=R.find(e=>"apple"===e.key))?void 0:r.enabled)&&(0,n.jsx)("button",{"aria-label":"apple",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:""})]})};return(0,n.jsx)("div",{className:"min-h-screen pb-8",children:(0,n.jsx)("div",{className:"pt-6",children:(0,n.jsxs)("div",{className:"container mx-auto px-4",children:["phone"===g?(0,n.jsx)(h.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,n.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:B,children:V||("en"===J?"Sign in or register":"手机号登录或注册")}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",style:G,children:q||("en"===J?"The code will be sent to your phone":"验证码将发送至你的手机")})]}),(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsx)(c.L,{value:v,onChange:D,error:E.phone,placeholder:"请输入手机号"})}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(x.$,{type:"button",variant:"secondary",className:"w-full rounded-full h-11",disabled:!v,onClick:F,children:"获取验证码"})}),(0,n.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,n.jsx)("button",{type:"button",className:"underline underline-offset-4 hover:text-foreground",onClick:()=>{b("password"),y("password")},children:"使用密码登录"})}),(0,n.jsx)("div",{className:"text-center text-sm text-muted-foreground mt-2",children:(0,n.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",onClick:s,children:"en"===J?"Create Account":"创建账户"})}),U()]})}):null,"verify"===g?(0,n.jsx)(h.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,n.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,n.jsxs)("div",{className:"text-center mb-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold mb-2",style:B,children:V||("en"===J?"Verify code":"输入验证码")}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",style:G,children:q||("en"===J?"The code will be sent to your phone":"验证码将发送至你的手机")})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)(u.P,{value:w,onChange:e=>{N(e),E.code&&L(e=>({...e,code:void 0}))},error:E.code,onComplete:e=>N(e),size:"sm"})}),(0,n.jsx)(x.$,{type:"button",onClick:O,disabled:z||w.length<4,size:"lg",className:"w-full rounded-full h-12 text-base",variant:"default",children:z?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"继续中..."]}):"en"===J?"Continue":"继续"}),(0,n.jsx)("div",{className:"text-center text-sm text-muted-foreground mt-4",children:(0,n.jsx)("button",{type:"button",className:"underline underline-offset-4 hover:text-foreground",onClick:()=>{b("password"),y("password")},children:"使用密码登录"})}),(0,n.jsx)("div",{className:"text-center text-sm text-muted-foreground mt-2",children:(0,n.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",onClick:s,children:"en"===J?"Create Account":"创建账户"})}),U()]})}):null,"password"===g?(0,n.jsx)(h.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,n.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,n.jsxs)("div",{className:"text-center mb-8",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:B,children:V||("en"===J?"Sign in with password":"手机号 + 密码登录")}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",style:G,children:q||("en"===J?"Enter your phone and password":"请输入你的手机号与密码")})]}),(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsx)(c.L,{value:v,onChange:D,error:E.phone,placeholder:"请输入手机号"})}),(0,n.jsx)("div",{className:"mb-1",children:(0,n.jsxs)("div",{className:"w-full max-w-sm",children:[(0,n.jsx)("label",{htmlFor:"password",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"密码"}),(0,n.jsxs)("div",{className:(0,o.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,n.jsx)("input",{id:"password",type:C?"text":"password",className:"flex-1 px-3.5 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"请输入密码",value:k,onChange:e=>{A(e.target.value),E.password&&L(e=>({...e,password:void 0}))}}),(0,n.jsx)("button",{type:"button","aria-label":C?"隐藏密码":"显示密码",className:"pr-3 text-gray-500 hover:text-gray-700",onClick:()=>S(e=>!e),children:C?(0,n.jsx)(i.A,{className:"w-4 h-4"}):(0,n.jsx)(d.A,{className:"w-4 h-4"})})]}),E.password?(0,n.jsx)("p",{className:"mt-1 text-xs text-red-500",children:E.password}):null]})}),(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,n.jsx)("button",{type:"button",className:"underline underline-offset-4 hover:text-foreground",onClick:()=>{b("phone"),y("phone")},children:"使用验证码登录"})}),(0,n.jsx)("div",{className:"text-sm",children:(0,n.jsx)("button",{type:"button",className:"text-blue-600 hover:underline",onClick:m,children:"忘记密码？"})})]}),(0,n.jsx)(x.$,{type:"button",onClick:O,disabled:z||!v||!k,size:"lg",className:"w-full rounded-full h-12 text-base",variant:"default",children:z?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"登录中..."]}):"登录"}),(0,n.jsx)("div",{className:"text-center text-sm text-muted-foreground mt-4",children:(0,n.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",onClick:s,children:"en"===J?"Create Account":"创建账户"})}),U()]})}):null]})})})}},32937:(e,t,s)=>{s.d(t,{A:()=>n});let n=(0,s(51894).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},41364:(e,t,s)=>{s.d(t,{A:()=>n});let n=(0,s(51894).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},43251:(e,t,s)=>{s.d(t,{A:()=>n});let n=(0,s(51894).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},49101:(e,t,s)=>{s.d(t,{A:()=>n});let n=(0,s(51894).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},55098:(e,t,s)=>{s.d(t,{L:()=>d});var n=s(89835),r=s(55931),a=s(15496),l=s(43251),o=s(77908),i=s(41364);function d(e){let{value:t,onChange:s,onValidate:d,placeholder:c="请输入手机号",className:u,disabled:x=!1,error:h,success:m=!1}=e,[p,f]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),y=(0,r.useRef)(null),v=/^1[3-9]\d{9}$/;return(0,r.useEffect)(()=>{let e=v.test(t);g(e),null==d||d(e)},[t,d]),(0,n.jsxs)("div",{className:(0,a.cn)("relative",u),children:[(0,n.jsxs)("div",{className:(0,a.cn)("relative flex items-center","bg-background border border-border","rounded-lg","transition-all duration-300 ease-in-out","shadow-sm",p&&"shadow-md border-primary",h&&"border-red-300 shadow-red-100",m&&"border-green-300 shadow-green-100",x&&"opacity-50 cursor-not-allowed"),children:[(0,n.jsx)("div",{className:"pl-4 pr-2",children:h?(0,n.jsx)(l.A,{className:"w-5 h-5 text-red-500"}):m||t&&b?(0,n.jsx)(o.A,{className:"w-5 h-5 text-green-500"}):(0,n.jsx)(i.A,{className:"w-5 h-5 text-gray-400"})}),(0,n.jsx)("input",{ref:y,type:"tel",value:t.length<=3?t:t.length<=7?"".concat(t.slice(0,3)," ").concat(t.slice(3)):"".concat(t.slice(0,3)," ").concat(t.slice(3,7)," ").concat(t.slice(7)),onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),s(t)},onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:c,disabled:x,maxLength:13,className:(0,a.cn)("flex-1 py-4 pr-4","bg-transparent","text-foreground placeholder-muted-foreground","text-base font-medium","outline-none","disabled:cursor-not-allowed")})]}),h&&(0,n.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,n.jsx)(l.A,{className:"w-4 h-4 text-red-500"}),(0,n.jsx)("span",{className:"text-sm text-red-600",children:h})]}),m&&!h&&(0,n.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,n.jsx)(o.A,{className:"w-4 h-4 text-green-500"}),(0,n.jsx)("span",{className:"text-sm text-green-600",children:"手机号格式正确"})]}),!h&&!m&&t&&!b&&(0,n.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"请输入正确的手机号码"})]})}},59445:(e,t,s)=>{s.d(t,{A:()=>n});let n=(0,s(51894).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},89407:(e,t,s)=>{s.d(t,{P:()=>d});var n=s(89835),r=s(55931),a=s(15496),l=s(43251),o=s(77908),i=s(49101);function d(e){let{value:t,onChange:s,onComplete:d,length:c=6,className:u,disabled:x=!1,error:h,success:m=!1,autoFocus:p=!0,size:f="md"}=e,[b,g]=(0,r.useState)(null),y=(0,r.useRef)([]),[v,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(p&&y.current[0]){var e;null==(e=y.current[0])||e.focus()}},[p]),(0,r.useEffect)(()=>{t.length===c?(j(!0),null==d||d(t)):j(!1)},[t,c,d]);let w=(e,n)=>{let r=t.split("");if(r[e]=n,s(r.join("").slice(0,c)),n&&e<c-1){var a;null==(a=y.current[e+1])||a.focus()}},N=e=>{var t;e.preventDefault();let n=e.clipboardData.getData("text").replace(/\D/g,"").slice(0,c);s(n);let r=Math.min(n.length,c-1);null==(t=y.current[r])||t.focus()},k=(()=>{switch(f){case"sm":return{box:"w-10 h-10 text-base",icon:"w-4 h-4",gap:"space-x-2"};case"lg":return{box:"w-14 h-14 text-2xl",icon:"w-6 h-6",gap:"space-x-4"};default:return{box:"w-12 h-12 text-lg",icon:"w-5 h-5",gap:"space-x-3"}}})();return(0,n.jsxs)("div",{className:(0,a.cn)("relative",u),children:[(0,n.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-4",children:[(0,n.jsx)("span",{className:(0,a.cn)(k.icon),children:h?(0,n.jsx)(l.A,{className:"w-5 h-5 text-red-500"}):m||v?(0,n.jsx)(o.A,{className:"w-5 h-5 text-green-500"}):(0,n.jsx)(i.A,{className:"w-5 h-5 text-gray-400"})}),(0,n.jsx)("span",{className:"ml-2 text-sm font-medium text-gray-700",children:"验证码"})]}),(0,n.jsx)("div",{className:(0,a.cn)("flex justify-center",k.gap),children:Array.from({length:c},(e,s)=>(0,n.jsx)("input",{ref:e=>{y.current[s]=e},type:"text",inputMode:"numeric",maxLength:1,value:t[s]||"",onChange:e=>((e,t)=>{let s=t.replace(/\D/g,"");s.length>1?w(e,s.slice(-1)):w(e,s)})(s,e.target.value),onKeyDown:e=>{var n,r,a;"Backspace"===e.key?!t[s]&&s>0?null==(n=y.current[s-1])||n.focus():w(s,""):"ArrowLeft"===e.key&&s>0?null==(r=y.current[s-1])||r.focus():"ArrowRight"===e.key&&s<c-1&&(null==(a=y.current[s+1])||a.focus())},onPaste:N,onFocus:()=>g(s),onBlur:()=>g(null),disabled:x,className:(0,a.cn)("text-center font-bold",k.box,"bg-background border border-border","rounded-lg","transition-all duration-300 ease-in-out","focus:outline-none focus:ring-2 focus:ring-primary/50","focus:border-primary focus:bg-accent","disabled:opacity-50 disabled:cursor-not-allowed",h&&"border-red-300 bg-red-50/20",m&&"border-green-300 bg-green-50/20",b===s&&"scale-105 shadow-lg")},s))}),h&&(0,n.jsxs)("div",{className:"mt-3 flex items-center justify-center space-x-1",children:[(0,n.jsx)(l.A,{className:"w-4 h-4 text-red-500"}),(0,n.jsx)("span",{className:"text-sm text-red-600",children:h})]}),m&&!h&&(0,n.jsxs)("div",{className:"mt-3 flex items-center justify-center space-x-1",children:[(0,n.jsx)(o.A,{className:"w-4 h-4 text-green-500"}),(0,n.jsx)("span",{className:"text-sm text-green-600",children:"验证码正确"})]}),v&&!h&&!m&&(0,n.jsxs)("div",{className:"mt-3 flex items-center justify-center space-x-1",children:[(0,n.jsx)(o.A,{className:"w-4 h-4 text-blue-500"}),(0,n.jsx)("span",{className:"text-sm text-blue-600",children:"验证码输入完成"})]})]})}s(92475)},92475:(e,t,s)=>{s.d(t,{$:()=>d});var n=s(89835),r=s(55931),a=s(48454),l=s(7951),o=s(15496);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 rounded-lg",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:d=!1,...c}=e,u=d?a.DX:"button";return(0,n.jsx)(u,{className:(0,o.cn)(i({variant:r,size:l,className:s})),ref:t,...c})});d.displayName="Button"}}]);