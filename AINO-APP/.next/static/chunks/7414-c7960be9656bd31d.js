"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7414],{3976:(e,t,r)=>{r.d(t,{Z:()=>o,q:()=>n});var a=r(89835),l=r(55931);let s=(0,l.createContext)(void 0);function n(e){let{children:t}=e,[r,n]=(0,l.useState)(!1),o=(0,l.useMemo)(()=>({isFrosted:r,setIsFrosted:n}),[r]);return(0,a.jsx)(s.Provider,{value:o,children:t})}function o(){let e=(0,l.useContext)(s);if(void 0===e)throw Error("useFrostedEffect must be used within a FrostedEffectProvider");return e}},7154:(e,t,r)=>{r.d(t,{a:()=>m});var a=r(89835),l=r(55931),s=r(16618),n=r(76539),o=r(40612),i=r(84647),c=r(77502),d=r(15496),u=r(59770),h=r(77860);function m(e){let{placeholder:t,value:r,onChange:m}=e,{palette:x}=(0,u.RW)(),f=x[0]||"#3b82f6",b=(0,l.useMemo)(()=>(function(e){if(!e.startsWith("#"))return"#000000";let t=Number.parseInt(e.slice(1,3),16),r=Number.parseInt(e.slice(3,5),16);return(299*t+587*r+114*Number.parseInt(e.slice(5,7),16))/1e3>=128?"#000000":"#ffffff"})(f),[f]),[g,p]=(0,l.useState)(!1),[w,v]=(0,l.useState)(()=>{if(r)try{let[e]=r.split("-");return Number.parseInt(e,10)}catch(e){}return new Date().getFullYear()}),y=(0,l.useMemo)(()=>{if(!r)return null;try{let[e,t]=r.split("-");return new Date(Number.parseInt(e,10),Number.parseInt(t,10)-1)}catch(e){return null}},[r]),j=e=>{v(t=>t+e)};return(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("button",{onClick:()=>p(!0),className:(0,d.cn)("w-full flex items-center justify-between px-3.5 py-2.5 bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300 text-sm",g&&"ring-2 shadow-lg"),style:{"--tw-ring-color":f},children:[(0,a.jsx)("span",{className:y?"text-gray-900":"text-gray-400",children:y?(0,i.GP)(y,"yyyy年MM月"):t}),(0,a.jsx)(s.A,{className:"w-4 h-4 text-gray-400"})]}),(0,a.jsx)(h.J,{isOpen:g,onClose:()=>p(!1),title:"选择年月",children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("button",{onClick:()=>j(-1),className:"p-1.5 rounded-full hover:bg-gray-500/10",children:(0,a.jsx)(n.A,{className:"w-4 h-4"})}),(0,a.jsxs)("span",{className:"font-semibold text-gray-800 text-lg",children:[w,"年"]}),(0,a.jsx)("button",{onClick:()=>j(1),className:"p-1.5 rounded-full hover:bg-gray-500/10",children:(0,a.jsx)(o.A,{className:"w-4 h-4"})})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"].map((e,t)=>{let r=new Date(w,t),l=y&&(0,c.t)(r,y);return(0,a.jsx)("button",{onClick:()=>(e=>{let t="".concat(w,"-").concat(String(e+1).padStart(2,"0"));null==m||m(t),p(!1)})(t),className:(0,d.cn)("p-3 rounded-lg transition-colors text-sm font-medium","hover:bg-gray-500/10",!l&&"text-gray-700"),style:l?{backgroundColor:f,color:b}:{},children:e},t)})})]})})]})}},31076:(e,t,r)=>{r.d(t,{S:()=>u});var a=r(89835),l=r(55931),s=r(85794),n=r(77908),o=r(15496),i=r(36012),c=r(59770),d=r(77860);function u(e){let{value:t,onChange:r,placeholder:u="请选择省/市"}=e,{palette:h}=(0,c.RW)(),m=h[0]||"#3b82f6",[x,f]=(0,l.useState)(!1),[b,g]=(0,l.useState)(null),[p,w]=(0,l.useState)("");(0,l.useEffect)(()=>{if(t){let[e,r]=t.split(" - "),a=i._.find(t=>t.name===e);a&&(g(a),w(r||""))}else g(null),w("")},[t]);let v=t||u;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>f(!0),className:(0,o.cn)("w-full flex items-center justify-between px-4 py-3 bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300 text-sm"),children:[(0,a.jsx)("span",{className:t?"text-gray-900":"text-gray-400",children:v}),(0,a.jsx)(s.A,{className:"w-4 h-4 text-gray-400"})]}),(0,a.jsx)(d.J,{isOpen:x,onClose:()=>f(!1),title:"选择城市",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:"w-1/2 flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"省份"}),i._.map(e=>(0,a.jsxs)("button",{onClick:()=>{g(e),w("")},className:(0,o.cn)("w-full text-left px-3 py-2.5 rounded-lg text-sm transition-all duration-200 flex items-center justify-between",(null==b?void 0:b.name)===e.name?"font-medium shadow-sm":"hover:bg-muted/50"),style:(null==b?void 0:b.name)===e.name?{backgroundColor:"".concat(m,"15"),color:m,borderColor:"".concat(m,"30")}:{},children:[(0,a.jsx)("span",{children:e.name}),(null==b?void 0:b.name)===e.name&&(0,a.jsx)(n.A,{className:"w-4 h-4",style:{color:m}})]},e.name))]})}),(0,a.jsx)("div",{className:"w-1/2 flex flex-col",children:(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-muted-foreground mb-2 px-2",children:"城市"}),b?b.cities.map(e=>(0,a.jsxs)("button",{onClick:()=>(e=>{if(b){let t="".concat(b.name," - ").concat(e);w(e),null==r||r(t),f(!1)}})(e),className:(0,o.cn)("w-full text-left px-3 py-2.5 rounded-lg text-sm transition-all duration-200 flex items-center justify-between",p===e?"font-medium shadow-sm":"hover:bg-muted/50"),style:p===e?{backgroundColor:"".concat(m,"15"),color:m,borderColor:"".concat(m,"30")}:{},children:[(0,a.jsx)("span",{children:e}),p===e&&(0,a.jsx)(n.A,{className:"w-4 h-4",style:{color:m}})]},e)):(0,a.jsx)("div",{className:"px-3 py-8 text-center text-sm text-muted-foreground",children:"请先选择省份"})]})})]})})]})}},35281:(e,t,r)=>{function a(e){let t=e.replace(/\s/g,"");if(t.startsWith("#")){let e=t.replace("#",""),r=3===e.length?e.split("").map(e=>e+e).join(""):e;if(6!==r.length)return null;let a=parseInt(r.substring(0,2),16);return{r:a,g:parseInt(r.substring(2,4),16),b:parseInt(r.substring(4,6),16)}}let r=t.match(/rgba?\((\d+),(\d+),(\d+)(?:,([\d.]+))?\)/);if(r)return{r:parseInt(r[1],10),g:parseInt(r[2],10),b:parseInt(r[3],10)};let a=t.match(/hsla?\((\d+),(\d+)%,(\d+)%(?:,([\d.]+))?\)/);if(a){let e=parseInt(a[1],10);return function(e,t,r){let a=(1-Math.abs(2*r-1))*t,l=a*(1-Math.abs(e/60%2-1)),s=r-a/2,n=0,o=0,i=0;return 0<=e&&e<60?(n=a,o=l,i=0):60<=e&&e<120?(n=l,o=a,i=0):120<=e&&e<180?(n=0,o=a,i=l):180<=e&&e<240?(n=0,o=l,i=a):240<=e&&e<300?(n=l,o=0,i=a):300<=e&&e<360&&(n=a,o=0,i=l),{r:Math.round((n+s)*255),g:Math.round((o+s)*255),b:Math.round((i+s)*255)}}(e,parseInt(a[2],10)/100,parseInt(a[3],10)/100)}return t.includes("var(")&&console.warn("CSS变量颜色需要从DOM获取实际值:",t),null}function l(e,t,r){let a=e=>{let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)},l=a(e);return .2126*l+.7152*a(t)+.0722*a(r)}function s(e,t){let r=l(e.r,e.g,e.b),a=l(t.r,t.g,t.b);return(Math.max(r,a)+.05)/(Math.min(r,a)+.05)}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";if("string"!=typeof e)return console.warn("getOptimalTextColor: backgroundColor must be a string, got:",typeof e,e),"primary"===t?"#FFFFFF":"#000000";if("primary"===t)return"#FFFFFF";if("outline"===t||"ghost"===t)return"currentColor";let r=null;return(e.includes("var(")&&(r=function(e){let t=e.match(/var\(([^)]+)\)/);if(!t)return null;let r=function(e){try{return getComputedStyle(document.documentElement).getPropertyValue(e).trim()||null}catch(t){return console.warn("Failed to get CSS variable value:",e,t),null}}(t[1]);return r?a(r):null}(e)),r||(r=a(e)),r)?(l(r.r,r.g,r.b),s(r,{r:255,g:255,b:255})>s(r,{r:0,g:0,b:0})?"#FFFFFF":"#000000"):(console.warn("无法解析背景颜色，使用默认文字颜色:",e),"secondary"===t?"#000000":"#FFFFFF")}function o(e,t,r){return{backgroundColor:t,color:function(e,t,r){if(r)return r;if(!t)switch(e){case"primary":default:return"#FFFFFF";case"secondary":return"#000000";case"outline":case"ghost":return"currentColor"}return n(t,e)}(e,t,r)}}r.d(t,{RP:()=>n,fk:()=>o})},36012:(e,t,r)=>{r.d(t,{_:()=>a});let a=[{name:"北京",cities:["北京市"]},{name:"广东",cities:["广州市","深圳市","珠���市","佛山市"]},{name:"江苏",cities:["南京市","苏州市","无锡市","常州市"]},{name:"浙江",cities:["杭州市","宁波市","温州市","嘉兴市"]}]},59466:(e,t,r)=>{r.d(t,{B:()=>w});var a=r(89835),l=r(55931),s=r(68232),n=r(59851),o=r(92517),i=r(65781),c=r(98240),d=r(71374),u=r(61833),h=r(36722),m=r(77908),x=r(15496),f=r(59770),b=r(77860),g=r(60267),p=r(68607);function w(e){let{value:t,onChange:r,placeholder:w="点击上传图片",className:v,accept:y="image/*",maxSize:j=5,shape:N="square",size:C="md",disabled:k=!1,showPreview:M=!0,enableCrop:F=!0,cropAspectRatio:P}=e,{palette:S}=(0,f.RW)(),I=S[0]||"#3b82f6",D=(0,l.useMemo)(()=>(function(e){if(!e.startsWith("#"))return"#000000";let t=Number.parseInt(e.slice(1,3),16),r=Number.parseInt(e.slice(3,5),16);return(299*t+587*r+114*Number.parseInt(e.slice(5,7),16))/1e3>=128?"#000000":"#ffffff"})(I),[I]),[A,E]=(0,l.useState)(!1),[R,W]=(0,l.useState)(!1),[L,O]=(0,l.useState)(null),[T,q]=(0,l.useState)(!1),[_,B]=(0,l.useState)(null),[U,J]=(0,l.useState)({width:0,height:0}),[z,G]=(0,l.useState)({x:50,y:50,width:200,height:200}),[H,K]=(0,l.useState)(!1),[Y,X]=(0,l.useState)({x:0,y:0}),[Z,V]=(0,l.useState)({x:0,y:0,width:200,height:200,scale:1,rotation:0}),Q=(0,l.useRef)(null),$=(0,l.useRef)(null),ee=(0,l.useRef)(null),et={sm:{container:"w-16 h-16",text:"text-xs",icon:"w-4 h-4"},md:{container:"w-24 h-24",text:"text-sm",icon:"w-6 h-6"},lg:{container:"w-32 h-32",text:"text-base",icon:"w-8 h-8"}}[C],er={square:"rounded-xl",circle:"rounded-full",rectangle:"rounded-xl aspect-[4/3]"}[N],ea=(0,l.useCallback)(()=>new Promise(e=>{let t=$.current,r=ee.current;if(!t||!r||!_)return e("");let a=t.getContext("2d");if(!a)return e("");let l=r.naturalWidth/U.width,s=r.naturalHeight/U.height,n=z.x*l,o=z.y*s,i=z.width*l,c=z.height*s,d="circle"===N?Math.min(z.width,z.height):z.width;t.width=d,t.height="rectangle"===N?z.height:d,a.clearRect(0,0,t.width,t.height),a.save(),"circle"===N&&(a.beginPath(),a.arc(d/2,d/2,d/2,0,2*Math.PI),a.clip()),0!==Z.rotation&&(a.translate(t.width/2,t.height/2),a.rotate(Z.rotation*Math.PI/180),a.translate(-t.width/2,-t.height/2)),a.drawImage(r,n,o,i,c,0,0,t.width,t.height),a.restore(),e(t.toDataURL("image/jpeg",.9))}),[N,_,U,z,Z]),el=async e=>{if(O(null),!e.type.startsWith("image/"))return void O("请选择图片文件");if(e.size>1024*j*1024)return void O("文件大小不能超过 ".concat(j,"MB"));E(!0);try{let t=URL.createObjectURL(e);if(F){B(t);let e=new window.Image;e.onload=()=>{J({width:e.width,height:e.height});let t=P||("circle"===N||"square"===N?1:4/3),r=.8*Math.min(e.width,e.height),a=r,l="circle"===N||"square"===N?r:r/t;G({x:(e.width-a)/2,y:(e.height-l)/2,width:a,height:l}),V({x:0,y:0,width:a,height:l,scale:1,rotation:0}),q(!0),E(!1)},e.src=t}else await new Promise(e=>setTimeout(e,1e3)),null==r||r(t),E(!1)}catch(e){O("上传失败，请重试"),E(!1)}},es=async()=>{if(_){E(!0);try{let e=await ea();null==r||r(e),q(!1),B(null)}catch(e){O("图片处理失败")}finally{E(!1)}}},en=()=>{q(!1),B(null),E(!1)},eo=()=>{K(!1)},ei=e=>{let t=P||("circle"===N||"square"===N?1:4/3),r=Math.min(Math.max(z.width*("increase"===e?1.1:.9),50),U.width),a=r/t;a>U.height||G(e=>({x:Math.max(0,e.x-(r-e.width)/2),y:Math.max(0,e.y-(a-e.height)/2),width:r,height:a}))};return(0,a.jsxs)("div",{className:(0,x.cn)("relative",v),children:[(0,a.jsxs)("div",{className:(0,x.cn)("relative border-2 border-dashed transition-all duration-300 cursor-pointer overflow-hidden",et.container,er,R?"border-blue-400 bg-blue-50":t?"border-transparent":"border-gray-300 hover:border-gray-400",k&&"opacity-50 cursor-not-allowed","bg-white/70 backdrop-blur-lg shadow-sm"),onClick:()=>{var e;k||null==(e=Q.current)||e.click()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),W(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),W(!1)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),W(!1),k)return;let t=e.dataTransfer.files;t&&t[0]&&el(t[0])},children:[(0,a.jsx)("input",{ref:Q,type:"file",accept:y,onChange:e=>{let t=e.target.files;t&&t[0]&&el(t[0])},className:"hidden",disabled:k}),t&&M?(0,a.jsxs)("div",{className:"relative w-full h-full",children:[(0,a.jsx)(p.default,{src:t,alt:"上传的图片",fill:!0,className:(0,x.cn)("object-cover",er)}),!k&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),null==r||r(""),O(null),B(null),Q.current&&(Q.current.value="")},className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-md transition-colors z-10",style:{backgroundColor:I,color:D},children:(0,a.jsx)(s.A,{className:"w-3 h-3"})}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"w-6 h-6 text-white"})})]}):(0,a.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center gap-2 p-2",children:A?(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:I,borderTopColor:"transparent"}}),(0,a.jsx)("span",{className:(0,x.cn)(et.text,"text-gray-600"),children:"上传中..."})]}):(0,a.jsxs)(a.Fragment,{children:[R?(0,a.jsx)(o.A,{className:(0,x.cn)(et.icon,"text-blue-500")}):(0,a.jsx)(i.A,{className:(0,x.cn)(et.icon,"text-gray-400")}),(0,a.jsx)("span",{className:(0,x.cn)(et.text,"text-gray-600 text-center leading-tight"),children:w})]})})]}),L&&(0,a.jsx)("p",{className:"mt-1 text-xs text-red-500",children:L}),j&&(0,a.jsxs)("p",{className:"mt-1 text-xs text-gray-400",children:["支持 JPG、PNG 格式，最大 ",j,"MB",F&&"，支持裁剪编辑"]}),(0,a.jsx)("canvas",{ref:$,className:"hidden"}),(0,a.jsx)("img",{ref:ee,className:"hidden",alt:""}),(0,a.jsx)(b.J,{isOpen:T,onClose:en,title:"编辑图片",children:(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsx)("div",{className:"relative bg-gray-100 rounded-lg overflow-hidden",style:{height:"300px"},children:_&&(0,a.jsx)("div",{className:"relative w-full h-full select-none",onMouseMove:e=>{if(!H)return;let t=Math.max(0,Math.min(e.clientX-Y.x,U.width-z.width)),r=Math.max(0,Math.min(e.clientY-Y.y,U.height-z.height));G(e=>({...e,x:t,y:r}))},onMouseUp:eo,onMouseLeave:eo,children:(0,a.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,a.jsx)(p.default,{ref:ee,src:_,alt:"原图",width:300,height:300,className:"max-w-full max-h-full object-contain",style:{transform:"scale(".concat(Z.scale,") rotate(").concat(Z.rotation,"deg)")},onLoad:e=>{let t=e.target,r=t.offsetWidth,a=t.offsetHeight;J({width:r,height:a});let l=.6*Math.min(r,a),s=l/(P||1);G({x:(r-l)/2,y:(a-s)/2,width:l,height:s})}}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40",children:(0,a.jsxs)("div",{className:"absolute border-2 border-white shadow-lg cursor-move",style:{left:"".concat(z.x,"px"),top:"".concat(z.y,"px"),width:"".concat(z.width,"px"),height:"".concat(z.height,"px"),borderRadius:"circle"===N?"50%":"8px"},onMouseDown:e=>{K(!0),X({x:e.clientX-z.x,y:e.clientY-z.y})},children:[(0,a.jsx)("div",{className:"absolute inset-0 overflow-hidden",style:{borderRadius:"circle"===N?"50%":"8px"},children:(0,a.jsx)(p.default,{src:_,alt:"裁剪预览",width:300,height:300,className:"object-contain",style:{transform:"translate(".concat(-z.x,"px, ").concat(-z.y,"px) scale(").concat(Z.scale,") rotate(").concat(Z.rotation,"deg)"),transformOrigin:"".concat(z.x+z.width/2,"px ").concat(z.y+z.height/2,"px")}})}),(0,a.jsx)("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-white border border-gray-300 rounded-full"}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-white border border-gray-300 rounded-full"}),(0,a.jsx)("div",{className:"absolute -bottom-1 -left-1 w-3 h-3 bg-white border border-gray-300 rounded-full"}),(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-white border border-gray-300 rounded-full"})]})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-center",style:{color:"var(--card-title-color)"},children:"图片操作"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{V(e=>({...e,rotation:(e.rotation+90)%360}))},className:"p-2 rounded-lg bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm hover:shadow-md transition-all",title:"旋转90度",children:(0,a.jsx)(c.A,{className:"w-4 h-4",style:{color:"var(--card-text-color)"}})}),(0,a.jsx)("button",{onClick:()=>{V(e=>({...e,scale:Math.max(e.scale-.1,.5)}))},className:"p-2 rounded-lg bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm hover:shadow-md transition-all",title:"缩小图片",children:(0,a.jsx)(d.A,{className:"w-4 h-4",style:{color:"var(--card-text-color)"}})}),(0,a.jsx)("button",{onClick:()=>{V(e=>({...e,scale:Math.min(e.scale+.1,3)}))},className:"p-2 rounded-lg bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm hover:shadow-md transition-all",title:"放大图片",children:(0,a.jsx)(u.A,{className:"w-4 h-4",style:{color:"var(--card-text-color)"}})})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-center",style:{color:"var(--card-title-color)"},children:"裁剪区域"}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>ei("decrease"),className:"p-2 rounded-lg bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm hover:shadow-md transition-all",title:"缩小裁剪区域",children:[(0,a.jsx)(h.A,{className:"w-4 h-4",style:{color:"var(--card-text-color)"}}),(0,a.jsx)("span",{className:"text-xs ml-1",children:"-"})]}),(0,a.jsxs)("button",{onClick:()=>ei("increase"),className:"p-2 rounded-lg bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm hover:shadow-md transition-all",title:"放大裁剪区域",children:[(0,a.jsx)(h.A,{className:"w-4 h-4",style:{color:"var(--card-text-color)"}}),(0,a.jsx)("span",{className:"text-xs ml-1",children:"+"})]})]})]})]}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsxs)("p",{className:"text-xs",style:{color:"var(--card-text-color)"},children:["缩放: ",Math.round(100*Z.scale),"% | 旋转: ",Z.rotation,"\xb0"]}),(0,a.jsxs)("p",{className:"text-xs",style:{color:"var(--card-text-color)"},children:["裁剪: ",Math.round(z.width),"\xd7",Math.round(z.height),"px"]}),(0,a.jsx)("p",{className:"text-xs text-blue-600",children:"\uD83D\uDCA1 拖拽白色框调整裁剪区域"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsxs)(g.K,{variant:"default",onClick:en,className:"flex-1",children:[(0,a.jsx)(s.A,{className:"w-4 h-4 mr-2"}),"取消"]}),(0,a.jsxs)(g.K,{onClick:es,className:"flex-1",disabled:A,children:[A?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),A?"处理中...":"确认"]})]})]})})]})}},59770:(e,t,r)=>{r.d(t,{Fs:()=>i,RW:()=>c,tq:()=>d});var a=r(89835),l=r(55931);let s=[{name:"默认",colors:["#6366f1","#8b5cf6","#f59e0b","#22c55e","#ef4444","#64748b"]}],n=[{name:"默认",colors:["#6366f1","#8b5cf6","#f59e0b","#22c55e","#ef4444","#64748b"]}],o=(0,l.createContext)(void 0);function i(e){let{children:t}=e,[r,i]=(0,l.useState)(s[0].name),[c,d]=(0,l.useState)(n[0].name),[u,h]=(0,l.useState)([]),[m,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=e=>{h(e.detail)},t=e=>{x(e.detail)};return window.addEventListener("unified-theme-chart-colors-updated",e),window.addEventListener("unified-theme-component-colors-updated",t),()=>{window.removeEventListener("unified-theme-chart-colors-updated",e),window.removeEventListener("unified-theme-component-colors-updated",t)}},[]);let f=e=>{i(e)},b=e=>{n.find(t=>t.name===e)&&d(e)},g=(0,l.useMemo)(()=>{if(m)return[m.primary,m.secondary,m.danger,...s[0].colors.slice(3)];let e=s.find(e=>e.name===r);return e?e.colors:s[0].colors},[r,m]),p=(0,l.useMemo)(()=>{if(u.length>0)return u;let e=n.find(e=>e.name===c);return e?e.colors:n[0].colors},[c,u]),w=(0,l.useMemo)(()=>({chartPalette:g,activeChartPaletteName:r,applyChartPalette:f,dataChartPalette:p,activeDataChartPaletteName:c,applyDataChartPalette:b}),[g,r,p,c]);return(0,a.jsx)(o.Provider,{value:w,children:t})}function c(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useChartTheme must be used within a UnifiedChartThemeProvider");return{palette:e.chartPalette,activePaletteName:e.activeChartPaletteName,applyPalette:e.applyChartPalette}}function d(){let e=(0,l.useContext)(o);if(void 0===e)throw Error("useDataChartTheme must be used within a UnifiedChartThemeProvider");return{palette:e.dataChartPalette,activePaletteName:e.activeDataChartPaletteName,applyPalette:e.applyDataChartPalette}}},60267:(e,t,r)=>{r.d(t,{K:()=>c});var a=r(89835),l=r(55931),s=r(15496),n=r(59770),o=r(3976),i=r(35281);function c(e){let{className:t,variant:r="default",...c}=e,{palette:d}=(0,n.RW)(),{isFrosted:u}=(0,o.Z)(),h=d[0]||"hsl(var(--primary))",m=(0,l.useMemo)(()=>(0,i.RP)(h,"primary"),[h]),x="px-5 py-2 text-sm font-semibold rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",f=u?"backdrop-blur-sm border border-white/40 shadow-lg":"shadow-md";return"primary"===r?(0,a.jsx)("button",{className:(0,s.cn)(x,f,"focus:ring-2",t),style:{backgroundColor:u?"".concat(h,"B3"):h,color:m,"--tw-ring-color":h},...c}):(0,a.jsx)("button",{className:(0,s.cn)(x,f,u?"bg-white/60 text-gray-900":"bg-white text-black hover:bg-gray-50","focus:ring-gray-400",t),...c})}},77860:(e,t,r)=>{r.d(t,{J:()=>c});var a=r(89835),l=r(55931),s=r(68232),n=r(15496),o=r(41657),i=r(93914);function c(e){let{isOpen:t,onClose:r,title:c,children:d,className:u}=e,{theme:h}=(0,o.b)();if(l.useEffect(()=>{let e=e=>{"Escape"===e.key&&t&&r()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,r]),!t)return null;let m={color:h.textColor,fontFamily:h.fontFamily,backgroundColor:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(12px) saturate(120%)",WebkitBackdropFilter:"blur(12px) saturate(120%)",border:"none",boxShadow:"0 -8px 32px rgba(0, 0, 0, 0.12), 0 -2px 8px rgba(0, 0, 0, 0.08)"},x=(0,a.jsxs)("div",{className:"fixed inset-0 z-[9999]",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/40 animate-in fade-in-0 duration-300",style:{backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},onClick:r}),(0,a.jsx)("div",{className:"absolute inset-x-0 bottom-0 z-10",children:(0,a.jsxs)("div",{className:(0,n.cn)("w-full max-h-[85vh] rounded-t-3xl animate-in slide-in-from-bottom-full duration-300 ease-out",u),style:m,children:[c&&(0,a.jsxs)("div",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-gray-100/60",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:c}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100/80 rounded-full transition-colors duration-200","aria-label":"关闭",children:(0,a.jsx)(s.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,a.jsx)("div",{className:"overflow-y-auto",style:{height:c?"calc(85vh - 80px)":"85vh",maxHeight:c?"calc(85vh - 80px)":"85vh",scrollbarGutter:"stable",scrollbarWidth:"thin",scrollbarColor:"rgba(0, 0, 0, 0.2) transparent"},children:d})]})})]});return(0,i.createPortal)(x,document.body)}},97701:(e,t,r)=>{r.d(t,{o:()=>n});var a=r(89835),l=r(15496),s=r(59770);function n(e){let{checked:t,onCheckedChange:r,id:n}=e,{palette:o}=(0,s.RW)(),i=o[0]||"#3b82f6";return(0,a.jsx)("button",{id:n,type:"button",role:"switch","aria-checked":t,onClick:()=>r(!t),className:(0,l.cn)("relative inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-all duration-300 ease-in-out","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white/50"),style:{backgroundColor:t?i:"#e5e7eb","--tw-ring-color":i},children:(0,a.jsx)("span",{"aria-hidden":"true",className:(0,l.cn)("pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow-lg ring-0 transition duration-300 ease-in-out",t?"translate-x-5":"translate-x-0")})})}}}]);