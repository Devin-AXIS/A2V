"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4472],{12680:(e,t,r)=>{r.d(t,{L:()=>l});var o=r(77455),a=r(29088);let n=(()=>{let e=o.A.create({baseURL:a.env.NEXT_PUBLIC_API_BASE_URL||"http://47.94.52.142::3007",timeout:1e4,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use(e=>{let t=window.localStorage.getItem("aino_auth_token")||window.localStorage.getItem("aino_token")||"";return t&&(e.headers.Authorization="Bearer ".concat(t)),"get"===e.method&&(e.params={...e.params,_t:Date.now()}),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("aino_auth_token"),window.location.href="/auth/login"),Promise.reject(e)}),e})(),s=async e=>{try{return(await n(e)).data}catch(o){var t;if(!o.response)throw Error("Network error - please check your connection");let e=o.response.status,r=(null==(t=o.response.data)?void 0:t.message)||o.message;throw Error("Request failed (".concat(e,"): ").concat(r))}},l={get:(e,t)=>s({...t,method:"GET",url:e}),post:(e,t,r)=>s({...r,method:"POST",url:e,data:t}),put:(e,t,r)=>s({...r,method:"PUT",url:e,data:t}),patch:(e,t,r)=>s({...r,method:"PATCH",url:e,data:t}),delete:(e,t)=>s({...t,method:"DELETE",url:e}),upload:(e,t,r)=>{let o=new FormData;return o.append("file",t),s({...r,method:"POST",url:e,data:o,headers:{"Content-Type":"multipart/form-data",...null==r?void 0:r.headers}})},download:async(e,t,r)=>{try{let o=await n({...r,method:"GET",url:e,responseType:"blob"}),a=new Blob([o.data]),s=window.URL.createObjectURL(a),l=document.createElement("a");l.href=s,l.download=t||"download",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(s)}catch(e){throw Error("Download failed")}}}},15496:(e,t,r)=>{r.d(t,{S:()=>s,cn:()=>n});var o=r(98951),a=r(45318);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,o.$)(t))}function s(){let e=Math.floor(0xffffff*Math.random()).toString(16).padStart(6,"0");return"#".concat(e)}},32937:(e,t,r)=>{r.d(t,{A:()=>o});let o=(0,r(51894).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},41364:(e,t,r)=>{r.d(t,{A:()=>o});let o=(0,r(51894).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},43251:(e,t,r)=>{r.d(t,{A:()=>o});let o=(0,r(51894).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},55098:(e,t,r)=>{r.d(t,{L:()=>c});var o=r(89835),a=r(55931),n=r(15496),s=r(43251),l=r(77908),i=r(41364);function c(e){let{value:t,onChange:r,onValidate:c,placeholder:d="请输入手机号",className:u,disabled:g=!1,error:h,success:m=!1}=e,[f,p]=(0,a.useState)(!1),[v,x]=(0,a.useState)(!1),w=(0,a.useRef)(null),y=/^1[3-9]\d{9}$/;return(0,a.useEffect)(()=>{let e=y.test(t);x(e),null==c||c(e)},[t,c]),(0,o.jsxs)("div",{className:(0,n.cn)("relative",u),children:[(0,o.jsxs)("div",{className:(0,n.cn)("relative flex items-center","bg-background border border-border","rounded-lg","transition-all duration-300 ease-in-out","shadow-sm",f&&"shadow-md border-primary",h&&"border-red-300 shadow-red-100",m&&"border-green-300 shadow-green-100",g&&"opacity-50 cursor-not-allowed"),children:[(0,o.jsx)("div",{className:"pl-4 pr-2",children:h?(0,o.jsx)(s.A,{className:"w-5 h-5 text-red-500"}):m||t&&v?(0,o.jsx)(l.A,{className:"w-5 h-5 text-green-500"}):(0,o.jsx)(i.A,{className:"w-5 h-5 text-gray-400"})}),(0,o.jsx)("input",{ref:w,type:"tel",value:t.length<=3?t:t.length<=7?"".concat(t.slice(0,3)," ").concat(t.slice(3)):"".concat(t.slice(0,3)," ").concat(t.slice(3,7)," ").concat(t.slice(7)),onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),r(t)},onFocus:()=>p(!0),onBlur:()=>p(!1),placeholder:d,disabled:g,maxLength:13,className:(0,n.cn)("flex-1 py-4 pr-4","bg-transparent","text-foreground placeholder-muted-foreground","text-base font-medium","outline-none","disabled:cursor-not-allowed")})]}),h&&(0,o.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,o.jsx)(s.A,{className:"w-4 h-4 text-red-500"}),(0,o.jsx)("span",{className:"text-sm text-red-600",children:h})]}),m&&!h&&(0,o.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,o.jsx)(l.A,{className:"w-4 h-4 text-green-500"}),(0,o.jsx)("span",{className:"text-sm text-green-600",children:"手机号格式正确"})]}),!h&&!m&&t&&!v&&(0,o.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"请输入正确的手机号码"})]})}},59445:(e,t,r)=>{r.d(t,{A:()=>o});let o=(0,r(51894).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},79514:(e,t,r)=>{r.d(t,{A:()=>i,AuthProvider:()=>l});var o=r(55931);let a=(0,o.createContext)(void 0),n={USER:"aino_user",AUTH_TOKEN:"aino_auth_token",APP_ID:"CURRENT_APP_ID"},s=[];function l(e){let{children:t}=e,[r,l]=(0,o.useState)({user:null,isAuthenticated:!1,isLoading:!0});(0,o.useEffect)(()=>{try{let e=localStorage.getItem(n.USER),t=localStorage.getItem(n.AUTH_TOKEN);if(e&&t){let t=JSON.parse(e);l({user:t,isAuthenticated:!0,isLoading:!1})}else l({user:null,isAuthenticated:!1,isLoading:!1})}catch(e){console.error("初始化认证状态失败:",e),l({user:null,isAuthenticated:!1,isLoading:!1})}},[]);let i=async e=>{try{var t,r;let o;l(e=>({...e,isLoading:!0})),await new Promise(e=>setTimeout(e,1e3));let a={};Object.keys(e).forEach(t=>{t.indexOf("followers")>-1&&(a.followers=e[t]),t.indexOf("following")>-1&&(a.following=e[t]),t.indexOf("posts")>-1&&(a.posts=e[t]),t.indexOf("points")>-1&&(a.points=e[t])}),o={id:Date.now().toString(),phone:e.phone,name:e.name,avatar:e.avatar,points:a.points||0,followers:a.followers||0,following:a.following||0,posts:a.posts||0,createdAt:new Date().toISOString(),extends:{...e}},s.push(o);let i=null==o||null==(t=o.extends)?void 0:t.token;null==o||null==(r=o.extends)||delete r.token;{localStorage.setItem(n.USER,JSON.stringify(o)),localStorage.setItem(n.AUTH_TOKEN,i);let e=localStorage.getItem(n.APP_ID);e&&(localStorage.setItem("".concat(n.USER,":").concat(e),JSON.stringify(o)),localStorage.setItem("".concat(n.AUTH_TOKEN,":").concat(e),i))}return l({user:o,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("登录失败:",e),l(e=>({...e,isLoading:!1})),!1}},c=async e=>{try{if(l(e=>({...e,isLoading:!0})),s.find(t=>t.phone===e.phone))throw Error("该手机号已注册");let t={id:Date.now().toString(),phone:e.phone,name:e.name||"用户".concat(e.phone.slice(-4)),avatar:"/generic-user-avatar.png",points:100,followers:0,following:0,posts:0,createdAt:new Date().toISOString()};s.push(t);let r="mock_token_".concat(Date.now());{localStorage.setItem(n.USER,JSON.stringify(t)),localStorage.setItem(n.AUTH_TOKEN,r);let e=localStorage.getItem(n.APP_ID);e&&(localStorage.setItem("".concat(n.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(n.AUTH_TOKEN,":").concat(e),r))}return l({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("注册失败:",e),l(e=>({...e,isLoading:!1})),!1}},d={...r,login:i,register:c,logout:()=>{localStorage.removeItem(n.USER),localStorage.removeItem(n.AUTH_TOKEN),l({user:null,isAuthenticated:!1,isLoading:!1})},updateUser:e=>{if(r.user){let t={...r.user,...e};l(e=>({...e,user:t})),localStorage.setItem(n.USER,JSON.stringify(t))}}};return o.createElement(a.Provider,{value:d},t)}function i(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},92475:(e,t,r)=>{r.d(t,{$:()=>c});var o=r(89835),a=r(55931),n=r(48454),s=r(7951),l=r(15496);let i=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 rounded-lg",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:s,asChild:c=!1,...d}=e,u=c?n.DX:"button";return(0,o.jsx)(u,{className:(0,l.cn)(i({variant:a,size:s,className:r})),ref:t,...d})});c.displayName="Button"}}]);