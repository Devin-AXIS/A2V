(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7344],{13391:(t,e,l)=>{"use strict";l.d(e,{A:()=>o});let o=(0,l(51894).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},14808:(t,e,l)=>{"use strict";l.r(e),l.d(e,{default:()=>c});var o=l(89835),a=l(79588),n=l(17409),i=l(55931),r=l(33378),s=l(26077);function c(){var t,e,l,c,u,d;let h=(0,a.useParams)(),p=(0,a.useSearchParams)(),v=(null==h?void 0:h.locale)||"zh",g=(null==h?void 0:h.id)||"unknown",y=(0,i.useMemo)(()=>"dynamic_page_layout_p-".concat(g,"_").concat(v),[g,v]),m=(0,i.useMemo)(()=>"APP_PAGE_".concat(g),[g]),[f,b]=(0,i.useState)(null),[N,A]=(0,i.useState)(!1);(0,i.useEffect)(()=>{try{(0,s.a)()}catch(t){}},[]),(0,i.useEffect)(()=>{try{let t=null==p?void 0:p.get("pageCfg"),e=null==p?void 0:p.get("cfgId");if(t)try{let e=JSON.parse(t),l={showHeader:!0,showBottomNav:!1,showBack:!1,...(null==e?void 0:e.options)||{}};localStorage.setItem(m,JSON.stringify({...e,options:l}));let o="/p-".concat(g);localStorage.setItem("APP_PAGE_ROUTE_".concat(o),JSON.stringify({...e,options:l})),b({title:null==e?void 0:e.title,layout:null==e?void 0:e.layout,route:null==e?void 0:e.route,options:l,contentNav:null==e?void 0:e.contentNav,topBar:null==e?void 0:e.topBar,tabContent:null==e?void 0:e.tabContent})}catch(t){}else e&&(async()=>{try{var t;let l=await fetch("http://localhost:3007/api/page-configs/".concat(encodeURIComponent(e))),o=await l.json().catch(()=>null),a=o&&(null!=(t=o.data)?t:o);if(l.ok&&a){let t={showHeader:!0,showBottomNav:!1,showBack:!1,...(null==a?void 0:a.options)||{}};localStorage.setItem(m,JSON.stringify({...a,options:t}));let e="/p-".concat(g);localStorage.setItem("APP_PAGE_ROUTE_".concat(e),JSON.stringify({...a,options:t})),b({title:null==a?void 0:a.title,layout:null==a?void 0:a.layout,route:null==a?void 0:a.route,options:t,contentNav:null==a?void 0:a.contentNav,topBar:null==a?void 0:a.topBar,tabContent:null==a?void 0:a.tabContent})}}catch(t){}})();let l=localStorage.getItem(m);if(l){let t=JSON.parse(l),e={showHeader:!0,showBottomNav:!1,showBack:!1,...(null==t?void 0:t.options)||{}};b({title:null==t?void 0:t.title,layout:null==t?void 0:t.layout,route:null==t?void 0:t.route,options:e,contentNav:null==t?void 0:t.contentNav,topBar:null==t?void 0:t.topBar,tabContent:null==t?void 0:t.tabContent})}if(!localStorage.getItem(y)&&l){let t=JSON.parse(l),e={cards:(Array.isArray(null==t?void 0:t.cards)?t.cards:[]).map(t=>"string"==typeof t?{type:t}:{type:(null==t?void 0:t.type)||t}),themes:{},updatedAt:Date.now()};localStorage.setItem(y,JSON.stringify(e))}}catch(t){}A(!0)},[y,m,p,g]);let w=(0,i.useMemo)(()=>"p-".concat(g),[g]),x=(()=>{var t;let e=null==f?void 0:f.topBar;return e&&e.enabled&&Array.isArray(e.tabs)&&e.tabs.length>0?{type:"text",items:e.tabs.map(t=>({title:((null==t?void 0:t.title)||"").trim()||"标签"}))}:(null==f||null==(t=f.contentNav)?void 0:t.type)==="text"?null==f?void 0:f.contentNav:null})(),I=(null==f||null==(t=f.contentNav)?void 0:t.type)==="iconText"?null==f?void 0:f.contentNav:null,S=(0,i.useMemo)(()=>{let t=null==p?void 0:p.get("tab");return t?Number(t):0},[p]);return N?(0,o.jsxs)("main",{className:"min-h-[100dvh] bg-transparent",children:[(0,o.jsx)(r.M3,{category:w,locale:v,layout:"mobile",showHeader:null==f||null==(e=f.options)?void 0:e.showHeader,showBottomNav:null==f||null==(l=f.options)?void 0:l.showBottomNav,headerTitle:(()=>{let t=null==f?void 0:f.title;return t?"string"==typeof t?t:("zh"===v?t.zh:t.en)||t.zh||t.en:void 0})(),showBack:null==f||null==(c=f.options)?void 0:c.showBack,aiOpsUrl:null==f||null==(u=f.options)?void 0:u.aiOpsUrl,aiOpsLabel:null==f||null==(d=f.options)?void 0:d.aiOpsLabel,topTabsConfig:x,contentNavConfig:I,initialTabIndex:S,pageId:g},"p-".concat(g,"-tab-").concat(S)),(0,o.jsx)(n.BottomNavigation,{})]}):null}},17409:(t,e,l)=>{"use strict";l.d(e,{BottomNavigation:()=>A});var o=l(89835),a=l(79588),n=l(75123),i=l.n(n),r=l(35749),s=l(13391),c=l(92126),u=l(79644),d=l(42039),h=l(77796),p=l(97909),v=l(59213),g=l(8892),y=l(70368),m=l(92475),f=l(96037),b=l(41657),N=l(55931);function A(t){let{dict:e,items:l}=t,n=(0,a.usePathname)(),{theme:A}=(0,b.b)(),w=n.split("/")[1],x=n.endsWith("/chat"),I=(0,N.useMemo)(()=>!function(t){if(!t.startsWith("#"))return!1;let e=Number.parseInt(t.substring(1),16);return .2126*(e>>16&255)+.7152*(e>>8&255)+.0722*((0|e)&255)<128}(A.background)?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.1)",[A.background]);if(x)return null;let S=e||{browseComponents:"组件",dashboard:"仪表板",chat:"AI",search:"搜索",profile:"我的"},k=[{href:"/",label:S.browseComponents,icon:r.A},{href:"/dashboard",label:S.dashboard,icon:s.A},{href:"/chat",label:S.chat,icon:c.A},{href:"/search",label:S.search,icon:u.A},{href:"/profile",label:S.profile,icon:d.A}],_=n.includes("/preview/")||n.includes("/app/"),C=[];if(l&&l.length>0)C=l;else try{{let t=localStorage.getItem("APPLICATION_CONFIG");if(t){var O,B,P;let e=JSON.parse(t),l=Array.isArray(null==e||null==(P=e.config)||null==(B=P.clientManifest)||null==(O=B.app)?void 0:O.bottomNav)?e.config.clientManifest.app.bottomNav:[];l.length>0&&(C=l.filter(t=>(null==t?void 0:t.visible)!==!1).map(t=>{var e,l,o;return{href:t.route||"/",label:(null==(e=t.label)?void 0:e[w])||(null==(l=t.label)?void 0:l.zh)||(null==(o=t.label)?void 0:o.en)||t.id||"",iconName:t.icon||"grid"}}))}if(0===C.length){let t=localStorage.getItem("CURRENT_APP_NAV_ITEMS");if(t){let e=JSON.parse(t);Array.isArray(e)&&e.length>0&&(C=e.filter(t=>t&&!1!==t.visible).map(t=>{let e=t.route||t.href||"/";return"/me"===e&&(e="/profile"),{href:e,label:t.label||t.key||"",iconName:t.icon||t.iconName}}))}}}}catch(t){}if(0!==C.length||_||(C=k),0===C.length)return null;let E={home:h.A,user:d.A,profile:d.A,search:u.A,dashboard:s.A,grid:r.A,menu:r.A,chat:c.A,message:c.A,settings:p.A,bell:v.A,star:g.A,heart:y.A},j=localStorage.getItem("QUERY_STRING");return(0,o.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-40",children:(0,o.jsx)(f.AppCard,{className:"px-4 py-1",children:(0,o.jsx)("div",{className:"flex items-center space-x-2 md:space-x-3",children:C.map((t,e)=>{var l;let{href:a,icon:s,iconName:c,label:u}=t,d="/".concat(w).concat("/"===a?"":a);if("/preview"===a){let t=new URLSearchParams(window.location.search),e=t.get("cfgId"),l=t.get("previewId"),o=t.get("appId");d=e?"/".concat(w,"/preview?cfgId=").concat(e,"&device=mobile&isEdite=true"):l&&o?"/".concat(w,"/preview?previewId=").concat(l,"&device=mobile&appId=").concat(o):"/".concat(w)}else d+=j||"";let h=n===d||"/"===a&&n==="/".concat(w),p=null!=(l=null!=s?s:c?E[c]:void 0)?l:r.A;return(0,o.jsx)(i(),{href:d,children:(0,o.jsxs)(m.$,{variant:"ghost",className:"rounded-2xl w-12 h-12 flex flex-col items-center justify-center transition-all duration-300 group",style:{backgroundColor:h?I:"transparent"},children:[(0,o.jsx)(p,{className:"w-6 h-6 transition-colors",style:{color:A.fontColor,opacity:h?1:.7}}),(0,o.jsx)("span",{className:"sr-only",children:u})]})},"".concat(u,"-").concat(e,"-").concat(a))})})})})}},35749:(t,e,l)=>{"use strict";l.d(e,{A:()=>o});let o=(0,l(51894).A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},84396:(t,e,l)=>{Promise.resolve().then(l.bind(l,14808))},92126:(t,e,l)=>{"use strict";l.d(e,{A:()=>o});let o=(0,l(51894).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])}},t=>{t.O(0,[3739,8290,5022,8244,5123,3832,8607,4730,7455,9797,7426,3031,6037,3953,9770,721,7020,9300,9900,7341,7358],()=>t(t.s=84396)),_N_E=t.O()}]);