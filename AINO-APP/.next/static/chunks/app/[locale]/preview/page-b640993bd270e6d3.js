(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9318],{1828:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(51894).A)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]])},11614:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(89835),l=a(55931),s=a(79588),n=a(33378),c=a(92475),i=a(17409),o=a(26077),u=a(6195);function h(){let e=(0,s.useParams)(),t=(0,s.useSearchParams)(),a=(0,s.useRouter)(),[h,d]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(!h){try{let r=window.localStorage.getItem("QUERY_STRING");if(!r)return void d(!0);let l=r.startsWith("?")?r.slice(1):r,s=new URLSearchParams(l);if(0==[...s.keys()].length)return void d(!0);let n=new URLSearchParams(t.toString()),c=!1;if(s.forEach((e,t)=>{n.get(t)!==e&&(n.set(t,e),c=!0)}),c){let t=e.locale||"zh";n.toString();let l="/".concat(t,"/preview").concat(r);a.replace(l)}}catch(e){}d(!0)}},[t,e,a,h]);let m=new URLSearchParams(window.location.search),f=m.get("appId");window.localStorage.setItem("APP_ID",f||"");let g=m.get("origin")||m.get("parentOrigin")||"*",p=m.get("data");if(p)try{let e=JSON.parse(p);window.localStorage.setItem("PREVIEW_SELECTED_DATA",JSON.stringify(e))}catch(e){window.localStorage.setItem("PREVIEW_SELECTED_DATA_RAW",p)}let[y,x]=(0,l.useState)(!0),[A,v]=(0,l.useState)(null),[b,N]=(0,l.useState)(null),w=(0,l.useMemo)(()=>(0,u.CV)({targetOrigin:g,channel:f||void 0}),[g,f]),S=e.locale||"zh",j=m.get("previewId");(0,l.useEffect)(()=>{(0,o.a)()},[]),(0,l.useEffect)(()=>{let e=(0,u.zU)(w);return w.post("aino:ready",{appId:f,id:j,locale:S}),()=>{"function"==typeof e&&e()}},[w,f,j,S]),(0,l.useEffect)(()=>{let e=!1;return async function(){x(!0),v(null);try{let r=await fetch("http://47.94.52.142:3007/api/preview-manifests/".concat(j)),l=await r.json();if(!r.ok||!(null==l?void 0:l.success))throw Error((null==l?void 0:l.message)||"failed");if(!e){var t,a;let e=(null==(t=l.data)?void 0:t.manifest)||{};try{(null==e||null==(a=e.app)?void 0:a.appKey)&&localStorage.setItem("CURRENT_APP_ID",String(e.app.appKey))}catch(e){}N(e);try{w.post("aino:manifest",{manifest:e})}catch(e){}}}catch(t){e||v((null==t?void 0:t.message)||"error")}finally{e||x(!1)}}(),()=>{e=!0}},[j]),(0,l.useEffect)(()=>{if(A)try{w.post("aino:error",{message:A})}catch(e){}},[A,w]);let[k,E]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(b)try{var e,t,a,r,l;let s=(null==b||null==(t=b.pages)||null==(e=t.home)?void 0:e.category)||"workspace",n="dynamic_page_layout_".concat(s,"_").concat(S),c=localStorage.getItem(n);if(c)try{let e=JSON.parse(c),t=Array.isArray(null==e?void 0:e.cards)?e.cards.length:0;if(t>0){let a=e.cards.filter(e=>"mobile-navigation"!==((null==e?void 0:e.type)||e));if(a.length!==t){let t={...e,cards:a,updatedAt:Date.now()};localStorage.setItem(n,JSON.stringify(t)),E(e=>e+1)}}}catch(e){}else{let e={cards:((null==b||null==(r=b.pages)||null==(a=r.home)?void 0:a.cardsDefault)&&b.pages.home.cardsDefault.length>0?b.pages.home.cardsDefault:[]).map(e=>({type:e})),themes:{},updatedAt:Date.now()};localStorage.setItem(n,JSON.stringify(e)),E(e=>e+1)}try{let e=(null==b||null==(l=b.app)?void 0:l.bottomNav)||[],t=Array.isArray(e)?e.map(e=>{let t=e.route||"/";return"/me"===t&&(t="/profile"),{href:t,label:e.label||e.key,iconName:e.icon}}):[];localStorage.setItem("CURRENT_APP_NAV_ITEMS",JSON.stringify(t))}catch(e){}}catch(e){}},[b,S]);let C=(0,l.useMemo)(()=>{var e,t;let a=(null==b||null==(t=b.pages)||null==(e=t.home)?void 0:e.category)||"workspace";return"string"==typeof a?a:"workspace"},[b]);return y?(0,r.jsx)("main",{className:"min-h-[100dvh] flex items-center justify-center text-muted-foreground",children:"Loading..."}):A?(0,r.jsxs)("main",{className:"min-h-[100dvh] flex flex-col items-center justify-center gap-3",children:[(0,r.jsx)("div",{className:"text-sm text-red-600",children:A}),(0,r.jsx)(c.$,{variant:"outline",onClick:()=>a.refresh(),children:"Retry"})]}):(0,r.jsxs)("main",{className:"min-h-[100dvh] bg-transparent",children:[(0,r.jsx)(n.M3,{category:C,locale:S,layout:"mobile"},k),(0,r.jsx)(i.BottomNavigation,{})]})}function d(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("main",{className:"min-h-[100dvh] flex items-center justify-center text-muted-foreground",children:"Loading..."}),children:(0,r.jsx)(h,{})})}},13391:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(51894).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},17409:(e,t,a)=>{"use strict";a.d(t,{BottomNavigation:()=>N});var r=a(89835),l=a(79588),s=a(75123),n=a.n(s),c=a(35749),i=a(13391),o=a(92126),u=a(79644),h=a(42039),d=a(77796),m=a(97909),f=a(59213),g=a(8892),p=a(70368),y=a(92475),x=a(96037),A=a(41657),v=a(35677),b=a(55931);function N(e){let{dict:t,items:a}=e,s=(0,l.usePathname)(),{theme:N}=(0,A.b)(),w=s.split("/")[1],S=s.endsWith("/chat"),j=(0,b.useMemo)(()=>!function(e){if(!e.startsWith("#"))return!1;let t=Number.parseInt(e.substring(1),16);return .2126*(t>>16&255)+.7152*(t>>8&255)+.0722*((0|t)&255)<128}(N.background)?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.1)",[N.background]);if(S)return null;let k=t||{browseComponents:"组件",dashboard:"仪表板",chat:"AI",search:"搜索",profile:"我的"},E=[{href:"/",label:k.browseComponents,icon:c.A},{href:"/dashboard",label:k.dashboard,icon:i.A},{href:"/chat",label:k.chat,icon:o.A},{href:"/search",label:k.search,icon:u.A},{href:"/profile",label:k.profile,icon:h.A}],C=s.includes("/preview/")||s.includes("/app/"),I=[];if(a&&a.length>0)I=a;else try{{let e=localStorage.getItem("APPLICATION_CONFIG"),t=JSON.parse(e);if(e){var _,P,O;let e=Array.isArray(null==t||null==(O=t.config)||null==(P=O.clientManifest)||null==(_=P.app)?void 0:_.bottomNav)?t.config.clientManifest.app.bottomNav:[];e.length>0&&(I=e.filter(e=>(null==e?void 0:e.visible)!==!1).map(e=>{var t,a,r;return{href:e.route||"/",label:(null==(t=e.label)?void 0:t[w])||(null==(a=e.label)?void 0:a.zh)||(null==(r=e.label)?void 0:r.en)||e.id||"",iconName:e.icon||"grid"}}))}if(0===I.length){let e=localStorage.getItem("CURRENT_APP_NAV_ITEMS");if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(I=t.filter(e=>e&&!1!==e.visible).map(e=>{let t=e.route||e.href||"/";return"/me"===t&&(t="/profile"),{href:t,label:e.label||e.key||"",iconName:e.icon||e.iconName}}))}}}}catch(e){}if(0!==I.length||C||(I=E),0===I.length)return null;let z={home:d.A,user:h.A,profile:h.A,search:u.A,dashboard:i.A,grid:c.A,menu:c.A,chat:o.A,message:o.A,settings:m.A,bell:f.A,star:g.A,heart:p.A},R=localStorage.getItem("QUERY_STRING");return(0,r.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-40",children:(0,r.jsx)(x.AppCard,{className:"px-4 py-1",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-3",children:[I.map(e=>{var t;let{href:a,icon:l,iconName:i,label:o}=e,u="/".concat(w).concat("/"===a?"":a).concat(R),h=s===u||"/"===a&&s==="/".concat(w),d=null!=(t=null!=l?l:i?z[i]:void 0)?t:c.A;return(0,r.jsx)(n(),{href:u,children:(0,r.jsxs)(y.$,{variant:"ghost",className:"rounded-2xl w-12 h-12 flex flex-col items-center justify-center transition-all duration-300 group",style:{backgroundColor:h?j:"transparent"},children:[(0,r.jsx)(d,{className:"w-6 h-6 transition-colors",style:{color:N.fontColor,opacity:h?1:.7}}),(0,r.jsx)("span",{className:"sr-only",children:o})]})},o)}),(0,r.jsx)("div",{className:"border-l border-gray-200/30 pl-2",children:(0,r.jsx)(v.y,{})})]})})})}},30132:(e,t,a)=>{Promise.resolve().then(a.bind(a,11614))},35677:(e,t,a)=>{"use strict";a.d(t,{P:()=>u,y:()=>h});var r=a(89835);a(55931);var l=a(92475),s=a(47694),n=a(39832),c=a(1828),i=a(7504),o=a(15496);function u(e){let{className:t="",variant:a="outline",size:u="sm",showLabel:h=!1}=e,{setPreset:d,current:m}=(0,s.LK)(),f=()=>{switch(m.current){case"small":return"小";case"normal":default:return"正常";case"large":return"大"}};return(0,r.jsxs)(l.$,{variant:a,size:u,onClick:()=>{d("normal"===m.current?"large":"large"===m.current?"small":"normal")},className:(0,o.cn)("flex items-center gap-2",t),title:"切换字体大小 (当前: ".concat(f(),")"),children:[(()=>{switch(m.current){case"small":return(0,r.jsx)(n.A,{className:"h-4 w-4"});case"normal":default:return(0,r.jsx)(c.A,{className:"h-4 w-4"});case"large":return(0,r.jsx)(i.A,{className:"h-4 w-4"})}})(),h&&(0,r.jsxs)("span",{className:"text-xs",children:[f()," (",Math.round(100*m.scale),"%)"]})]})}function h(e){let{className:t=""}=e,{setPreset:a,current:u}=(0,s.LK)();return(0,r.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>{a("normal"===u.current?"large":"large"===u.current?"small":"normal")},className:(0,o.cn)("h-8 w-8 p-0",t),title:"字体大小：".concat(u.name," (").concat(Math.round(100*u.scale),"%)"),children:(()=>{switch(u.current){case"small":return(0,r.jsx)(n.A,{className:"h-4 w-4"});case"normal":default:return(0,r.jsx)(c.A,{className:"h-4 w-4"});case"large":return(0,r.jsx)(i.A,{className:"h-4 w-4"})}})()})}},35749:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(51894).A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},39832:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(51894).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},47694:(e,t,a)=>{"use strict";a.d(t,{Cv:()=>c,LK:()=>i});var r=a(55931),l=a(17131);let s={small:{scale:.8,name:"小"},normal:{scale:1,name:"正常"},large:{scale:1.2,name:"大"}},n={xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem"};function c(){let{getToken:e,setToken:t}=(0,l.y)(),[a,c]=(0,r.useState)(()=>e("fontSizeConfig")||{preset:"normal",scale:1,sizes:n}),i=(0,r.useMemo)(()=>{let{scale:e}=a,t={};return Object.entries(n).forEach(a=>{let[r,l]=a,s=parseFloat(l),n=l.replace(/[\d.]/g,"");t[r]="".concat(s*e).concat(n)}),t},[a]),o=(0,r.useCallback)(e=>{if("undefined"!=typeof document){let t=document.documentElement;Object.entries(e).forEach(e=>{let[a,r]=e;t.style.setProperty("--font-size-".concat(a),r)}),console.log("Applied font sizes to DOM:",e)}},[]),u=(0,r.useCallback)(e=>{console.log("Setting font size preset:",e);let a=s[e].scale,r={};Object.entries(n).forEach(e=>{let[t,l]=e,s=parseFloat(l),n=l.replace(/[\d.]/g,""),c=s*a;r[t]="".concat(c).concat(n)});let l={preset:e,scale:a,sizes:r};c(l),t("fontSizeConfig",l),t("typography.fontSize",l.sizes),o(r),console.log("Font size preset changed:",{preset:e,scale:a,newSizes:r})},[t,o]),h=(0,r.useCallback)(e=>{let{scale:t}=a,r=n[e];if(!r)return n.base;let l=parseFloat(r),s=r.replace(/[\d.]/g,"");return"".concat(l*t).concat(s)},[a]),d=(0,r.useCallback)(()=>{let e=a.preset;return{...s[e],current:e}},[a.preset]),m=(0,r.useCallback)(()=>Object.entries(s).map(e=>{let[t,a]=e;return{key:t,...a}}),[]);return(0,r.useEffect)(()=>{o(i)},[]),{fontSizeConfig:a,currentPreset:d(),presetOptions:m(),fontSizes:i,getFontSize:h,setFontSizePreset:u,presets:s}}function i(){let{setFontSizePreset:e,currentPreset:t,presetOptions:a}=c();return{setPreset:e,current:t,options:a}}},92126:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(51894).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])}},e=>{e.O(0,[3739,8290,5022,8244,5123,3660,8607,4730,3419,7455,6396,3031,6037,3953,9770,721,7131,7020,9300,9900,7341,7358],()=>e(e.s=30132)),_N_E=e.O()}]);