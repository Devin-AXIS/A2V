(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8501],{91:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(51894).A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},3976:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,q:()=>l});var s=r(89835),o=r(55931);let n=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,o.useState)(!1),a=(0,o.useMemo)(()=>({isFrosted:r,setIsFrosted:l}),[r]);return(0,s.jsx)(n.Provider,{value:a,children:t})}function a(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useFrostedEffect must be used within a FrostedEffectProvider");return e}},27807:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(51894).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},37775:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(89835),o=r(55931),n=r(79588),l=r(75123),a=r.n(l),c=r(76539),i=r(27807),d=r(42039),u=r(96037),f=r(90080),h=r(54890);let g={locales:["zh","en"],localeLabels:{zh:"中文",en:"English"}};var m=r(92475),x=r(91),p=r(79514);function b(){let{locale:e}=(0,n.useParams)();(0,n.usePathname)();let t=(0,n.useRouter)(),{logout:r,isAuthenticated:l}=(0,p.A)(),[b,y]=(0,o.useState)(!1);(0,o.useMemo)(()=>g.locales,[]),(0,o.useMemo)(()=>g.localeLabels||{zh:"中文",en:"English"},[]);let v=async()=>{if(!b){y(!0);try{r(),t.replace("/".concat(e,"/profile"))}catch(e){console.error("退出登录失败",e)}finally{y(!1)}}},w=e=>{let{icon:t,title:r,description:o,href:n,status:l}=e;return(0,s.jsxs)(a(),{href:n,className:"flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--card-background-secondary, #f8fafc)"},children:t}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium",style:{color:"var(--card-title-color)"},children:r}),(0,s.jsx)("p",{className:"text-xs mt-1",style:{color:"var(--card-text-color)"},children:o})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[l&&(0,s.jsx)(f.Ex,{variant:"已认证"===l||"已绑定"===l?"success":"未认证"===l?"warning":"default",size:"sm",children:l}),(0,s.jsx)(c.A,{className:"w-4 h-4 rotate-180",style:{color:"var(--card-text-color)"}})]})]})};return(0,s.jsxs)("main",{className:"min-h-screen",style:{backgroundColor:"var(--background-secondary, #f8fafc)"},children:[(0,s.jsx)(h.AppHeader,{title:"设置",showBackButton:!0}),(0,s.jsxs)("div",{className:"p-4 space-y-4 pt-20",children:[(0,s.jsxs)(u.AppCard,{children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,s.jsx)("h2",{className:"text-sm font-semibold",style:{color:"var(--card-title-color)"},children:"账号安全"})}),(0,s.jsx)(w,{icon:(0,s.jsx)(i.A,{className:"w-5 h-5",style:{color:"var(--card-text-color)"}}),title:"修改密码",description:"定期修改密码，保护账号安全",href:"/".concat(e,"/profile/settings/password")})]}),(0,s.jsxs)(u.AppCard,{children:[(0,s.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,s.jsx)("h2",{className:"text-sm font-semibold",style:{color:"var(--card-title-color)"},children:"个人信息"})}),(0,s.jsx)(w,{icon:(0,s.jsx)(d.A,{className:"w-5 h-5",style:{color:"var(--card-accent-color, #8b5cf6)"}}),title:"个人资料",description:"编辑个人基本信息和简介",href:"/".concat(e,"/profile/edit")})]}),l&&(0,s.jsx)(u.AppCard,{children:(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)(m.$,{variant:"outline",className:"w-full text-red-600 border-red-200 hover:bg-red-50",onClick:v,disabled:b,children:[(0,s.jsx)(x.A,{className:"w-4 h-4 mr-2"}),b?"退出中...":"退出登录"]})})})]})]})}},42039:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(51894).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},54890:(e,t,r)=>{"use strict";r.d(t,{AppHeader:()=>i});var s=r(89835),o=r(55931),n=r(15496),l=r(76539),a=r(18959),c=r(79588);function i(e){let{title:t,showBackButton:r=!1,className:i}=e,[d,u]=(0,o.useState)(!1),f=(0,c.useRouter)();return(0,o.useEffect)(()=>{let e=()=>{u(window.scrollY>10)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,s.jsxs)("header",{className:(0,n.cn)("fixed top-0 left-0 right-0 z-30 flex items-center justify-between p-3 h-14 transition-all duration-300",{"bg-white/80 backdrop-blur-lg shadow-sm":d,"bg-transparent shadow-none":!d},i),children:[(0,s.jsx)("div",{className:"flex-1",children:r&&(0,s.jsx)("button",{onClick:()=>f.back(),className:"p-2 rounded-full hover:bg-gray-100/50",children:(0,s.jsx)(l.A,{className:"w-6 h-6 text-gray-800"})})}),(0,s.jsx)("div",{className:"flex-1 text-center",children:(0,s.jsx)("h1",{className:"text-lg font-semibold text-gray-900 whitespace-nowrap inline-block",children:t})}),(0,s.jsx)("div",{className:"flex-1 flex justify-end items-center space-x-1",children:(0,s.jsx)("button",{className:(0,n.cn)("p-2 rounded-full hover:bg-gray-100/50 transition-opacity duration-300",{"opacity-100":d,"opacity-0 pointer-events-none":!d}),children:(0,s.jsx)(a.A,{className:"w-6 h-6 text-gray-800"})})})]})}},61907:(e,t,r)=>{Promise.resolve().then(r.bind(r,37775))},64331:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return o}});let s=r(55931);function o(e,t){let r=(0,s.useRef)(null),o=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=o.current;t&&(o.current=null,t())}else e&&(r.current=n(e,s)),t&&(o.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},76539:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(51894).A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},79514:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>a});var s=r(55931);let o=(0,s.createContext)(void 0),n={USER:"aino_user",AUTH_TOKEN:"aino_auth_token",APP_ID:"CURRENT_APP_ID"},l=[];function a(e){let{children:t}=e,[r,a]=(0,s.useState)({user:null,isAuthenticated:!1,isLoading:!0});(0,s.useEffect)(()=>{try{let e=localStorage.getItem(n.USER),t=localStorage.getItem(n.AUTH_TOKEN);if(e&&t){let t=JSON.parse(e);a({user:t,isAuthenticated:!0,isLoading:!1})}else a({user:null,isAuthenticated:!1,isLoading:!1})}catch(e){console.error("初始化认证状态失败:",e),a({user:null,isAuthenticated:!1,isLoading:!1})}},[]);let c=async e=>{try{var t,r;let s;a(e=>({...e,isLoading:!0})),await new Promise(e=>setTimeout(e,1e3));let o={};Object.keys(e).forEach(t=>{t.indexOf("followers")>-1&&(o.followers=e[t]),t.indexOf("following")>-1&&(o.following=e[t]),t.indexOf("posts")>-1&&(o.posts=e[t]),t.indexOf("points")>-1&&(o.points=e[t])}),s={id:Date.now().toString(),phone:e.phone,name:e.name,avatar:e.avatar,points:o.points||0,followers:o.followers||0,following:o.following||0,posts:o.posts||0,createdAt:new Date().toISOString(),extends:{...e}},l.push(s);let c=null==s||null==(t=s.extends)?void 0:t.token;null==s||null==(r=s.extends)||delete r.token;{localStorage.setItem(n.USER,JSON.stringify(s)),localStorage.setItem(n.AUTH_TOKEN,c);let e=localStorage.getItem(n.APP_ID);e&&(localStorage.setItem("".concat(n.USER,":").concat(e),JSON.stringify(s)),localStorage.setItem("".concat(n.AUTH_TOKEN,":").concat(e),c))}return a({user:s,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("登录失败:",e),a(e=>({...e,isLoading:!1})),!1}},i=async e=>{try{if(a(e=>({...e,isLoading:!0})),l.find(t=>t.phone===e.phone))throw Error("该手机号已注册");let t={id:Date.now().toString(),phone:e.phone,name:e.name||"用户".concat(e.phone.slice(-4)),avatar:"/generic-user-avatar.png",points:100,followers:0,following:0,posts:0,createdAt:new Date().toISOString()};l.push(t);let r="mock_token_".concat(Date.now());{localStorage.setItem(n.USER,JSON.stringify(t)),localStorage.setItem(n.AUTH_TOKEN,r);let e=localStorage.getItem(n.APP_ID);e&&(localStorage.setItem("".concat(n.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(n.AUTH_TOKEN,":").concat(e),r))}return a({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("注册失败:",e),a(e=>({...e,isLoading:!1})),!1}},d={...r,login:c,register:i,logout:()=>{localStorage.removeItem(n.USER),localStorage.removeItem(n.AUTH_TOKEN),a({user:null,isAuthenticated:!1,isLoading:!1})},updateUser:e=>{if(r.user){let t={...r.user,...e};a(e=>({...e,user:t})),localStorage.setItem(n.USER,JSON.stringify(t))}}};return s.createElement(o.Provider,{value:d},t)}function c(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},79588:(e,t,r)=>{"use strict";var s=r(95604);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},90080:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>i});var s=r(89835),o=r(15496),n=r(3976);let l={default:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},primary:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},secondary:{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"},success:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},warning:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},error:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"},info:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"}},a={sm:{container:"px-2 py-0.5 text-xs",dot:"w-1.5 h-1.5"},md:{container:"px-2.5 py-1 text-sm",dot:"w-2 h-2"},lg:{container:"px-3 py-1.5 text-base",dot:"w-2.5 h-2.5"}},c={rounded:"rounded-md",pill:"rounded-full",dot:"rounded-full"};function i(e){let{children:t,variant:r="default",size:i="md",shape:d="rounded",showZero:u=!1,max:f,className:h}=e,{isFrosted:g}=(0,n.Z)(),m=l[r],x=a[i],p=c[d],b=(0,o.cn)("inline-flex items-center justify-center font-medium border transition-all duration-200",m.bg,m.text,m.border,x.container,p,g&&"backdrop-blur-sm",h);if("dot"===d)return(0,s.jsx)("span",{className:(0,o.cn)("inline-block",m.bg,x.dot,p,h)});let y="number"==typeof t?0!==t||u?f&&t>f?"".concat(f,"+"):t.toString():null:t;return y?(0,s.jsx)("span",{className:b,children:y}):null}}},e=>{e.O(0,[6416,8290,5022,5123,6037,9900,7341,7358],()=>e(e.s=61907)),_N_E=e.O()}]);