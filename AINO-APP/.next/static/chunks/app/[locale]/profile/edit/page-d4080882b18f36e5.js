(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[900],{11713:(e,t,l)=>{"use strict";l.d(t,{v:()=>r});var a=l(89835),n=l(15496);function r(e){let{className:t,variant:l="white",size:r="sm",icon:o,children:s,...i}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("inline-flex items-center gap-1.5 font-medium transition-all duration-200",{sm:"px-2.5 py-1 text-xs rounded-full",md:"px-3 py-1.5 text-sm rounded-lg"}[r],{default:"bg-gray-100 text-gray-700 hover:bg-gray-200",white:"bg-white text-gray-700 shadow-sm border border-gray-200 hover:shadow-md hover:border-gray-300",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50"}[l],t),...i,children:[o&&(0,a.jsx)("span",{className:"flex-shrink-0",children:o}),s]})}},12680:(e,t,l)=>{"use strict";l.d(t,{L:()=>s});var a=l(77455),n=l(29088);let r=(()=>{let e=a.A.create({baseURL:n.env.NEXT_PUBLIC_API_BASE_URL||"http://47.94.52.142:3007",timeout:1e4,headers:{"Content-Type":"application/json"}});return e.interceptors.request.use(e=>{let t=window.localStorage.getItem("aino_auth_token")||window.localStorage.getItem("aino_token")||"";return t&&(e.headers.Authorization="Bearer ".concat(t)),"get"===e.method&&(e.params={...e.params,_t:Date.now()}),e},e=>Promise.reject(e)),e.interceptors.response.use(e=>e,e=>{var t;return(null==(t=e.response)?void 0:t.status)===401&&(localStorage.removeItem("aino_auth_token"),window.location.href="/auth/login"),Promise.reject(e)}),e})(),o=async e=>{try{return(await r(e)).data}catch(a){var t;if(!a.response)throw Error("Network error - please check your connection");let e=a.response.status,l=(null==(t=a.response.data)?void 0:t.message)||a.message;throw Error("Request failed (".concat(e,"): ").concat(l))}},s={get:(e,t)=>o({...t,method:"GET",url:e}),post:(e,t,l)=>o({...l,method:"POST",url:e,data:t}),put:(e,t,l)=>o({...l,method:"PUT",url:e,data:t}),patch:(e,t,l)=>o({...l,method:"PATCH",url:e,data:t}),delete:(e,t)=>o({...t,method:"DELETE",url:e}),upload:(e,t,l)=>{let a=new FormData;return a.append("file",t),o({...l,method:"POST",url:e,data:a,headers:{"Content-Type":"multipart/form-data",...null==l?void 0:l.headers}})},download:async(e,t,l)=>{try{let a=await r({...l,method:"GET",url:e,responseType:"blob"}),n=new Blob([a.data]),o=window.URL.createObjectURL(n),s=document.createElement("a");s.href=o,s.download=t||"download",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(o)}catch(e){throw Error("Download failed")}}}},27728:(e,t,l)=>{"use strict";l.d(t,{DynamicBackground:()=>r});var a=l(89835),n=l(58396);function r(){let{gradientStyle:e,getGlowColor:t}=(0,n.D)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute inset-0 -z-20 transition-all duration-1000",style:e}),(0,a.jsx)("div",{className:"absolute top-32 left-8 w-80 h-80 rounded-full opacity-15 blur-3xl -z-10 transition-all duration-1000",style:{backgroundColor:t(1)}}),(0,a.jsx)("div",{className:"absolute bottom-60 right-12 w-96 h-96 rounded-full opacity-10 blur-3xl -z-10 transition-all duration-1000",style:{backgroundColor:t(2)}}),(0,a.jsx)("div",{className:"absolute top-2/3 left-1/3 w-72 h-72 rounded-full opacity-12 blur-3xl -z-10 transition-all duration-1000",style:{backgroundColor:t(1)}})]})}},32937:(e,t,l)=>{"use strict";l.d(t,{A:()=>a});let a=(0,l(51894).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},45144:(e,t,l)=>{"use strict";l.d(t,{F:()=>u});var a=l(89835),n=l(55931),r=l(7504),o=l(35501),s=l(68232),i=l(15496),d=l(11713),c=l(59770);function u(e){let{value:t=[],onChange:l,placeholder:u="输入标签后按回车添加",maxTags:p,readonly:x=!1,className:m,mode:h="view",onModeChange:v,emptyText:g="暂无标签"}=e,{palette:f}=(0,c.RW)(),b=f[0]||"#3b82f6";(0,n.useMemo)(()=>(function(e){if(!e.startsWith("#"))return"#000000";let t=Number.parseInt(e.slice(1,3),16),l=Number.parseInt(e.slice(3,5),16);return(299*t+587*l+114*Number.parseInt(e.slice(5,7),16))/1e3>=128?"#000000":"#ffffff"})(b),[b]);let[y,w]=(0,n.useState)(""),[j,N]=(0,n.useState)(!1),k=(0,n.useRef)(null),S=e=>{let a=t.filter((t,l)=>l!==e);null==l||l(a)},T=()=>{let e="view"===h?"edit":"view";null==v||v(e),"edit"===e?(N(!0),setTimeout(()=>{var e;return null==(e=k.current)?void 0:e.focus()},100)):(N(!1),w(""))};return"view"===h?(0,a.jsx)("div",{className:(0,i.cn)("w-full",m),children:0===t.length?(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl border-2 border-dashed border-gray-200 bg-gray-50/50",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:g}),!x&&(0,a.jsxs)("button",{onClick:T,className:"flex items-center gap-1 px-2 py-1 text-xs rounded-lg transition-colors",style:{backgroundColor:"".concat(b,"15"),color:b},children:[(0,a.jsx)(r.A,{className:"w-3 h-3"}),"添加标签"]})]}):(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 p-3 rounded-xl bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm",children:[t.map((e,t)=>(0,a.jsx)(d.v,{variant:"white",size:"sm",className:"transition-all duration-200 hover:shadow-md",style:{borderColor:"".concat(b,"30"),backgroundColor:"white"},children:e},t)),!x&&(0,a.jsxs)("button",{onClick:T,className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full border border-dashed border-gray-300 text-gray-500 hover:border-gray-400 hover:text-gray-600 transition-colors",children:[(0,a.jsx)(o.A,{className:"w-3 h-3"}),"编辑"]})]})}):(0,a.jsxs)("div",{className:(0,i.cn)("w-full",m),children:[(0,a.jsxs)("div",{className:"min-h-[44px] p-3 rounded-xl bg-white/70 backdrop-blur-lg border border-white/80 shadow-sm focus-within:ring-2 transition-all duration-300",style:{"--tw-ring-color":b},children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[t.map((e,t)=>(0,a.jsxs)(d.v,{variant:"white",size:"sm",className:"transition-all duration-200 hover:shadow-md group",style:{borderColor:"".concat(b,"30"),backgroundColor:"".concat(b,"10")},children:[(0,a.jsx)("span",{style:{color:"var(--card-text-color)"},children:e}),!x&&(0,a.jsx)("button",{onClick:()=>S(t),className:"ml-1 p-0.5 rounded-full hover:bg-red-100 transition-colors group-hover:opacity-100 opacity-70",children:(0,a.jsx)(s.A,{className:"w-3 h-3 text-red-500"})})]},t)),!x&&(!p||t.length<p)&&(0,a.jsx)(a.Fragment,{children:j?(0,a.jsx)("input",{ref:k,type:"text",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&y.trim()?(e.preventDefault(),(e=>{if(!e||t.includes(e)||p&&t.length>=p)return;let a=[...t,e];null==l||l(a),w("")})(y.trim())):"Backspace"===e.key&&!y&&t.length>0&&S(t.length-1)},onBlur:()=>{y.trim()||N(!1)},placeholder:u,className:"flex-1 min-w-[120px] bg-transparent border-none outline-none text-sm",style:{color:"var(--card-text-color)"}}):(0,a.jsxs)("button",{onClick:()=>{N(!0),setTimeout(()=>{var e;return null==(e=k.current)?void 0:e.focus()},100)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs rounded-full border border-dashed transition-colors",style:{borderColor:"".concat(b,"50"),color:b},children:[(0,a.jsx)(r.A,{className:"w-3 h-3"}),"添加更多标签..."]})})]}),p&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-400",children:[t.length,"/",p," 个标签"]})]}),"edit"===h&&v&&(0,a.jsx)("div",{className:"flex justify-end mt-2",children:(0,a.jsx)("button",{onClick:()=>v("view"),className:"px-3 py-1 text-xs rounded-lg transition-colors",style:{backgroundColor:"".concat(b,"15"),color:b},children:"完成编辑"})})]})}},58396:(e,t,l)=>{"use strict";l.d(t,{D:()=>i,N:()=>s});var a=l(89835),n=l(55931);let r=[{id:1,name:"主色",value:"#ffffff",enabled:!0},{id:2,name:"次色",value:"#f8fafc",enabled:!0},{id:3,name:"强调色",value:"#f1f5f9",enabled:!0}],o=(0,n.createContext)(void 0);function s(e){let{children:t}=e,[l,s]=(0,n.useState)(r),i=(0,n.useCallback)((e,t)=>{s(l=>l.map(l=>l.id===e?{...l,value:t}:l))},[]),d=(0,n.useCallback)(e=>{s(t=>t.map(t=>t.id===e?{...t,enabled:!t.enabled}:t))},[]),c=(0,n.useCallback)(e=>{s([{id:1,name:"主色",value:e[0],enabled:!0},{id:2,name:"辅色",value:e[1],enabled:!0},{id:3,name:"点缀色",value:e[2],enabled:!0}])},[]),u=(0,n.useMemo)(()=>{let e=l.find(e=>1===e.id&&e.enabled);return e?e.value:r[0].value},[l]),p=(0,n.useMemo)(()=>{let e=l.find(e=>2===e.id&&e.enabled);return e?e.value:r[1].value},[l]),x=(0,n.useMemo)(()=>{let e=l.find(e=>3===e.id&&e.enabled);return e?e.value:r[2].value},[l]),m=(0,n.useMemo)(()=>{let e=l.filter(e=>e.enabled);if(0===e.length)return{backgroundColor:"#ffffff"};if(1===e.length)return{backgroundColor:e[0].value};if(2===e.length)return{background:"linear-gradient(135deg, ".concat(e[0].value," 40%, ").concat(e[1].value," 100%)")};if(3===e.length)return{background:"linear-gradient(135deg, ".concat(e[0].value," 25%, ").concat(e[1].value," 65%, ").concat(e[2].value," 100%)")};let t=e.map((t,l)=>"".concat(t.value," ").concat(l*(100/(e.length-1)),"%")).join(", ");return{background:"linear-gradient(135deg, ".concat(t,")")}},[l]),h=(0,n.useCallback)(e=>{var t;return(null==(t=l[e])?void 0:t.enabled)?l[e].value:"#dbeafe"},[l]),v=(0,n.useMemo)(()=>({colors:l,updateColor:i,toggleColor:d,applyPreset:c,gradientStyle:m,getGlowColor:h,primaryColor:u,secondaryColor:p,accentColor:x}),[l,i,d,c,m,h,u,p,x]);return(0,a.jsx)(o.Provider,{value:v,children:t})}function i(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useTheme must be used within a ThemeProvider");return e}},68289:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>S});var a=l(89835),n=l(55931),r=l(79588),o=l(12680),s=l(54890),i=l(27728),d=l(96037),c=l(60267),u=l(16781);let p=0,x=new Map,m=e=>{if(x.has(e))return;let t=setTimeout(()=>{x.delete(e),g({type:"REMOVE_TOAST",toastId:e})},1e6);x.set(e,t)},h=[],v={toasts:[]};function g(e){v=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:l}=t;return l?m(l):e.toasts.forEach(e=>{m(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===l||void 0===l?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(v,e),h.forEach(e=>{e(v)})}function f(e){let{...t}=e,l=(p=(p+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>g({type:"DISMISS_TOAST",toastId:l});return g({type:"ADD_TOAST",toast:{...t,id:l,open:!0,onOpenChange:e=>{e||a()}}}),{id:l,dismiss:a,update:e=>g({type:"UPDATE_TOAST",toast:{...e,id:l}})}}var b=l(77860),y=l(37064),w=l(45144);l(49101),l(40612),l(7504);var j=l(35501),N=l(32937),k=l(79514);function S(){var e,t,l,p,x,m,S,T,E,_;(0,r.useRouter)();let{locale:C}=(0,r.useParams)(),{toast:A}=function(){let[e,t]=n.useState(v);return n.useEffect(()=>(h.push(t),()=>{let e=h.indexOf(t);e>-1&&h.splice(e,1)}),[e]),{...e,toast:f,dismiss:e=>g({type:"DISMISS_TOAST",toastId:e})}}(),{user:I,isAuthenticated:O,isLoading:D}=(0,k.A)(),[U,P]=(0,n.useState)({name:(null==I?void 0:I.name)||"",avatar:(null==I?void 0:I.avatar)||"/generic-user-avatar.png",gender:(null==I||null==(e=I.extends)?void 0:e.gender)||"男",country:"CN",city:(null==I||null==(t=I.extends)?void 0:t.city)||"北京 - 朝阳区",birthday:(null==I||null==(l=I.extends)?void 0:l.birthday)||"1990-05-15",bio:(null==I||null==(p=I.extends)?void 0:p.bio)||"热爱技术，专注于前端开发",profession:(null==I||null==(x=I.extends)?void 0:x.profession)||"前端工程师"}),[R,L]=(0,n.useState)({phone:"176******38",phoneVerified:!0,email:"wangyu@example.com",emailVerified:!1,personalAdvantages:"很傻",jobExpectations:[],workExperience:(null==I||null==(m=I.extends)?void 0:m.work_exp)||[],projectExperience:(null==I||null==(S=I.extends)?void 0:S.proj_exp)||[],educationHistory:(null==I||null==(T=I.extends)?void 0:T.edu_exp)||[],certificates:(null==I||null==(E=I.extends)?void 0:E.honors)||[],skills:(null==I||null==(_=I.extends)?void 0:_.skills)||[]});(0,n.useEffect)(()=>{var e,t,l,a,n,r,o,s,i,d;P({name:(null==I?void 0:I.name)||"",avatar:(null==I?void 0:I.avatar)||"/generic-user-avatar.png",gender:(null==I||null==(e=I.extends)?void 0:e.gender)||"男",country:"CN",city:(null==I||null==(t=I.extends)?void 0:t.city)||"北京 - 朝阳区",birthday:(null==I||null==(l=I.extends)?void 0:l.birthday)||"1990-05-15",bio:(null==I||null==(a=I.extends)?void 0:a.bio)||"热爱技术，专注于前端开发",profession:(null==I||null==(n=I.extends)?void 0:n.profession)||"前端工程师"}),L({...R,workExperience:(null==I||null==(r=I.extends)?void 0:r.work_exp)||[],projectExperience:(null==I||null==(o=I.extends)?void 0:o.proj_exp)||[],educationHistory:(null==I||null==(s=I.extends)?void 0:s.edu_exp)||[],certificates:(null==I||null==(i=I.extends)?void 0:i.honors)||[],skills:(null==I||null==(d=I.extends)?void 0:d.skills)||[]})},[I]);let[M,B]=(0,n.useState)(!1),[z,H]=(0,n.useState)(null),[K,J]=(0,n.useState)("view"),F=async e=>{var t,l;let a=(null==I||null==(t=I.extends)?void 0:t.applicationId)?"aino_auth_token:".concat(null==I||null==(l=I.extends)?void 0:l.applicationId):null,n=(a?window.localStorage.getItem(a):null)||window.localStorage.getItem("aino_auth_token")||window.localStorage.getItem("aino_token")||"",r={props:{[e]:I.extends[e]}},s=await o.L.patch("/api/records/".concat(I.extends.__dirId,"/").concat(I.extends.recordId),r,{headers:{Authorization:"Bearer ".concat(n)}});(null==s?void 0:s.success)&&(null==s?void 0:s.url)?A({title:"更新成功",description:"用户信息已更新"}):A({title:"更新失败",description:(null==s?void 0:s.message)||"更新失败,请重试.",variant:"destructive"})};return(0,a.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,a.jsx)(i.DynamicBackground,{}),(0,a.jsx)(s.AppHeader,{title:"我的在线简历",showBackButton:!0}),(0,a.jsxs)("div",{className:"px-4 py-6 space-y-4 pt-20",children:[(0,a.jsx)(y.hL,{basicInfo:U,onUpdate:P}),(0,a.jsx)(d.AppCard,{children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"text-base font-semibold",style:{color:"var(--card-title-color)"},children:"个人优势"}),(0,a.jsx)(j.A,{className:"w-4 h-4",style:{color:"var(--card-accent-color, #3b82f6)"}})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full flex items-center justify-center",style:{backgroundColor:"var(--card-warning-color, #f59e0b)"},children:(0,a.jsx)("span",{className:"text-xs text-white",children:"!"})}),(0,a.jsx)("span",{className:"text-sm",style:{color:"var(--card-warning-color, #f59e0b)"},children:"补充你的优势信息"})]}),(0,a.jsx)("p",{className:"text-sm",style:{color:"var(--card-text-color)"},children:R.personalAdvantages})]})}),(0,a.jsx)(y.om,{title:"工作经历",data:R.workExperience,onUpdate:e=>{e.forEach((e,t)=>{var l,a;let{id:n,title:r,organization:o,description:s,department:i,salary:d,startDate:c,endDate:u,isCurrent:p,isCurrently:x}=e,m=null==I||null==(a=I.extends)||null==(l=a.work_exp)?void 0:l.find(e=>e.id===n);m&&(m.title=r,m.organization=o,m.description=s,m.department=i,m.salary=d,m.startDate=c,m.endDate=u,m.isCurrent=p,m.isCurrently=x)}),F("work_exp")},fields:y.tC,displayConfig:y.Ee,allowMultiple:!0,emptyText:"暂无工作经历",addButtonText:"添加工作经历"}),(0,a.jsx)(y.om,{title:"项目经历",data:R.projectExperience,onUpdate:e=>{e.forEach((e,t)=>{var l,a;let{id:n,title:r,organization:o,description:s,department:i,technologies:d,startDate:c,endDate:u,isCurrent:p,isOngoing:x}=e,m=null==I||null==(a=I.extends)||null==(l=a.proj_exp)?void 0:l.find(e=>e.id===n);m&&(m.title=r,m.organization=o,m.description=s,m.department=i,m.technologies=d,m.startDate=c,m.endDate=u,m.isCurrent=p,m.isOngoing=x)}),F("proj_exp")},fields:y.Do,displayConfig:y.Mf,allowMultiple:!0,emptyText:"暂无项目经历",addButtonText:"添加项目经历"}),(0,a.jsx)(y.om,{title:"教育经历",data:R.educationHistory,onUpdate:e=>{e.forEach((e,t)=>{var l,a;let{id:n,title:r,organization:o,description:s,degree:i,startDate:d,endDate:c,isCurrent:u,isCurrently:p}=e,x=null==I||null==(a=I.extends)||null==(l=a.edu_exp)?void 0:l.find(e=>e.id===n);x&&(x.title=r,x.organization=o,x.description=s,x.degree=i,x.startDate=d,x.endDate=c,x.isCurrent=u,x.isCurrently=p)}),F("edu_exp")},fields:y.sJ,displayConfig:y.TZ,allowMultiple:!0,emptyText:"暂无教育经历",addButtonText:"添加教育经历"}),(0,a.jsx)(y.om,{title:"证书资质",data:R.certificates,onUpdate:e=>{e.forEach((e,t)=>{var l,a;let{id:n,title:r,organization:o,description:s,credentialId:i,issueDate:d,expiryDate:c,isCurrent:u,isNeverExpires:p}=e,x=null==I||null==(a=I.extends)||null==(l=a.honors)?void 0:l.find(e=>e.id===n);x&&(x.title=r,x.organization=o,x.description=s,x.credentialId=i,x.issueDate=d,x.expiryDate=c,x.isNeverExpires=p,x.isCurrent=u)}),F("honors")},fields:y.TV,displayConfig:y.Od,allowMultiple:!0,emptyText:"暂无证书资质",addButtonText:"添加证书"}),(0,a.jsx)(d.AppCard,{children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-base font-semibold",style:{color:"var(--card-title-color)"},children:"个人技能"}),(0,a.jsxs)("div",{className:"text-xs",style:{color:"var(--card-text-color)"},children:[R.skills.length," 个技能"]})]}),(0,a.jsx)(w.F,{value:R.skills,onChange:e=>{I&&I.extends&&I.extends.skills&&(I.extends.skills=e),F("skills")},placeholder:"输入技能后按回车添加",maxTags:20,emptyText:"暂未添加技能标签",mode:K,onModeChange:J})]})}),(0,a.jsx)(d.AppCard,{children:(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)(c.K,{className:"w-full flex items-center justify-center gap-2",onClick:()=>console.log("预览简历"),children:[(0,a.jsx)(N.A,{className:"w-4 h-4"}),"生成附件简历"]})})})]}),(0,a.jsx)("div",{className:"h-20"}),(0,a.jsx)(b.J,{isOpen:M,onClose:()=>B(!1),title:"编辑联系方式",children:(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"手机号"}),(0,a.jsx)(u.p,{value:R.phone,onChange:e=>L(t=>({...t,phone:e.target.value})),placeholder:"请输入手机号",className:"rounded-xl"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"邮箱"}),(0,a.jsx)(u.p,{value:R.email,onChange:e=>L(t=>({...t,email:e.target.value})),placeholder:"请输入邮箱地址",className:"rounded-xl",type:"email"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(c.K,{variant:"default",onClick:()=>B(!1),className:"flex-1",children:"取消"}),(0,a.jsx)(c.K,{onClick:()=>B(!1),className:"flex-1",children:"确认"})]})]})})]})}},79514:(e,t,l)=>{"use strict";l.d(t,{A:()=>i,AuthProvider:()=>s});var a=l(55931);let n=(0,a.createContext)(void 0),r={USER:"aino_user",AUTH_TOKEN:"aino_auth_token",APP_ID:"CURRENT_APP_ID"},o=[];function s(e){let{children:t}=e,[l,s]=(0,a.useState)({user:null,isAuthenticated:!1,isLoading:!0});(0,a.useEffect)(()=>{try{let e=localStorage.getItem(r.USER),t=localStorage.getItem(r.AUTH_TOKEN);if(e&&t){let t=JSON.parse(e);s({user:t,isAuthenticated:!0,isLoading:!1})}else s({user:null,isAuthenticated:!1,isLoading:!1})}catch(e){console.error("初始化认证状态失败:",e),s({user:null,isAuthenticated:!1,isLoading:!1})}},[]);let i=async e=>{try{var t,l;let a;s(e=>({...e,isLoading:!0})),await new Promise(e=>setTimeout(e,1e3));let n={};Object.keys(e).forEach(t=>{t.indexOf("followers")>-1&&(n.followers=e[t]),t.indexOf("following")>-1&&(n.following=e[t]),t.indexOf("posts")>-1&&(n.posts=e[t]),t.indexOf("points")>-1&&(n.points=e[t])}),a={id:Date.now().toString(),phone:e.phone,name:e.name,avatar:e.avatar,points:n.points||0,followers:n.followers||0,following:n.following||0,posts:n.posts||0,createdAt:new Date().toISOString(),extends:{...e}},o.push(a);let i=null==a||null==(t=a.extends)?void 0:t.token;null==a||null==(l=a.extends)||delete l.token;{localStorage.setItem(r.USER,JSON.stringify(a)),localStorage.setItem(r.AUTH_TOKEN,i);let e=localStorage.getItem(r.APP_ID);e&&(localStorage.setItem("".concat(r.USER,":").concat(e),JSON.stringify(a)),localStorage.setItem("".concat(r.AUTH_TOKEN,":").concat(e),i))}return s({user:a,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("登录失败:",e),s(e=>({...e,isLoading:!1})),!1}},d=async e=>{try{if(s(e=>({...e,isLoading:!0})),o.find(t=>t.phone===e.phone))throw Error("该手机号已注册");let t={id:Date.now().toString(),phone:e.phone,name:e.name||"用户".concat(e.phone.slice(-4)),avatar:"/generic-user-avatar.png",points:100,followers:0,following:0,posts:0,createdAt:new Date().toISOString()};o.push(t);let l="mock_token_".concat(Date.now());{localStorage.setItem(r.USER,JSON.stringify(t)),localStorage.setItem(r.AUTH_TOKEN,l);let e=localStorage.getItem(r.APP_ID);e&&(localStorage.setItem("".concat(r.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(r.AUTH_TOKEN,":").concat(e),l))}return s({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("注册失败:",e),s(e=>({...e,isLoading:!1})),!1}},c={...l,login:i,register:d,logout:()=>{localStorage.removeItem(r.USER),localStorage.removeItem(r.AUTH_TOKEN),s({user:null,isAuthenticated:!1,isLoading:!1})},updateUser:e=>{if(l.user){let t={...l.user,...e};s(e=>({...e,user:t})),localStorage.setItem(r.USER,JSON.stringify(t))}}};return a.createElement(n.Provider,{value:c},t)}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},92500:(e,t,l)=>{Promise.resolve().then(l.bind(l,68289))}},e=>{e.O(0,[6416,8290,5022,6497,69,7938,7455,6037,7414,7746,1485,9900,7341,7358],()=>e(e.s=92500)),_N_E=e.O()}]);