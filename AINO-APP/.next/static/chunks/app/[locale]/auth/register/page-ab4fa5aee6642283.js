(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{7951:(e,t,r)=>{"use strict";r.d(t,{F:()=>s});var o=r(98951);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=o.$,s=(e,t)=>r=>{var o;if((null==t?void 0:t.variants)==null)return a(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:s,defaultVariants:l}=t,i=Object.keys(s).map(e=>{let t=null==r?void 0:r[e],o=null==l?void 0:l[e];if(null===t)return null;let a=n(t)||n(o);return s[e][a]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,o]=t;return void 0===o||(e[r]=o),e},{});return a(e,i,null==t||null==(o=t.compoundVariants)?void 0:o.reduce((e,t)=>{let{class:r,className:o,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,o]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},51894:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var o=r(55931);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,o.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...g}=e;return(0,o.createElement)("svg",{ref:t,...a,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",c),...g},[...d.map(e=>{let[t,r]=e;return(0,o.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,o.forwardRef)((r,a)=>{let{className:l,...i}=r;return(0,o.createElement)(s,{ref:a,iconNode:t,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),l),...i})});return r.displayName="".concat(e),r}},59232:(e,t,r)=>{Promise.resolve().then(r.bind(r,84536))},77908:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});let o=(0,r(51894).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},79514:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>l});var o=r(55931);let n=(0,o.createContext)(void 0),a={USER:"aino_user",AUTH_TOKEN:"aino_auth_token",APP_ID:"CURRENT_APP_ID"},s=[{id:"1",phone:"13800138000",name:"iPollo 用户",avatar:"/generic-user-avatar.png",points:2323,followers:22,following:334,posts:3434,createdAt:new Date().toISOString()},{id:"2",phone:"13900139000",name:"测试用户",avatar:"/generic-user-avatar.png",points:1500,followers:15,following:200,posts:100,createdAt:new Date().toISOString()}];function l(e){let{children:t}=e,[r,l]=(0,o.useState)({user:null,isAuthenticated:!1,isLoading:!0});(0,o.useEffect)(()=>{try{let e=localStorage.getItem(a.USER),t=localStorage.getItem(a.AUTH_TOKEN);if(e&&t){let t=JSON.parse(e);l({user:t,isAuthenticated:!0,isLoading:!1})}else l({user:null,isAuthenticated:!1,isLoading:!1})}catch(e){console.error("初始化认证状态失败:",e),l({user:null,isAuthenticated:!1,isLoading:!1})}},[]);let i=async e=>{try{let t;l(e=>({...e,isLoading:!0})),await new Promise(e=>setTimeout(e,1e3));let r={};Object.keys(e).forEach(t=>{t.indexOf("followers")>-1&&(r.followers=e[t]),t.indexOf("following")>-1&&(r.following=e[t]),t.indexOf("posts")>-1&&(r.posts=e[t]),t.indexOf("points")>-1&&(r.points=e[t])}),console.log(r),t={id:Date.now().toString(),phone:e.phone,name:e.profile.name,avatar:e.profile.avatar,points:r.points||0,followers:r.followers||0,following:r.following||0,posts:r.posts||0,createdAt:new Date().toISOString()},s.push(t);let o="mock_token_".concat(Date.now());{localStorage.setItem(a.USER,JSON.stringify(t)),localStorage.setItem(a.AUTH_TOKEN,o);let e=localStorage.getItem(a.APP_ID);e&&(localStorage.setItem("".concat(a.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(a.AUTH_TOKEN,":").concat(e),o))}return l({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("登录失败:",e),l(e=>({...e,isLoading:!1})),!1}},c=async e=>{try{if(l(e=>({...e,isLoading:!0})),await new Promise(e=>setTimeout(e,1500)),s.find(t=>t.phone===e.phone))throw Error("该手机号已注册");let t={id:Date.now().toString(),phone:e.phone,name:"用户".concat(e.phone.slice(-4)),avatar:"/generic-user-avatar.png",points:100,followers:0,following:0,posts:0,createdAt:new Date().toISOString()};s.push(t);let r="mock_token_".concat(Date.now());{localStorage.setItem(a.USER,JSON.stringify(t)),localStorage.setItem(a.AUTH_TOKEN,r);let e=localStorage.getItem(a.APP_ID);e&&(localStorage.setItem("".concat(a.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(a.AUTH_TOKEN,":").concat(e),r))}return l({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("注册失败:",e),l(e=>({...e,isLoading:!1})),!1}},u={...r,login:i,register:c,logout:()=>{localStorage.removeItem(a.USER),localStorage.removeItem(a.AUTH_TOKEN),l({user:null,isAuthenticated:!1,isLoading:!1})},updateUser:e=>{if(r.user){let t={...r.user,...e};l(e=>({...e,user:t})),localStorage.setItem(a.USER,JSON.stringify(t))}}};return o.createElement(n.Provider,{value:u},t)}function i(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},79588:(e,t,r)=>{"use strict";var o=r(95604);r.o(o,"useParams")&&r.d(t,{useParams:function(){return o.useParams}}),r.o(o,"usePathname")&&r.d(t,{usePathname:function(){return o.usePathname}}),r.o(o,"useRouter")&&r.d(t,{useRouter:function(){return o.useRouter}}),r.o(o,"useSearchParams")&&r.d(t,{useSearchParams:function(){return o.useSearchParams}})},84536:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var o=r(89835),n=r(55931),a=r(78720),s=r(79588),l=r(79514);function i(){let e=(0,s.useRouter)(),{register:t,isAuthenticated:r,isLoading:i}=(0,l.A)();(0,n.useEffect)(()=>{r&&!i&&e.push("/profile")},[r,i,e]);let c=async t=>{console.log("注册数据:",t),e.push("/profile")};return i||r?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"加载中..."})]})}):(0,o.jsx)("div",{className:"min-h-screen",children:(0,o.jsx)(a.I,{onRegister:c,onLogin:()=>{e.push("/auth/login")}})})}}},e=>{e.O(0,[3739,3660,7455,1690,8720,9900,7341,7358],()=>e(e.s=59232)),_N_E=e.O()}]);