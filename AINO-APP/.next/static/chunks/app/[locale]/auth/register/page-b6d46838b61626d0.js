(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[768],{7951:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(98951);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=a.$,o=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return s(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:l}=t,i=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let s=n(t)||n(a);return o[e][s]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return s(e,i,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...c}[t]):({...l,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},15496:(e,t,r)=>{"use strict";r.d(t,{S:()=>o,cn:()=>s});var a=r(98951),n=r(45318);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}function o(){let e=Math.floor(0xffffff*Math.random()).toString(16).padStart(6,"0");return"#".concat(e)}},32937:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},41364:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},42039:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},43251:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},51894:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var a=r(55931);let n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...g}=e;return(0,a.createElement)("svg",{ref:t,...s,width:o,height:o,stroke:r,strokeWidth:i?24*Number(l)/Number(o):l,className:n("lucide",c),...g},[...d.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),l=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{className:l,...i}=r;return(0,a.createElement)(o,{ref:s,iconNode:t,className:n("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),l),...i})});return r.displayName="".concat(e),r}},55098:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var a=r(89835),n=r(55931),s=r(15496),o=r(43251),l=r(77908),i=r(41364);function c(e){let{value:t,onChange:r,onValidate:c,placeholder:u="请输入手机号",className:d,disabled:g=!1,error:f,success:h=!1}=e,[m,p]=(0,n.useState)(!1),[v,x]=(0,n.useState)(!1),y=(0,n.useRef)(null),w=/^1[3-9]\d{9}$/;return(0,n.useEffect)(()=>{let e=w.test(t);x(e),null==c||c(e)},[t,c]),(0,a.jsxs)("div",{className:(0,s.cn)("relative",d),children:[(0,a.jsxs)("div",{className:(0,s.cn)("relative flex items-center","bg-background border border-border","rounded-lg","transition-all duration-300 ease-in-out","shadow-sm",m&&"shadow-md border-primary",f&&"border-red-300 shadow-red-100",h&&"border-green-300 shadow-green-100",g&&"opacity-50 cursor-not-allowed"),children:[(0,a.jsx)("div",{className:"pl-4 pr-2",children:f?(0,a.jsx)(o.A,{className:"w-5 h-5 text-red-500"}):h||t&&v?(0,a.jsx)(l.A,{className:"w-5 h-5 text-green-500"}):(0,a.jsx)(i.A,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsx)("input",{ref:y,type:"tel",value:t.length<=3?t:t.length<=7?"".concat(t.slice(0,3)," ").concat(t.slice(3)):"".concat(t.slice(0,3)," ").concat(t.slice(3,7)," ").concat(t.slice(7)),onChange:e=>{let t=e.target.value.replace(/\D/g,"");t.length>11&&(t=t.slice(0,11)),r(t)},onFocus:()=>p(!0),onBlur:()=>p(!1),placeholder:u,disabled:g,maxLength:13,className:(0,s.cn)("flex-1 py-4 pr-4","bg-transparent","text-foreground placeholder-muted-foreground","text-base font-medium","outline-none","disabled:cursor-not-allowed")})]}),f&&(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-red-500"}),(0,a.jsx)("span",{className:"text-sm text-red-600",children:f})]}),h&&!f&&(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-1",children:[(0,a.jsx)(l.A,{className:"w-4 h-4 text-green-500"}),(0,a.jsx)("span",{className:"text-sm text-green-600",children:"手机号格式正确"})]}),!f&&!h&&t&&!v&&(0,a.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"请输入正确的手机号码"})]})}},59445:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},62266:(e,t,r)=>{Promise.resolve().then(r.bind(r,84536))},77908:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},79514:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,AuthProvider:()=>l});var a=r(55931);let n=(0,a.createContext)(void 0),s={USER:"aino_user",AUTH_TOKEN:"aino_auth_token",APP_ID:"CURRENT_APP_ID"},o=[{id:"1",phone:"13800138000",name:"iPollo 用户",avatar:"/generic-user-avatar.png",points:2323,followers:22,following:334,posts:3434,createdAt:new Date().toISOString()},{id:"2",phone:"13900139000",name:"测试用户",avatar:"/generic-user-avatar.png",points:1500,followers:15,following:200,posts:100,createdAt:new Date().toISOString()}];function l(e){let{children:t}=e,[r,l]=(0,a.useState)({user:null,isAuthenticated:!1,isLoading:!0});(0,a.useEffect)(()=>{try{let e=localStorage.getItem(s.USER),t=localStorage.getItem(s.AUTH_TOKEN);if(e&&t){let t=JSON.parse(e);l({user:t,isAuthenticated:!0,isLoading:!1})}else l({user:null,isAuthenticated:!1,isLoading:!1})}catch(e){console.error("初始化认证状态失败:",e),l({user:null,isAuthenticated:!1,isLoading:!1})}},[]);let i=async e=>{try{let t;l(e=>({...e,isLoading:!0})),await new Promise(e=>setTimeout(e,1e3));let r={};Object.keys(e).forEach(t=>{t.indexOf("followers")>-1&&(r.followers=e[t]),t.indexOf("following")>-1&&(r.following=e[t]),t.indexOf("posts")>-1&&(r.posts=e[t]),t.indexOf("points")>-1&&(r.points=e[t])}),console.log(r),t={id:Date.now().toString(),phone:e.phone,name:e.profile.name,avatar:e.profile.avatar,points:r.points||0,followers:r.followers||0,following:r.following||0,posts:r.posts||0,createdAt:new Date().toISOString()},o.push(t);let a="mock_token_".concat(Date.now());{localStorage.setItem(s.USER,JSON.stringify(t)),localStorage.setItem(s.AUTH_TOKEN,a);let e=localStorage.getItem(s.APP_ID);e&&(localStorage.setItem("".concat(s.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(s.AUTH_TOKEN,":").concat(e),a))}return l({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("登录失败:",e),l(e=>({...e,isLoading:!1})),!1}},c=async e=>{try{if(l(e=>({...e,isLoading:!0})),o.find(t=>t.phone===e.phone))throw Error("该手机号已注册");let t={id:Date.now().toString(),phone:e.phone,name:e.name||"用户".concat(e.phone.slice(-4)),avatar:"/generic-user-avatar.png",points:100,followers:0,following:0,posts:0,createdAt:new Date().toISOString()};o.push(t);let r="mock_token_".concat(Date.now());{localStorage.setItem(s.USER,JSON.stringify(t)),localStorage.setItem(s.AUTH_TOKEN,r);let e=localStorage.getItem(s.APP_ID);e&&(localStorage.setItem("".concat(s.USER,":").concat(e),JSON.stringify(t)),localStorage.setItem("".concat(s.AUTH_TOKEN,":").concat(e),r))}return l({user:t,isAuthenticated:!0,isLoading:!1}),!0}catch(e){return console.error("注册失败:",e),l(e=>({...e,isLoading:!1})),!1}},u={...r,login:i,register:c,logout:()=>{localStorage.removeItem(s.USER),localStorage.removeItem(s.AUTH_TOKEN),l({user:null,isAuthenticated:!1,isLoading:!1})},updateUser:e=>{if(r.user){let t={...r.user,...e};l(e=>({...e,user:t})),localStorage.setItem(s.USER,JSON.stringify(t))}}};return a.createElement(n.Provider,{value:u},t)}function i(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},79588:(e,t,r)=>{"use strict";var a=r(95604);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})},84536:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(89835),n=r(55931),s=r(78720),o=r(79588),l=r(79514);function i(){let e=(0,o.useRouter)(),{register:t,isAuthenticated:r,isLoading:i}=(0,l.A)();(0,n.useEffect)(()=>{r&&!i&&e.push("/profile")},[r,i,e]),(0,n.useEffect)(()=>{try{let e=new URLSearchParams(window.location.search).get("authCfg");e&&window.localStorage.setItem("APP_AUTH_CONFIG",e)}catch(e){}},[]);let c=async r=>{console.log("注册数据:",r),await t(r)?e.push("/profile"):alert("注册失败，请检查手机号或密码")};return i||r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"加载中..."})]})}):(0,a.jsx)("div",{className:"min-h-screen",children:(0,a.jsx)(s.I,{onRegister:c,onLogin:()=>{e.push("/auth/login")}})})}},92475:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(89835),n=r(55931),s=r(48454),o=r(7951),l=r(15496);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2 rounded-lg",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:o,asChild:c=!1,...u}=e,d=c?s.DX:"button";return(0,a.jsx)(d,{className:(0,l.cn)(i({variant:n,size:o,className:r})),ref:t,...u})});c.displayName="Button"}},e=>{e.O(0,[3739,3832,7455,8590,8720,9900,7341,7358],()=>e(e.s=62266)),_N_E=e.O()}]);