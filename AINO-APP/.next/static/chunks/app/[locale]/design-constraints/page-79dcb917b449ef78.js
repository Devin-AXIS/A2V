(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2585],{13557:(e,s,t)=>{"use strict";t.d(s,{QR:()=>c,Y3:()=>m});var l=t(89835),o=t(55931),r=t(17131),n=t(41657);class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}setDesignConfig(e,s){this.designTokens=e,this.cardTheme=s}validateComponent(e,s){let t=[],l=[];return this.designTokens&&this.validateColorUsage(e,s,t,l),this.designTokens&&this.validateFontUsage(e,s,t,l),this.cardTheme&&this.validateCardTheme(e,s,t,l),this.validateLayout(e,s,t,l),{isValid:0===t.length,violations:t,recommendations:l}}validateColorUsage(e,s,t,l){if(!this.designTokens)return;let o=this.findHardcodedColors(s);o.length>0&&(t.push("组件 ".concat(e," 使用了硬编码颜色: ").concat(o.join(", "))),l.push("使用 designTokens 中的颜色变量"));let r=Object.keys(this.designTokens.colors),n=this.extractUsedColors(s).filter(e=>!r.includes(e));n.length>0&&(t.push("组件 ".concat(e," 使用了未定义的主题颜色: ").concat(n.join(", "))),l.push("只使用 designTokens.colors 中定义的颜色"))}validateFontUsage(e,s,t,l){if(!this.designTokens)return;let o=this.findHardcodedFonts(s);o.length>0&&(t.push("组件 ".concat(e," 使用了硬编码字体: ").concat(o.join(", "))),l.push("使用 designTokens 中的字体变量"))}validateCardTheme(e,s,t,l){this.cardTheme&&(this.hasCardThemeUsage(s)||l.push("使用 useCardTheme() 获取卡片主题配置"))}validateLayout(e,s,t,l){this.hasUnifiedSpacing(s)||l.push("使用统一的间距系统 (p-4, m-6 等)"),this.hasUnifiedRadius(s)||l.push("使用统一的圆角系统 (rounded-lg, rounded-xl 等)")}getComponentRecommendations(e){return this.designTokens?{colors:Object.keys(this.designTokens.colors),fonts:Object.keys(this.designTokens.typography.fonts),spacing:["p-2","p-4","p-6","p-8","m-2","m-4","m-6","m-8"],radius:["rounded","rounded-lg","rounded-xl","rounded-2xl"]}:{colors:[],fonts:[],spacing:[],radius:[]}}generateConstraintReport(e){let s={totalComponents:e.length,validComponents:0,invalidComponents:0,violations:[]};return e.forEach(e=>{let{name:t,props:l}=e,o=this.validateComponent(t,l);o.isValid?s.validComponents++:(s.invalidComponents++,s.violations.push({component:t,violations:o.violations,recommendations:o.recommendations}))}),s}isComponentCompliant(e,s){return this.validateComponent(e,s).isValid}findHardcodedColors(e){return[]}findHardcodedFonts(e){return[]}extractUsedColors(e){return[]}hasCardThemeUsage(e){return!1}hasUnifiedSpacing(e){return!1}hasUnifiedRadius(e){return!1}constructor(){this.designTokens=null,this.cardTheme=null}}let i=a.getInstance(),d=(0,o.createContext)(void 0);function c(e){let{children:s}=e,{tokens:t}=(0,r.y)(),{theme:a}=(0,n.b)();return(0,o.useEffect)(()=>{t&&a&&i.setDesignConfig(t,a)},[t,a]),(0,o.useEffect)(()=>{},[t,a]),(0,l.jsx)(d.Provider,{value:{validateComponent:(e,s)=>i.validateComponent(e,s),getRecommendations:e=>i.getComponentRecommendations(e),generateReport:e=>i.generateConstraintReport(e),enforceConstraints:()=>{}},children:s})}function m(){let e=(0,o.useContext)(d);if(void 0===e)throw Error("useUnifiedDesignConstraints must be used within a UnifiedDesignConstraintsProvider");return e}},19812:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var l=t(89835),o=t(55931),r=t(37377),n=t(13557),a=t(96037),i=t(41657);function d(){let{validateComponent:e,getRecommendations:s,generateReport:t}=(0,n.Y3)(),{theme:r}=(0,i.b)(),[d,c]=(0,o.useState)(""),[m,h]=(0,o.useState)(""),[u,x]=(0,o.useState)(null),[p,g]=(0,o.useState)(null);return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)(a.AppCard,{className:"p-6",localThemeKey:"constraint-checker-header",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",style:{color:r.titleColor},children:"\uD83C\uDFA8 统一设计约束检查器"}),(0,l.jsx)("p",{className:"mb-4",style:{color:r.textColor},children:"确保所有组件都遵循统一设计规范，除非真正需要新功能时才写新组件"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("h3",{className:"font-semibold mb-1",style:{color:r.titleColor},children:"颜色约束"}),(0,l.jsx)("p",{style:{color:r.textColor},children:"必须使用 designTokens 中的颜色变量"})]}),(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("h3",{className:"font-semibold mb-1",style:{color:r.titleColor},children:"字体约束"}),(0,l.jsx)("p",{style:{color:r.textColor},children:"必须使用 designTokens 中的字体变量"})]}),(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("h3",{className:"font-semibold mb-1",style:{color:r.titleColor},children:"主题约束"}),(0,l.jsx)("p",{style:{color:r.textColor},children:"必须使用 useCardTheme() 获取主题配置"})]})]})]}),(0,l.jsxs)(a.AppCard,{className:"p-6",localThemeKey:"component-validation",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4",style:{color:r.titleColor},children:"组件约束验证"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:r.textColor},children:"组件名称"}),(0,l.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),className:"w-full p-2 border rounded-lg",placeholder:"例如: LearningPlanSummaryCard",style:{borderColor:"".concat(r.titleColor,"20")}})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:r.textColor},children:"组件属性 (JSON)"}),(0,l.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),className:"w-full p-2 border rounded-lg h-24",placeholder:'例如: {"className": "p-4", "style": {"color": "#333"}}',style:{borderColor:"".concat(r.titleColor,"20")}})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{onClick:()=>{try{let s=m?JSON.parse(m):{},t=e(d,s);x(t)}catch(e){x({isValid:!1,violations:["JSON 格式错误"],recommendations:["请检查 JSON 格式"]})}},className:"px-4 py-2 rounded-lg font-medium",style:{backgroundColor:r.titleColor,color:r.background},children:"验证组件"}),(0,l.jsx)("button",{onClick:()=>{g(s(d||"default"))},className:"px-4 py-2 rounded-lg font-medium border",style:{borderColor:r.titleColor,color:r.titleColor},children:"获取推荐配置"}),(0,l.jsx)("button",{onClick:()=>{x({report:t([{name:"LearningPlanSummaryCard",props:{}},{name:"CourseModuleCard",props:{}},{name:"JobExperienceRatioCard",props:{}}])})},className:"px-4 py-2 rounded-lg font-medium border",style:{borderColor:r.titleColor,color:r.titleColor},children:"生成约束报告"})]})]})]}),u&&(0,l.jsxs)(a.AppCard,{className:"p-6",localThemeKey:"validation-result",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4",style:{color:r.titleColor},children:"验证结果"}),u.report?(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("div",{className:"text-2xl font-bold",style:{color:r.titleColor},children:u.report.totalComponents}),(0,l.jsx)("div",{className:"text-sm",style:{color:r.textColor},children:"总组件数"})]}),(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.report.validComponents}),(0,l.jsx)("div",{className:"text-sm",style:{color:r.textColor},children:"符合约束"})]}),(0,l.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("div",{className:"text-2xl font-bold text-red-600",children:u.report.invalidComponents}),(0,l.jsx)("div",{className:"text-sm",style:{color:r.textColor},children:"违反约束"})]})]}),u.report.violations.length>0&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold mb-2",style:{color:r.titleColor},children:"违反约束详情:"}),(0,l.jsx)("div",{className:"space-y-2",children:u.report.violations.map((e,s)=>(0,l.jsxs)("div",{className:"p-3 rounded-lg border-l-4 border-red-500",style:{backgroundColor:"".concat(r.background,"20")},children:[(0,l.jsx)("div",{className:"font-medium",style:{color:r.titleColor},children:e.component}),e.violations.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm text-red-600",children:["❌ ",e]},s)),e.recommendations.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm text-blue-600",children:["\uD83D\uDCA1 ",e]},s))]},s))})]})]}):(0,l.jsx)("div",{className:"space-y-3",children:(0,l.jsxs)("div",{className:"p-3 rounded-lg border-l-4 ".concat(u.isValid?"border-green-500 bg-green-50":"border-red-500 bg-red-50"),children:[(0,l.jsxs)("div",{className:"font-medium",style:{color:r.titleColor},children:["状态: ",u.isValid?"✅ 符合约束":"❌ 违反约束"]}),u.violations.length>0&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("div",{className:"font-medium text-red-600 mb-1",children:"违反约束:"}),u.violations.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm text-red-600",children:["• ",e]},s))]}),u.recommendations.length>0&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("div",{className:"font-medium text-blue-600 mb-1",children:"建议:"}),u.recommendations.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm text-blue-600",children:["• ",e]},s))]})]})})]}),p&&(0,l.jsxs)(a.AppCard,{className:"p-6",localThemeKey:"recommendations",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold mb-4",style:{color:r.titleColor},children:"推荐配置"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",style:{color:r.titleColor},children:"推荐颜色"}),(0,l.jsx)("div",{className:"space-y-1",children:p.colors.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm",style:{color:r.textColor},children:["• ",e]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",style:{color:r.titleColor},children:"推荐字体"}),(0,l.jsx)("div",{className:"space-y-1",children:p.fonts.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm",style:{color:r.textColor},children:["• ",e]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",style:{color:r.titleColor},children:"推荐间距"}),(0,l.jsx)("div",{className:"space-y-1",children:p.spacing.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm",style:{color:r.textColor},children:["• ",e]},s))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium mb-2",style:{color:r.titleColor},children:"推荐圆角"}),(0,l.jsx)("div",{className:"space-y-1",children:p.radius.map((e,s)=>(0,l.jsxs)("div",{className:"text-sm",style:{color:r.textColor},children:["• ",e]},s))})]})]})]})]})}async function c(e){let{params:s}=e,{locale:t}=await s;return(0,l.jsxs)("div",{className:"min-h-screen pb-32",children:[(0,l.jsx)(r.BrowserHeader,{title:"设计约束系统"}),(0,l.jsx)("div",{className:"px-4 pt-4",children:(0,l.jsx)(o.Suspense,{fallback:(0,l.jsx)("div",{className:"p-4 text-center",children:"加载中..."}),children:(0,l.jsx)(d,{})})})]})}},21155:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let l=(0,t(51894).A)("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]])},21234:(e,s,t)=>{"use strict";t.d(s,{c:()=>i});var l=t(89835),o=t(79588),r=t(21155),n=t(92475),a=t(11012);function i(){let e=(0,o.usePathname)(),s=(0,o.useRouter)(),t=t=>{document.cookie="NEXT_LOCALE=".concat(t,";path=/;max-age=31536000;samesite=lax");let l=e.split("/");"pc"===l[1]?l[2]=t:l[1]=t;let o=l.join("/");s.push(o)};return(0,l.jsxs)(a.rI,{children:[(0,l.jsx)(a.ty,{asChild:!0,children:(0,l.jsxs)(n.$,{variant:"ghost",size:"icon",className:"rounded-full w-10 h-10 bg-white/50 backdrop-blur-md",children:[(0,l.jsx)(r.A,{className:"w-5 h-5 text-gray-700"}),(0,l.jsx)("span",{className:"sr-only",children:"Switch language"})]})}),(0,l.jsxs)(a.SQ,{align:"end",className:"bg-white/80 backdrop-blur-lg border-gray-200/60 rounded-xl",children:[(0,l.jsx)(a._2,{onClick:()=>t("zh"),children:"中文"}),(0,l.jsx)(a._2,{onClick:()=>t("en"),children:"English"})]})]})}},23849:(e,s,t)=>{Promise.resolve().then(t.bind(t,19812))},37377:(e,s,t)=>{"use strict";t.d(s,{BrowserHeader:()=>r});var l=t(89835),o=t(21234);function r(e){let{title:s}=e;return(0,l.jsxs)("header",{className:"flex items-center justify-between p-4 h-16",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:s}),(0,l.jsx)("div",{className:"flex items-center space-x-2",children:(0,l.jsx)(o.c,{})})]})}},79588:(e,s,t)=>{"use strict";var l=t(95604);t.o(l,"useParams")&&t.d(s,{useParams:function(){return l.useParams}}),t.o(l,"usePathname")&&t.d(s,{usePathname:function(){return l.usePathname}}),t.o(l,"useRouter")&&t.d(s,{useRouter:function(){return l.useRouter}}),t.o(l,"useSearchParams")&&t.d(s,{useSearchParams:function(){return l.useSearchParams}})}},e=>{e.O(0,[3739,8290,5022,6037,7131,9900,7341,7358],()=>e(e.s=23849)),_N_E=e.O()}]);