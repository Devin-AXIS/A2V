(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{1828:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]])},13391:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},17409:(e,t,r)=>{"use strict";r.d(t,{BottomNavigation:()=>w});var a=r(89835),l=r(79588),n=r(75123),s=r.n(n),o=r(35749),i=r(13391),c=r(92126),u=r(79644),h=r(42039),d=r(77796),m=r(97909),p=r(59213),f=r(8892),g=r(70368),y=r(92475),x=r(96037),v=r(41657),b=r(35677),A=r(55931);function w(e){let{dict:t,items:r}=e,n=(0,l.usePathname)(),{theme:w}=(0,v.b)(),j=n.split("/")[1],N=n.endsWith("/chat"),S=(0,A.useMemo)(()=>!function(e){if(!e.startsWith("#"))return!1;let t=Number.parseInt(e.substring(1),16);return .2126*(t>>16&255)+.7152*(t>>8&255)+.0722*((0|t)&255)<128}(w.background)?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.1)",[w.background]);if(N)return null;let k=t||{browseComponents:"组件",dashboard:"仪表板",chat:"AI",search:"搜索",profile:"我的"},C=[{href:"/",label:k.browseComponents,icon:o.A},{href:"/dashboard",label:k.dashboard,icon:i.A},{href:"/chat",label:k.chat,icon:c.A},{href:"/search",label:k.search,icon:u.A},{href:"/profile",label:k.profile,icon:h.A}],E=n.includes("/preview/")||n.includes("/app/"),P=[];if(r&&r.length>0)P=r;else try{{let e=localStorage.getItem("APPLICATION_CONFIG"),t=JSON.parse(e);if(e){var z,M,I;let e=Array.isArray(null==t||null==(I=t.config)||null==(M=I.clientManifest)||null==(z=M.app)?void 0:z.bottomNav)?t.config.clientManifest.app.bottomNav:[];e.length>0&&(P=e.filter(e=>(null==e?void 0:e.visible)!==!1).map(e=>{var t,r,a;return{href:e.route||"/",label:(null==(t=e.label)?void 0:t[j])||(null==(r=e.label)?void 0:r.zh)||(null==(a=e.label)?void 0:a.en)||e.id||"",iconName:e.icon||"grid"}}))}if(0===P.length){let e=localStorage.getItem("CURRENT_APP_NAV_ITEMS");if(e){let t=JSON.parse(e);Array.isArray(t)&&t.length>0&&(P=t.filter(e=>e&&!1!==e.visible).map(e=>{let t=e.route||e.href||"/";return"/me"===t&&(t="/profile"),{href:t,label:e.label||e.key||"",iconName:e.icon||e.iconName}}))}}}}catch(e){}if(0!==P.length||E||(P=C),0===P.length)return null;let _={home:d.A,user:h.A,profile:h.A,search:u.A,dashboard:i.A,grid:o.A,menu:o.A,chat:c.A,message:c.A,settings:m.A,bell:p.A,star:f.A,heart:g.A},O=localStorage.getItem("QUERY_STRING");return(0,a.jsx)("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-40",children:(0,a.jsx)(x.AppCard,{className:"px-4 py-1",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-3",children:[P.map(e=>{var t;let{href:r,icon:l,iconName:i,label:c}=e,u="/".concat(j).concat("/"===r?"":r).concat(O),h=n===u||"/"===r&&n==="/".concat(j),d=null!=(t=null!=l?l:i?_[i]:void 0)?t:o.A;return(0,a.jsx)(s(),{href:u,children:(0,a.jsxs)(y.$,{variant:"ghost",className:"rounded-2xl w-12 h-12 flex flex-col items-center justify-center transition-all duration-300 group",style:{backgroundColor:h?S:"transparent"},children:[(0,a.jsx)(d,{className:"w-6 h-6 transition-colors",style:{color:w.fontColor,opacity:h?1:.7}}),(0,a.jsx)("span",{className:"sr-only",children:c})]})},c)}),(0,a.jsx)("div",{className:"border-l border-gray-200/30 pl-2",children:(0,a.jsx)(b.y,{})})]})})})}},35677:(e,t,r)=>{"use strict";r.d(t,{P:()=>u,y:()=>h});var a=r(89835);r(55931);var l=r(92475),n=r(47694),s=r(39832),o=r(1828),i=r(7504),c=r(15496);function u(e){let{className:t="",variant:r="outline",size:u="sm",showLabel:h=!1}=e,{setPreset:d,current:m}=(0,n.LK)(),p=()=>{switch(m.current){case"small":return"小";case"normal":default:return"正常";case"large":return"大"}};return(0,a.jsxs)(l.$,{variant:r,size:u,onClick:()=>{d("normal"===m.current?"large":"large"===m.current?"small":"normal")},className:(0,c.cn)("flex items-center gap-2",t),title:"切换字体大小 (当前: ".concat(p(),")"),children:[(()=>{switch(m.current){case"small":return(0,a.jsx)(s.A,{className:"h-4 w-4"});case"normal":default:return(0,a.jsx)(o.A,{className:"h-4 w-4"});case"large":return(0,a.jsx)(i.A,{className:"h-4 w-4"})}})(),h&&(0,a.jsxs)("span",{className:"text-xs",children:[p()," (",Math.round(100*m.scale),"%)"]})]})}function h(e){let{className:t=""}=e,{setPreset:r,current:u}=(0,n.LK)();return(0,a.jsx)(l.$,{variant:"ghost",size:"sm",onClick:()=>{r("normal"===u.current?"large":"large"===u.current?"small":"normal")},className:(0,c.cn)("h-8 w-8 p-0",t),title:"字体大小：".concat(u.name," (").concat(Math.round(100*u.scale),"%)"),children:(()=>{switch(u.current){case"small":return(0,a.jsx)(s.A,{className:"h-4 w-4"});case"normal":default:return(0,a.jsx)(o.A,{className:"h-4 w-4"});case"large":return(0,a.jsx)(i.A,{className:"h-4 w-4"})}})()})}},35749:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},39832:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},47694:(e,t,r)=>{"use strict";r.d(t,{Cv:()=>o,LK:()=>i});var a=r(55931),l=r(17131);let n={small:{scale:.8,name:"小"},normal:{scale:1,name:"正常"},large:{scale:1.2,name:"大"}},s={xs:"0.75rem",sm:"0.875rem",base:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem"};function o(){let{getToken:e,setToken:t}=(0,l.y)(),[r,o]=(0,a.useState)(()=>e("fontSizeConfig")||{preset:"normal",scale:1,sizes:s}),i=(0,a.useMemo)(()=>{let{scale:e}=r,t={};return Object.entries(s).forEach(r=>{let[a,l]=r,n=parseFloat(l),s=l.replace(/[\d.]/g,"");t[a]="".concat(n*e).concat(s)}),t},[r]),c=(0,a.useCallback)(e=>{if("undefined"!=typeof document){let t=document.documentElement;Object.entries(e).forEach(e=>{let[r,a]=e;t.style.setProperty("--font-size-".concat(r),a)}),console.log("Applied font sizes to DOM:",e)}},[]),u=(0,a.useCallback)(e=>{console.log("Setting font size preset:",e);let r=n[e].scale,a={};Object.entries(s).forEach(e=>{let[t,l]=e,n=parseFloat(l),s=l.replace(/[\d.]/g,""),o=n*r;a[t]="".concat(o).concat(s)});let l={preset:e,scale:r,sizes:a};o(l),t("fontSizeConfig",l),t("typography.fontSize",l.sizes),c(a),console.log("Font size preset changed:",{preset:e,scale:r,newSizes:a})},[t,c]),h=(0,a.useCallback)(e=>{let{scale:t}=r,a=s[e];if(!a)return s.base;let l=parseFloat(a),n=a.replace(/[\d.]/g,"");return"".concat(l*t).concat(n)},[r]),d=(0,a.useCallback)(()=>{let e=r.preset;return{...n[e],current:e}},[r.preset]),m=(0,a.useCallback)(()=>Object.entries(n).map(e=>{let[t,r]=e;return{key:t,...r}}),[]);return(0,a.useEffect)(()=>{c(i)},[]),{fontSizeConfig:r,currentPreset:d(),presetOptions:m(),fontSizes:i,getFontSize:h,setFontSizePreset:u,presets:n}}function i(){let{setFontSizePreset:e,currentPreset:t,presetOptions:r}=o();return{setPreset:e,current:t,options:r}}},67158:(e,t,r)=>{Promise.resolve().then(r.bind(r,80458))},80458:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(89835),l=r(55931),n=r(79588),s=r(33378),o=r(17409);async function i(e,t,r){let a=function(e,t){if(null==e?void 0:e.dataSources)return e.dataSources[t]}(e,t);if(!(null==a?void 0:a.url))throw Error("DataSource not found: ".concat(t));let l=function(e){try{var t;let r=null==e||null==(t=e.app)?void 0:t.appKey;if(r)return String(r);{let e=localStorage.getItem("CURRENT_APP_ID");if(e)return String(e)}}catch(e){}return null}(e),n=(a.method||"GET").toUpperCase(),s=(null==r?void 0:r.baseUrl)||"http://47.94.52.142:3007",o=(p=a.url,(f=null==r?void 0:r.params)?p.replace(/\{(\w+)\}/g,(e,t)=>{let r=f[t];return null==r?"":encodeURIComponent(String(r))}):p),i=o.startsWith("http")?o:"".concat(s).concat(o),c={"Content-Type":"application/json"};l&&(c["x-application-id"]=l);let u=new URL(i);if(l&&!u.searchParams.has("applicationId")&&u.searchParams.set("applicationId",l),"appUser"===a.auth){let e=function(){try{{let e=localStorage.getItem("APP_USER_TOKEN");if(e)return String(e)}}catch(e){}return null}();e&&(c.Authorization="Bearer ".concat(e))}let h=await fetch(u.toString(),{method:n,headers:c}),d=await h.json().catch(()=>({}));if(!h.ok)throw Error(d&&(d.message||d.error)||"Request failed: ".concat(h.status));var m,p,f,g=d&&(null!=(m=d.data)?m:d),y=null==r?void 0:r.selectPath;if(!y)return g;let x=y.startsWith("$.")?y.slice(2):y.startsWith("$")?y.slice(1):y;return x?x.split(".").reduce((e,t)=>e&&t in e?e[t]:void 0,g):g}async function c(e,t,r){let a={};if(!e||!t||!t.data||"object"!=typeof t.data)return a;for(let[l,n]of Object.entries(t.data))try{let t=null==n?void 0:n.source,s=null==n?void 0:n.params,o=null==n?void 0:n.select;if(!t)continue;a[l]=await i(e,t,{params:s,selectPath:o,baseUrl:r})}catch(e){a[l]={__error:(null==e?void 0:e.message)||"fetch error"}}return a}let u=(0,l.createContext)({data:{},loading:!1});function h(e){let{manifest:t,pageKey:r,children:n,baseUrl:s}=e,o=(0,l.useMemo)(()=>r&&(null==t?void 0:t.pages)?t.pages[r]:void 0,[t,r]),[i,h]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null),[p,f]=(0,l.useState)({});(0,l.useEffect)(()=>{let e=!1;return async function(){if(t&&o){h(!0),m(null);try{let r=await c(t,o,s);e||f(r)}catch(t){e||m((null==t?void 0:t.message)||"load error")}finally{e||h(!1)}}}(),()=>{e=!0}},[t,o,s]);let g=(0,l.useMemo)(()=>({manifest:t,pageKey:r,pageConfig:o,data:p,loading:i,error:d}),[t,r,o,p,i,d]);return(0,a.jsx)(u.Provider,{value:g,children:n})}let d=(0,l.createContext)({});function m(e){let{appKey:t,locale:r,device:n="mobile",children:s}=e,[o,i]=(0,l.useState)(n),c=(0,l.useMemo)(()=>({appKey:t,locale:r,device:o,setDevice:i}),[t,r,o]);return(0,a.jsx)(d.Provider,{value:c,children:s})}var p=r(26077);function f(){let e=(0,n.useParams)(),t=(0,n.useSearchParams)(),[r,i]=(0,l.useState)(null),[c,u]=(0,l.useState)(!0),[d,f]=(0,l.useState)(null),g=e.locale||"zh",y=e.appKey;(0,l.useEffect)(()=>{try{(0,p.a)()}catch(e){}},[]),(0,l.useEffect)(()=>{let e=!1;async function t(){u(!0),f(null);try{var t;let r=await fetch("http://47.94.52.142:3007/api/apps/".concat(encodeURIComponent(String(y)),"/manifest?state=published")),a=await r.json();if(!r.ok||!(null==a?void 0:a.success))throw Error((null==a?void 0:a.message)||"failed");e||i((null==(t=a.data)?void 0:t.manifest)||a.data)}catch(t){e||f((null==t?void 0:t.message)||"error")}finally{e||u(!1)}}return y&&t(),()=>{e=!0}},[y]);let x=(0,l.useMemo)(()=>{var e,a;let l=t.get("route")||"",n=("/me"===l?"/profile":l)||(null==r||null==(a=r.pages)||null==(e=a.home)?void 0:e.route)||"/home";try{let e=r&&r.pages?r.pages:{},t=Object.entries(e).find(e=>{let[,t]=e;return((null==t?void 0:t.route)||"")===n});if(t&&t[0])return t[0];return(n||"").replace(/^\//,"")||"home"}catch(e){return"home"}},[r,t]);(0,l.useEffect)(()=>{try{var e,a;let l=t.get("route")||"",n=("/me"===l?"/profile":l)||(null==r||null==(a=r.pages)||null==(e=a.home)?void 0:e.route)||"/home",s=r&&r.pages?r.pages:{},o=Object.entries(s).find(e=>{let[,t]=e;return((null==t?void 0:t.route)||"")===n}),i=(n||"").replace(/^\//,"")||"home";if(!(o||i)){let e=new URL(window.location.href);e.searchParams.set("route","/home"),window.history.replaceState(null,"",e.toString())}}catch(e){}},[r,t]);let v=(0,l.useMemo)(()=>{try{let e=(null==r?void 0:r.pages)&&x?r.pages[x]:void 0,t=(null==e?void 0:e.category)||"workspace";return"string"==typeof t?t:"workspace"}catch(e){return"workspace"}},[r,x]);return c?(0,a.jsx)("main",{className:"min-h-[100dvh] flex items-center justify-center text-muted-foreground",children:"Loading..."}):d?(0,a.jsx)("main",{className:"min-h-[100dvh] flex items-center justify-center text-red-600 text-sm",children:d}):(0,a.jsx)("main",{className:"min-h-[100dvh] bg-transparent",children:(0,a.jsxs)(m,{appKey:String(y),locale:String(g),device:"mobile",children:[(0,a.jsx)(h,{manifest:r,pageKey:x,baseUrl:"http://47.94.52.142:3007",children:(0,a.jsx)(s.M3,{category:v,locale:g,layout:"mobile",pageKey:x})}),(0,a.jsx)(o.BottomNavigation,{})]})})}},92126:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(51894).A)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])}},e=>{e.O(0,[3739,8290,5022,8244,5123,3660,8607,4730,3419,7455,6396,3031,6037,3953,9770,721,7131,7020,9300,9900,7341,7358],()=>e(e.s=67158)),_N_E=e.O()}]);