"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8720],{78720:(e,t,s)=>{s.d(t,{I:()=>g});var r=s(89835),a=s(77455),l=s(55931),n=s(79588),o=s(15496),i=s(42039);let c=(0,s(51894).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var d=s(59445),m=s(32937),x=s(77908),u=s(55098),h=s(92475),p=s(58590);function g(e){let{onRegister:t,onLogin:s,className:g}=e,[w,b]=(0,l.useState)("form"),[y,f]=(0,l.useState)({phone:"",password:"",confirmPassword:"",name:"",agreeTerms:!1}),[v,j]=(0,l.useState)(!1),[N,C]=(0,l.useState)(!1),[P,k]=(0,l.useState)(!1),[A,T]=(0,l.useState)({}),S=(e,t)=>{f(s=>({...s,[e]:t})),A[e]&&T(t=>({...t,[e]:void 0}))},I=async()=>{var e,s,r,l;if((()=>{let e={};return y.name.trim()||(e.name="请输入姓名"),y.phone?/^1[3-9]\d{9}$/.test(y.phone)||(e.phone="请输入正确的手机号"):e.phone="请输入手机号",y.password?y.password.length<6&&(e.password="密码至少需要6个字符"):e.password="请输入密码",y.password!==y.confirmPassword&&(e.confirmPassword="两次输入的密码不一致"),y.agreeTerms||(e.agreeTerms="请同意服务条款和隐私政策"),T(e),0===Object.keys(e).length})()){k(!0),T({});try{let r=window.localStorage.getItem("APPLICATION_CONFIG"),l=JSON.parse(r||"{}"),n=null==l?void 0:l.id,o=await a.A.post("http://localhost:3007/api/modules/system/user/register?applicationId=".concat(n),{phone_number:y.phone,password:y.password,name:y.name});if(console.log("注册响应:",o.data),null==(e=o.data)?void 0:e.success)b("success"),setTimeout(()=>{null==t||t(y)},1500);else throw Error((null==(s=o.data)?void 0:s.error)||"注册失败")}catch(t){console.error("注册失败:",t);let e=(null==(l=t.response)||null==(r=l.data)?void 0:r.error)||t.message||"注册失败，请重试";T(t=>({...t,phone:e}))}finally{k(!1)}}},E=(0,n.usePathname)(),[_,F]=(0,l.useState)(null);(0,l.useEffect)(()=>{try{let e=new URLSearchParams(window.location.search).get("authCfg");if(e){let t=JSON.parse(e);F(t);return}let t=window.localStorage.getItem("APP_AUTH_CONFIG");t&&F(JSON.parse(t))}catch(e){}},[]);let O=(null==_?void 0:_.titleColor)?{color:_.titleColor}:void 0,z=(null==_?void 0:_.bodyColor)?{color:_.bodyColor}:void 0,L=(0,l.useMemo)(()=>(null==E?void 0:E.startsWith("/en"))?"en":"zh",[E]),M=(0,l.useMemo)(()=>{let e=null==_?void 0:_.introTitle;return e?"string"==typeof e?e:e[L]||e.zh||e.en||null:null},[_,L]),J=(0,l.useMemo)(()=>{let e=null==_?void 0:_.introText;return e?"string"==typeof e?e:e[L]||e.zh||e.en||null:null},[_,L]);return(0,r.jsx)("div",{className:"min-h-screen pb-8",children:(0,r.jsx)("div",{className:"pt-6",children:(0,r.jsxs)("div",{className:"container mx-auto px-4",children:["form"===w?(0,r.jsx)(p.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,r.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:O,children:M||("en"===L?"Create Account":"创建账户")}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",style:z,children:J||("en"===L?"Fill in the information to create your new account":"填写信息以创建您的新账户")})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"en"===L?"Name":"姓名"}),(0,r.jsxs)("div",{className:(0,o.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,r.jsx)(i.A,{className:"w-4 h-4 text-gray-400 ml-3"}),(0,r.jsx)("input",{id:"name",type:"text",className:"flex-1 px-3 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"en"===L?"Enter your name":"请输入您的姓名",value:y.name,onChange:e=>S("name",e.target.value)})]}),A.name&&(0,r.jsx)("p",{className:"mt-1 text-xs text-red-500",children:A.name})]}),(0,r.jsx)("div",{children:(0,r.jsx)(u.L,{value:y.phone,onChange:e=>S("phone",e),error:A.phone,placeholder:"en"===L?"Enter your phone number":"请输入手机号"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"en"===L?"Password":"密码"}),(0,r.jsxs)("div",{className:(0,o.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,r.jsx)(c,{className:"w-4 h-4 text-gray-400 ml-3"}),(0,r.jsx)("input",{id:"password",type:v?"text":"password",className:"flex-1 px-3 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"en"===L?"Enter your password (at least 6 characters)":"请输入密码（至少6个字符）",value:y.password,onChange:e=>S("password",e.target.value)}),(0,r.jsx)("button",{type:"button","aria-label":v?"隐藏密码":"显示密码",className:"pr-3 text-gray-500 hover:text-gray-700",onClick:()=>j(e=>!e),children:v?(0,r.jsx)(d.A,{className:"w-4 h-4"}):(0,r.jsx)(m.A,{className:"w-4 h-4"})})]}),A.password&&(0,r.jsx)("p",{className:"mt-1 text-xs text-red-500",children:A.password})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"en"===L?"Confirm Password":"确认密码"}),(0,r.jsxs)("div",{className:(0,o.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,r.jsx)(c,{className:"w-4 h-4 text-gray-400 ml-3"}),(0,r.jsx)("input",{id:"confirmPassword",type:N?"text":"password",className:"flex-1 px-3 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"en"===L?"Enter your password again":"请再次输入密码",value:y.confirmPassword,onChange:e=>S("confirmPassword",e.target.value)}),(0,r.jsx)("button",{type:"button","aria-label":N?"隐藏密码":"显示密码",className:"pr-3 text-gray-500 hover:text-gray-700",onClick:()=>C(e=>!e),children:N?(0,r.jsx)(d.A,{className:"w-4 h-4"}):(0,r.jsx)(m.A,{className:"w-4 h-4"})})]}),A.confirmPassword&&(0,r.jsx)("p",{className:"mt-1 text-xs text-red-500",children:A.confirmPassword})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>S("agreeTerms",!y.agreeTerms),className:(0,o.cn)("mt-1 w-4 h-4 rounded border-2 flex items-center justify-center transition-colors",y.agreeTerms?"bg-blue-500 border-blue-500 text-white":"border-gray-300 hover:border-gray-400"),children:y.agreeTerms&&(0,r.jsx)(x.A,{className:"w-3 h-3"})}),(0,r.jsxs)("label",{className:"text-xs text-gray-600 leading-relaxed cursor-pointer",onClick:()=>S("agreeTerms",!y.agreeTerms),children:["en"===L?"I agree to the":"我同意"," ",(0,r.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-700 hover:underline",children:"en"===L?"Terms of Service":"服务条款"})," ","en"===L?"and":"和"," ",(0,r.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-700 hover:underline",children:"en"===L?"Privacy Policy":"隐私政策"})]})]}),A.agreeTerms&&(0,r.jsx)("p",{className:"text-xs text-red-500",children:A.agreeTerms})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(h.$,{type:"button",onClick:I,disabled:P,size:"lg",className:"w-full rounded-full h-12 text-base",variant:"default",children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"en"===L?"Creating Account...":"创建账户中..."]}):"en"===L?"Create Account":"创建账户"})}),(0,r.jsxs)("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["en"===L?"Already have an account?":"已有账户？"," ",(0,r.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",onClick:s,children:"en"===L?"Sign In Now":"立即登录"})]})]})}):null,"success"===w?(0,r.jsx)(p.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,r.jsx)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)(x.A,{className:"w-8 h-8 text-green-600"})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:O,children:"en"===L?"Account Created Successfully!":"账户创建成功！"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",style:z,children:"en"===L?"Welcome to our platform":"欢迎加入我们的平台"})]})})}):null]})})})}}}]);