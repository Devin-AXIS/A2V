"use strict";exports.id=7233,exports.ids=[7233],exports.modules={37233:(a,b,c)=>{c.d(b,{I:()=>q});var d=c(80742),e=c(30311),f=c(36138),g=c(84336),h=c(88810),i=c(54255),j=c(87563),k=c(83119),l=c(33371),m=c(62670),n=c(49454),o=c(66497),p=c(56596);function q({onRegister:a,onLogin:b,className:c}){let[q,r]=(0,e.useState)("form"),[s,t]=(0,e.useState)({phone:"",password:"",confirmPassword:"",name:"",agreeTerms:!1}),[u,v]=(0,e.useState)(!1),[w,x]=(0,e.useState)(!1),[y,z]=(0,e.useState)(!1),[A,B]=(0,e.useState)({}),C=(a,b)=>{t(c=>({...c,[a]:b})),A[a]&&B(b=>({...b,[a]:void 0}))},D=async()=>{if((()=>{let a={};return s.name.trim()||(a.name="请输入姓名"),s.phone?/^1[3-9]\d{9}$/.test(s.phone)||(a.phone="请输入正确的手机号"):a.phone="请输入手机号",s.password?s.password.length<6&&(a.password="密码至少需要6个字符"):a.password="请输入密码",s.password!==s.confirmPassword&&(a.confirmPassword="两次输入的密码不一致"),s.agreeTerms||(a.agreeTerms="请同意服务条款和隐私政策"),B(a),0===Object.keys(a).length})()){z(!0),B({});try{let b=window.localStorage.getItem("APPLICATION_CONFIG"),c=JSON.parse(b||"{}"),d=c?.id,e=await f.L.post(`/api/modules/system/user/register?applicationId=${d}`,{phone_number:s.phone,password:s.password,name:s.name});if(console.log("注册响应:",e),e?.success)r("success"),setTimeout(()=>{a?.(s)},1500);else throw Error(e?.error||"注册失败")}catch(b){console.error("注册失败:",b);let a=b.message||"注册失败，请重试";B(b=>({...b,phone:a}))}finally{z(!1)}}},E=(0,g.usePathname)(),[F,G]=(0,e.useState)(null),H=F?.titleColor?{color:F.titleColor}:void 0,I=F?.bodyColor?{color:F.bodyColor}:void 0,J=(0,e.useMemo)(()=>E?.startsWith("/en")?"en":"zh",[E]),K=(0,e.useMemo)(()=>{let a=F?.introTitle;return a?"string"==typeof a?a:a[J]||a.zh||a.en||null:null},[F,J]),L=(0,e.useMemo)(()=>{let a=F?.introText;return a?"string"==typeof a?a:a[J]||a.zh||a.en||null:null},[F,J]);return(0,d.jsx)("div",{className:"min-h-screen pb-8",children:(0,d.jsx)("div",{className:"pt-6",children:(0,d.jsxs)("div",{className:"container mx-auto px-4",children:["form"===q?(0,d.jsx)(p.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,d.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,d.jsxs)("div",{className:"text-center mb-8",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:H,children:K||("en"===J?"Create Account":"创建账户")}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",style:I,children:L||("en"===J?"Fill in the information to create your new account":"填写信息以创建您的新账户")})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"name",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"en"===J?"Name":"姓名"}),(0,d.jsxs)("div",{className:(0,h.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,d.jsx)(i.A,{className:"w-4 h-4 text-gray-400 ml-3"}),(0,d.jsx)("input",{id:"name",type:"text",className:"flex-1 px-3 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"en"===J?"Enter your name":"请输入您的姓名",value:s.name,onChange:a=>C("name",a.target.value)})]}),A.name&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-500",children:A.name})]}),(0,d.jsx)("div",{children:(0,d.jsx)(n.L,{value:s.phone,onChange:a=>C("phone",a),error:A.phone,placeholder:"en"===J?"Enter your phone number":"请输入手机号"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"password",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"en"===J?"Password":"密码"}),(0,d.jsxs)("div",{className:(0,h.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,d.jsx)(j.A,{className:"w-4 h-4 text-gray-400 ml-3"}),(0,d.jsx)("input",{id:"password",type:u?"text":"password",className:"flex-1 px-3 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"en"===J?"Enter your password (at least 6 characters)":"请输入密码（至少6个字符）",value:s.password,onChange:a=>C("password",a.target.value)}),(0,d.jsx)("button",{type:"button","aria-label":u?"隐藏密码":"显示密码",className:"pr-3 text-gray-500 hover:text-gray-700",onClick:()=>v(a=>!a),children:u?(0,d.jsx)(k.A,{className:"w-4 h-4"}):(0,d.jsx)(l.A,{className:"w-4 h-4"})})]}),A.password&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-500",children:A.password})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"confirmPassword",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"en"===J?"Confirm Password":"确认密码"}),(0,d.jsxs)("div",{className:(0,h.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,d.jsx)(j.A,{className:"w-4 h-4 text-gray-400 ml-3"}),(0,d.jsx)("input",{id:"confirmPassword",type:w?"text":"password",className:"flex-1 px-3 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"en"===J?"Enter your password again":"请再次输入密码",value:s.confirmPassword,onChange:a=>C("confirmPassword",a.target.value)}),(0,d.jsx)("button",{type:"button","aria-label":w?"隐藏密码":"显示密码",className:"pr-3 text-gray-500 hover:text-gray-700",onClick:()=>x(a=>!a),children:w?(0,d.jsx)(k.A,{className:"w-4 h-4"}):(0,d.jsx)(l.A,{className:"w-4 h-4"})})]}),A.confirmPassword&&(0,d.jsx)("p",{className:"mt-1 text-xs text-red-500",children:A.confirmPassword})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,d.jsx)("button",{type:"button",onClick:()=>C("agreeTerms",!s.agreeTerms),className:(0,h.cn)("mt-1 w-4 h-4 rounded border-2 flex items-center justify-center transition-colors",s.agreeTerms?"bg-blue-500 border-blue-500 text-white":"border-gray-300 hover:border-gray-400"),children:s.agreeTerms&&(0,d.jsx)(m.A,{className:"w-3 h-3"})}),(0,d.jsxs)("label",{className:"text-xs text-gray-600 leading-relaxed cursor-pointer",onClick:()=>C("agreeTerms",!s.agreeTerms),children:["en"===J?"I agree to the":"我同意"," ",(0,d.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-700 hover:underline",children:"en"===J?"Terms of Service":"服务条款"})," ","en"===J?"and":"和"," ",(0,d.jsx)("a",{href:"#",className:"text-blue-600 hover:text-blue-700 hover:underline",children:"en"===J?"Privacy Policy":"隐私政策"})]})]}),A.agreeTerms&&(0,d.jsx)("p",{className:"text-xs text-red-500",children:A.agreeTerms})]}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)(o.$,{type:"button",onClick:D,disabled:y,size:"lg",className:"w-full rounded-full h-12 text-base",variant:"default",children:y?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"en"===J?"Creating Account...":"创建账户中..."]}):"en"===J?"Create Account":"创建账户"})}),(0,d.jsxs)("div",{className:"text-center text-sm text-muted-foreground mt-4",children:["en"===J?"Already have an account?":"已有账户？"," ",(0,d.jsx)("button",{type:"button",className:"text-blue-600 hover:text-blue-700 hover:underline font-medium",onClick:b,children:"en"===J?"Sign In Now":"立即登录"})]})]})}):null,"success"===q?(0,d.jsx)(p.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,d.jsx)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,d.jsx)(m.A,{className:"w-8 h-8 text-green-600"})}),(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:H,children:"en"===J?"Account Created Successfully!":"账户创建成功！"}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",style:I,children:"en"===J?"Welcome to our platform":"欢迎加入我们的平台"})]})})}):null]})})})}},87563:(a,b,c)=>{c.d(b,{A:()=>d});let d=(0,c(3208).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])}};