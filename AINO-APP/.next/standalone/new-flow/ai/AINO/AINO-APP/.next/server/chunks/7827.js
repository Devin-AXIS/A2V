"use strict";exports.id=7827,exports.ids=[7827],exports.modules={47827:(a,b,c)=>{c.d(b,{S:()=>o});var d=c(80742),e=c(93531),f=c(30311),g=c(84336),h=c(88810),i=c(83119),j=c(33371),k=c(49454),l=c(2799),m=c(66497),n=c(56596);function o({onLogin:a,onRegister:b,onForgotPassword:c,className:o}){let[p,q]=(0,f.useState)("phone"),[r,s]=(0,f.useState)("phone"),[t,u]=(0,f.useState)(""),[v,w]=(0,f.useState)(""),[x,y]=(0,f.useState)(""),[z,A]=(0,f.useState)(!1),[B,C]=(0,f.useState)(!1),[D,E]=(0,f.useState)(!1),[F,G]=(0,f.useState)({}),H=a=>{u(a),F.phone&&G(a=>({...a,phone:void 0}))},I=async()=>{if(!t)return void G(a=>({...a,phone:"请输入手机号"}));console.log("发送验证码到:",t),E(!0),s("verify")},J=async()=>{C(!0),G({});try{let b={};if(t||(b.phone="请输入手机号"),"phone"===p?v||(b.code="请输入验证码"):x||(b.password="请输入密码"),Object.keys(b).length>0)return void G(b);let c=window.localStorage.getItem("APPLICATION_CONFIG"),d=JSON.parse(c),f=d?.id,g=await e.A.post(`http://47.94.52.142:3007/api/modules/system/user/login?applicationId=${f}`,{password:x,phone_number:t}),h=g.data?.data;a?.(h)}catch(a){console.error("登录失败:",a),G(a=>({...a,..."password"===p?{password:"登录失败，请检查手机号或密码"}:{code:"登录失败，请检查验证码"}}))}finally{C(!1)}},K=(0,g.usePathname)(),[L,M]=(0,f.useState)(null),N=(0,f.useMemo)(()=>L&&Array.isArray(L.providers)?[{key:"phone",enabled:!0},...L.providers.filter(a=>a&&a.key&&["phone","wechat","bytedance","google","apple"].includes(a.key)).filter(a=>"phone"!==a.key)]:[{key:"phone",enabled:!0},{key:"wechat",enabled:!1},{key:"bytedance",enabled:!1},{key:"google",enabled:!1},{key:"apple",enabled:!1}],[L]),O=L?.titleColor?{color:L.titleColor}:void 0,P=L?.bodyColor?{color:L.bodyColor}:void 0,Q=(0,f.useMemo)(()=>K?.startsWith("/en")?"en":"zh",[K]),R=(0,f.useMemo)(()=>{let a=L?.introTitle;return a?"string"==typeof a?a:a[Q]||a.zh||a.en||null:null},[L,Q]),S=(0,f.useMemo)(()=>{let a=L?.introText;return a?"string"==typeof a?a:a[Q]||a.zh||a.en||null:null},[L,Q]),T=()=>(0,d.jsxs)("div",{className:"flex items-center justify-center gap-6 pt-10",children:[N.find(a=>"wechat"===a.key)?.enabled&&(0,d.jsx)("button",{"aria-label":"wechat",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:"微"}),N.find(a=>"bytedance"===a.key)?.enabled&&(0,d.jsx)("button",{"aria-label":"bytedance",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:"字"}),N.find(a=>"google"===a.key)?.enabled&&(0,d.jsx)("button",{"aria-label":"google",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:"G"}),N.find(a=>"apple"===a.key)?.enabled&&(0,d.jsx)("button",{"aria-label":"apple",className:"size-14 rounded-full bg-white/80 shadow border flex items-center justify-center",children:""})]});return(0,d.jsx)("div",{className:"min-h-screen pb-8",children:(0,d.jsx)("div",{className:"pt-6",children:(0,d.jsxs)("div",{className:"container mx-auto px-4",children:["phone"===r?(0,d.jsx)(n.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,d.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,d.jsxs)("div",{className:"text-center mb-8",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:O,children:R||("en"===Q?"Sign in or register":"手机号登录或注册")}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",style:P,children:S||("en"===Q?"The code will be sent to your phone":"验证码将发送至你的手机")})]}),(0,d.jsx)("div",{className:"mb-5",children:(0,d.jsx)(k.L,{value:t,onChange:H,error:F.phone,placeholder:"请输入手机号"})}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsx)(m.$,{type:"button",variant:"secondary",className:"w-full rounded-full h-11",disabled:!t,onClick:I,children:"获取验证码"})}),(0,d.jsx)("div",{className:"text-center text-sm text-muted-foreground",children:(0,d.jsx)("button",{type:"button",className:"underline underline-offset-4 hover:text-foreground",onClick:()=>{q("password"),s("password")},children:"使用密码登录"})}),T()]})}):null,"verify"===r?(0,d.jsx)(n.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,d.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,d.jsxs)("div",{className:"text-center mb-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold mb-2",style:O,children:R||("en"===Q?"Verify code":"输入验证码")}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",style:P,children:S||("en"===Q?"The code will be sent to your phone":"验证码将发送至你的手机")})]}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsx)(l.P,{value:v,onChange:a=>{w(a),F.code&&G(a=>({...a,code:void 0}))},error:F.code,onComplete:a=>w(a),size:"sm"})}),(0,d.jsx)(m.$,{type:"button",onClick:J,disabled:B||v.length<4,size:"lg",className:"w-full rounded-full h-12 text-base",variant:"default",children:B?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"继续中..."]}):"en"===Q?"Continue":"继续"}),(0,d.jsx)("div",{className:"text-center text-sm text-muted-foreground mt-4",children:(0,d.jsx)("button",{type:"button",className:"underline underline-offset-4 hover:text-foreground",onClick:()=>{q("password"),s("password")},children:"使用密码登录"})}),T()]})}):null,"password"===r?(0,d.jsx)(n.P.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.25},children:(0,d.jsxs)("div",{className:"max-w-sm mx-auto pt-8 pb-8",children:[(0,d.jsxs)("div",{className:"text-center mb-8",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:O,children:R||("en"===Q?"Sign in with password":"手机号 + 密码登录")}),(0,d.jsx)("p",{className:"text-sm text-muted-foreground",style:P,children:S||("en"===Q?"Enter your phone and password":"请输入你的手机号与密码")})]}),(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsx)(k.L,{value:t,onChange:H,error:F.phone,placeholder:"请输入手机号"})}),(0,d.jsx)("div",{className:"mb-1",children:(0,d.jsxs)("div",{className:"w-full max-w-sm",children:[(0,d.jsx)("label",{htmlFor:"password",className:"block text-xs font-medium text-gray-600 mb-1.5",children:"密码"}),(0,d.jsxs)("div",{className:(0,h.cn)("group bg-white/70 backdrop-blur-lg rounded-xl shadow-sm border border-white/80 transition-all duration-300","focus-within:ring-2 focus-within:shadow-lg","flex items-center"),children:[(0,d.jsx)("input",{id:"password",type:z?"text":"password",className:"flex-1 px-3.5 py-2.5 bg-transparent outline-none text-gray-900 placeholder:text-gray-400 text-sm",placeholder:"请输入密码",value:x,onChange:a=>{y(a.target.value),F.password&&G(a=>({...a,password:void 0}))}}),(0,d.jsx)("button",{type:"button","aria-label":z?"隐藏密码":"显示密码",className:"pr-3 text-gray-500 hover:text-gray-700",onClick:()=>A(a=>!a),children:z?(0,d.jsx)(i.A,{className:"w-4 h-4"}):(0,d.jsx)(j.A,{className:"w-4 h-4"})})]}),F.password?(0,d.jsx)("p",{className:"mt-1 text-xs text-red-500",children:F.password}):null]})}),(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,d.jsx)("button",{type:"button",className:"underline underline-offset-4 hover:text-foreground",onClick:()=>{q("phone"),s("phone")},children:"使用验证码登录"})}),(0,d.jsx)("div",{className:"text-sm",children:(0,d.jsx)("button",{type:"button",className:"text-blue-600 hover:underline",onClick:c,children:"忘记密码？"})})]}),(0,d.jsx)(m.$,{type:"button",onClick:J,disabled:B||!t||!x,size:"lg",className:"w-full rounded-full h-12 text-base",variant:"default",children:B?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"登录中..."]}):"登录"}),T()]})}):null]})})})}}};