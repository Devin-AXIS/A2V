{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/wemo/new-flow/A2V/app/api/configs/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { promises as fs } from 'fs';\nimport path from 'path';\n\nconst CONFIGS_DIR = path.join(process.cwd(), 'data', 'mcp-configs');\nconst CONFIGS_FILE = path.join(CONFIGS_DIR, 'configs.json');\n\n// 读取所有配置\nasync function readConfigs() {\n    try {\n        const data = await fs.readFile(CONFIGS_FILE, 'utf-8');\n        return JSON.parse(data);\n    } catch (error: any) {\n        if (error.code === 'ENOENT') {\n            return [];\n        }\n        console.error('读取配置失败:', error);\n        return [];\n    }\n}\n\nexport async function GET(request: NextRequest) {\n    try {\n        const configs = await readConfigs();\n\n        // 返回配置列表（不包含详细的连接配置，只返回基本信息）\n        const configList = configs.map((config: any) => ({\n            config: config,\n            id: config.id,\n            title: config.title,\n            description: config.description,\n            connectionType: config.connectionType,\n            createdAt: config.createdAt,\n        }));\n\n        // 按创建时间倒序排列（最新的在前）\n        configList.sort((a: any, b: any) =>\n            new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n        );\n\n        return NextResponse.json({\n            success: true,\n            configs: configList,\n            total: configList.length,\n        });\n    } catch (error: any) {\n        console.error('获取配置列表失败:', error);\n        return NextResponse.json(\n            {\n                success: false,\n                error: '获取配置列表失败',\n                message: error.message || '获取配置列表时发生错误',\n            },\n            { status: 500 }\n        );\n    }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,cAAc,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AACrD,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,aAAa;AAE5C,SAAS;AACT,eAAe;IACX,IAAI;QACA,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,cAAc;QAC7C,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAY;QACjB,IAAI,MAAM,IAAI,KAAK,UAAU;YACzB,OAAO,EAAE;QACb;QACA,QAAQ,KAAK,CAAC,WAAW;QACzB,OAAO,EAAE;IACb;AACJ;AAEO,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,UAAU,MAAM;QAEtB,6BAA6B;QAC7B,MAAM,aAAa,QAAQ,GAAG,CAAC,CAAC,SAAgB,CAAC;gBAC7C,QAAQ;gBACR,IAAI,OAAO,EAAE;gBACb,OAAO,OAAO,KAAK;gBACnB,aAAa,OAAO,WAAW;gBAC/B,gBAAgB,OAAO,cAAc;gBACrC,WAAW,OAAO,SAAS;YAC/B,CAAC;QAED,mBAAmB;QACnB,WAAW,IAAI,CAAC,CAAC,GAAQ,IACrB,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;QAGnE,OAAO,qSAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT,SAAS;YACT,OAAO,WAAW,MAAM;QAC5B;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,aAAa;QAC3B,OAAO,qSAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO,IAAI;QAC9B,GACA;YAAE,QAAQ;QAAI;IAEtB;AACJ","debugId":null}}]
}