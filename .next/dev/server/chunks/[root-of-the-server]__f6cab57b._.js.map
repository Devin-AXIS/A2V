{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///Users/wemo/new-flow/A2V/app/api/config/%5BconfigId%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { promises as fs } from 'fs';\nimport path from 'path';\n\nconst CONFIGS_DIR = path.join(process.cwd(), 'data', 'mcp-configs');\nconst CONFIGS_FILE = path.join(CONFIGS_DIR, 'configs.json');\n\n// 读取所有配置\nasync function readConfigs() {\n    try {\n        const data = await fs.readFile(CONFIGS_FILE, 'utf-8');\n        return JSON.parse(data);\n    } catch (error: any) {\n        if (error.code === 'ENOENT') {\n            return [];\n        }\n        console.error('读取配置失败:', error);\n        return [];\n    }\n}\n\nexport async function GET(\n    request: NextRequest,\n    { params }: { params: Promise<{ configId: string }> | { configId: string } }\n) {\n    try {\n        const resolvedParams = params instanceof Promise ? await params : params;\n        const { configId } = resolvedParams;\n\n        if (!configId) {\n            return NextResponse.json(\n                {\n                    success: false,\n                    error: '缺少配置ID',\n                },\n                { status: 400 }\n            );\n        }\n\n        // 读取所有配置\n        const configs = await readConfigs();\n\n        // 查找指定ID的配置\n        const config = configs.find((c: any) => c.id === configId);\n\n        if (!config) {\n            return NextResponse.json(\n                {\n                    success: false,\n                    error: '配置不存在',\n                    message: `找不到ID为 ${configId} 的配置`,\n                },\n                { status: 404 }\n            );\n        }\n\n        return NextResponse.json({\n            success: true,\n            config,\n        });\n    } catch (error: any) {\n        console.error('获取MCP配置失败:', error);\n        return NextResponse.json(\n            {\n                success: false,\n                error: '获取配置失败',\n                message: error.message || '获取MCP配置时发生错误',\n            },\n            { status: 500 }\n        );\n    }\n}\n\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEA,MAAM,cAAc,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AACrD,MAAM,eAAe,4GAAI,CAAC,IAAI,CAAC,aAAa;AAE5C,SAAS;AACT,eAAe;IACX,IAAI;QACA,MAAM,OAAO,MAAM,yGAAE,CAAC,QAAQ,CAAC,cAAc;QAC7C,OAAO,KAAK,KAAK,CAAC;IACtB,EAAE,OAAO,OAAY;QACjB,IAAI,MAAM,IAAI,KAAK,UAAU;YACzB,OAAO,EAAE;QACb;QACA,QAAQ,KAAK,CAAC,WAAW;QACzB,OAAO,EAAE;IACb;AACJ;AAEO,eAAe,IAClB,OAAoB,EACpB,EAAE,MAAM,EAAoE;IAE5E,IAAI;QACA,MAAM,iBAAiB,kBAAkB,UAAU,MAAM,SAAS;QAClE,MAAM,EAAE,QAAQ,EAAE,GAAG;QAErB,IAAI,CAAC,UAAU;YACX,OAAO,qSAAY,CAAC,IAAI,CACpB;gBACI,SAAS;gBACT,OAAO;YACX,GACA;gBAAE,QAAQ;YAAI;QAEtB;QAEA,SAAS;QACT,MAAM,UAAU,MAAM;QAEtB,YAAY;QACZ,MAAM,SAAS,QAAQ,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;QAEjD,IAAI,CAAC,QAAQ;YACT,OAAO,qSAAY,CAAC,IAAI,CACpB;gBACI,SAAS;gBACT,OAAO;gBACP,SAAS,CAAC,OAAO,EAAE,SAAS,IAAI,CAAC;YACrC,GACA;gBAAE,QAAQ;YAAI;QAEtB;QAEA,OAAO,qSAAY,CAAC,IAAI,CAAC;YACrB,SAAS;YACT;QACJ;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,qSAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;YACP,SAAS,MAAM,OAAO,IAAI;QAC9B,GACA;YAAE,QAAQ;QAAI;IAEtB;AACJ","debugId":null}}]
}