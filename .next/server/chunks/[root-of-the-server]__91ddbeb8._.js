module.exports=[23718,e=>{"use strict";var t=e.i(31584),r=e.i(97831),s=e.i(2913);if(void 0===globalThis.EventSource){let t=e.r(52845),r=t.EventSource||t.default?.EventSource||t.default||t;if("function"==typeof r)globalThis.EventSource=r;else throw Error("无法加载 EventSource polyfill")}function i(){return"undefined"!=typeof globalThis?(globalThis.__mcpActiveClients||(globalThis.__mcpActiveClients=new Map,console.log("[MCP Client] 初始化全局连接存储")),globalThis.__mcpActiveClients):new Map}let o={get size(){return i().size},get:e=>i().get(e),set:(e,t)=>(i().set(e,t),i()),has:e=>i().has(e),delete:e=>i().delete(e),clear:()=>i().clear(),keys:()=>i().keys(),values:()=>i().values(),entries:()=>i().entries(),forEach:e=>{i().forEach(e)},[Symbol.iterator]:()=>i()[Symbol.iterator]()};async function n(e,o,n){let a;if(!e)throw Error("缺少连接参数（URL 或命令）");let l=new t.Client({name:"mcp-web-client",version:"1.0.0"},{capabilities:{tools:{},prompts:{},resources:{}}});if(e.startsWith("http://")||e.startsWith("https://"))try{let t=new URL(e);if(t.searchParams.has("configId")||"/"===t.pathname||""===t.pathname||!t.pathname.includes("/sse")&&!t.pathname.includes("/mcp")&&!t.pathname.includes("/api")){let e=t.searchParams.get("configId");if(e)throw Error(`您提供的是前端页面 URL，不是 MCP 服务器的 SSE 端点。
如果您想使用配置 ID "${e}" 连接，请使用以下方式之一：
1. 访问 /config/${e} 页面来自动连接
2. 在"配置管理"中查看该配置的实际 MCP 服务器 URL
3. 在连接表单中输入 MCP 服务器的 SSE URL（通常以 /sse 结尾）`);throw Error(`您提供的是前端页面 URL，不是 MCP 服务器的 SSE 端点。
请提供 MCP 服务器的 SSE URL（例如：https://mcp.example.com/sse）`)}a=new s.SSEClientTransport(t)}catch(e){if(e.message&&(e.message.includes("前端页面")||e.message.includes("SSE 端点")))throw e;throw Error(`无效的 URL: ${e.message}`)}else{if(!o)throw Error("使用命令行连接时，必须提供 args 参数");a=new r.StdioClientTransport({command:e,args:o||[]})}try{await l.connect(a)}catch(e){if(a instanceof s.SSEClientTransport){let t=e.message||String(e);if(t.includes("text/event-stream")||t.includes("Invalid content type"))throw Error(`SSE 连接失败：服务器未返回正确的 SSE 流（text/event-stream）。
这可能是因为：
1. URL 不正确（您提供的是前端页面 URL 而不是 MCP SSE 端点）
2. MCP 服务器未正确配置 SSE 端点
3. URL 指向的不是 MCP 服务器

请确认您使用的是 MCP 服务器的 SSE URL（通常以 /sse 结尾）`)}throw e}let c=n||`conn_${Date.now()}`,h=i();return h.set(c,{client:l,transport:a}),console.log(`[MCP Client] 连接成功，ID: ${c}`),console.log(`[MCP Client] 当前活跃连接数: ${h.size}`),console.log(`[MCP Client] 所有连接ID:`,Array.from(h.keys())),c}async function a(e){let t=i(),r=t.get(e);if(!r)throw Error("连接不存在");let{client:s}=r;await s.close(),t.delete(e),console.log(`[MCP Client] 已断开连接: ${e}`)}function l(e){let t=i();console.log(`[MCP Client] 查找连接: ${e}`),console.log(`[MCP Client] 当前活跃连接:`,Array.from(t.keys())),console.log(`[MCP Client] 连接总数: ${t.size}`);let r=t.get(e);if(!r)throw console.error(`[MCP Client] 连接不存在: ${e}`),console.error(`[MCP Client] 可用连接ID:`,Array.from(t.keys())),Error(`连接不存在: ${e}`);return console.log(`[MCP Client] 找到连接: ${e}`),r.client}e.s(["activeClients",0,o,"connectMCP",()=>n,"disconnectMCP",()=>a,"getClient",()=>l])},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},31584,e=>{"use strict";var t=e.i(22493);class r{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this.setNotificationHandler(t.CancelledNotificationSchema,e=>{let t=this._requestHandlerAbortControllers.get(e.params.requestId);null==t||t.abort(e.params.reason)}),this.setNotificationHandler(t.ProgressNotificationSchema,e=>{this._onprogress(e)}),this.setRequestHandler(t.PingRequestSchema,e=>({}))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=e=>{this._onerror(e)},this._transport.onmessage=e=>{"method"in e?"id"in e?this._onrequest(e):this._onnotification(e):this._onresponse(e)},await this._transport.start()}_onclose(){var e;let r=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,null==(e=this.onclose)||e.call(this);let s=new t.McpError(t.ErrorCode.ConnectionClosed,"Connection closed");for(let e of r.values())e(s)}_onerror(e){var t;null==(t=this.onerror)||t.call(this,e)}_onnotification(e){var t;let r=null!=(t=this._notificationHandlers.get(e.method))?t:this.fallbackNotificationHandler;void 0!==r&&Promise.resolve().then(()=>r(e)).catch(e=>this._onerror(Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e){var r,s;let i=null!=(r=this._requestHandlers.get(e.method))?r:this.fallbackRequestHandler;if(void 0===i){null==(s=this._transport)||s.send({jsonrpc:"2.0",id:e.id,error:{code:t.ErrorCode.MethodNotFound,message:"Method not found"}}).catch(e=>this._onerror(Error(`Failed to send an error response: ${e}`)));return}let o=new AbortController;this._requestHandlerAbortControllers.set(e.id,o),Promise.resolve().then(()=>i(e,{signal:o.signal})).then(t=>{var r;if(!o.signal.aborted)return null==(r=this._transport)?void 0:r.send({result:t,jsonrpc:"2.0",id:e.id})},r=>{var s,i;if(!o.signal.aborted)return null==(s=this._transport)?void 0:s.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(r.code)?r.code:t.ErrorCode.InternalError,message:null!=(i=r.message)?i:"Internal error"}})}).catch(e=>this._onerror(Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progress:t,total:r,progressToken:s}=e.params,i=this._progressHandlers.get(Number(s));void 0===i?this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`)):i({progress:t,total:r})}_onresponse(e){let r=e.id,s=this._responseHandlers.get(Number(r));void 0===s?this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`)):(this._responseHandlers.delete(Number(r)),this._progressHandlers.delete(Number(r)),s("result"in e?e:new t.McpError(e.error.code,e.error.message,e.error.data)))}get transport(){return this._transport}async close(){var e;await (null==(e=this._transport)?void 0:e.close())}request(e,t,r){return new Promise((s,i)=>{var o,n,a;if(!this._transport)return void i(Error("Not connected"));(null==(o=this._options)?void 0:o.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),null==(n=null==r?void 0:r.signal)||n.throwIfAborted();let l=this._requestMessageId++,c={...e,jsonrpc:"2.0",id:l};(null==r?void 0:r.onprogress)&&(this._progressHandlers.set(l,r.onprogress),c.params={...e.params,_meta:{progressToken:l}}),this._responseHandlers.set(l,e=>{var o;if(null==(o=null==r?void 0:r.signal)||!o.aborted){if(e instanceof Error)return i(e);try{let r=t.parse(e.result);s(r)}catch(e){i(e)}}}),null==(a=null==r?void 0:r.signal)||a.addEventListener("abort",()=>{var e,t;let s=null==(e=null==r?void 0:r.signal)?void 0:e.reason;this._responseHandlers.delete(l),this._progressHandlers.delete(l),null==(t=this._transport)||t.send({jsonrpc:"2.0",method:"cancelled",params:{requestId:l,reason:String(s)}}),i(s)}),this._transport.send(c).catch(i)})}async notification(e){if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(e.method);let t={...e,jsonrpc:"2.0"};await this._transport.send(t)}setRequestHandler(e,t){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,s)=>Promise.resolve(t(e.parse(r),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}setNotificationHandler(e,t){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(t(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}}class s extends r{constructor(e,t){super(t),this._clientInfo=e,this._capabilities=t.capabilities}assertCapability(e,t){var r;if(!(null==(r=this._serverCapabilities)?void 0:r[e]))throw Error(`Server does not support ${e} (required for ${t})`)}async connect(e){await super.connect(e);try{let e=await this.request({method:"initialize",params:{protocolVersion:t.LATEST_PROTOCOL_VERSION,capabilities:this._capabilities,clientInfo:this._clientInfo}},t.InitializeResultSchema);if(void 0===e)throw Error(`Server sent invalid initialize result: ${e}`);if(!t.SUPPORTED_PROTOCOL_VERSIONS.includes(e.protocolVersion))throw Error(`Server's protocol version is not supported: ${e.protocolVersion}`);this._serverCapabilities=e.capabilities,this._serverVersion=e.serverInfo,await this.notification({method:"notifications/initialized"})}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}assertCapabilityForMethod(e){var t,r,s,i,o;switch(e){case"logging/setLevel":if(!(null==(t=this._serverCapabilities)?void 0:t.logging))throw Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(null==(r=this._serverCapabilities)?void 0:r.prompts))throw Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(null==(s=this._serverCapabilities)?void 0:s.resources))throw Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(null==(i=this._serverCapabilities)?void 0:i.tools))throw Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(null==(o=this._serverCapabilities)?void 0:o.prompts))throw Error(`Server does not support prompts (required for ${e})`)}}assertNotificationCapability(e){var t;if("notifications/roots/list_changed"===e&&!(null==(t=this._capabilities.roots)?void 0:t.listChanged))throw Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw Error(`Client does not support roots capability (required for ${e})`)}}async ping(){return this.request({method:"ping"},t.EmptyResultSchema)}async complete(e,r){return this.request({method:"completion/complete",params:e},t.CompleteResultSchema,r)}async setLoggingLevel(e){return this.request({method:"logging/setLevel",params:{level:e}},t.EmptyResultSchema)}async getPrompt(e,r){return this.request({method:"prompts/get",params:e},t.GetPromptResultSchema,r)}async listPrompts(e,r){return this.request({method:"prompts/list",params:e},t.ListPromptsResultSchema,r)}async listResources(e,r){return this.request({method:"resources/list",params:e},t.ListResourcesResultSchema,r)}async listResourceTemplates(e,r){return this.request({method:"resources/templates/list",params:e},t.ListResourceTemplatesResultSchema,r)}async readResource(e,r){return this.request({method:"resources/read",params:e},t.ReadResourceResultSchema,r)}async subscribeResource(e){return this.request({method:"resources/subscribe",params:e},t.EmptyResultSchema)}async unsubscribeResource(e){return this.request({method:"resources/unsubscribe",params:e},t.EmptyResultSchema)}async callTool(e,r=t.CallToolResultSchema,s){return this.request({method:"tools/call",params:e},r,s)}async listTools(e,r){return this.request({method:"tools/list",params:e},t.ListToolsResultSchema,r)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}e.s(["Client",()=>s],31584)},2913,e=>{"use strict";var t=e.i(22493);class r{constructor(e){this._url=e}start(){if(this._eventSource)throw Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{this._eventSource=new EventSource(this._url.href),this._abortController=new AbortController,this._eventSource.onerror=e=>{var t;let s=Error(`SSE error: ${JSON.stringify(e)}`);r(s),null==(t=this.onerror)||t.call(this,s)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",t=>{var s;try{if(this._endpoint=new URL(t.data,this._url),this._endpoint.origin!==this._url.origin)throw Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(e){r(e),null==(s=this.onerror)||s.call(this,e),this.close();return}e()}),this._eventSource.onmessage=e=>{var r,s;let i;try{i=t.JSONRPCMessageSchema.parse(JSON.parse(e.data))}catch(e){null==(r=this.onerror)||r.call(this,e);return}null==(s=this.onmessage)||s.call(this,i)}})}async close(){var e,t,r;null==(e=this._abortController)||e.abort(),null==(t=this._eventSource)||t.close(),null==(r=this.onclose)||r.call(this)}async send(e){var t,r;if(!this._endpoint)throw Error("Not connected");try{let r=await fetch(this._endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),signal:null==(t=this._abortController)?void 0:t.signal});if(!r.ok){let e=await r.text().catch(()=>null);throw Error(`Error POSTing to endpoint (HTTP ${r.status}): ${e}`)}}catch(e){throw null==(r=this.onerror)||r.call(this,e),e}}}e.s(["SSEClientTransport",()=>r])},74533,(e,t,r)=>{t.exports=e.x("node:child_process",()=>require("node:child_process"))},59639,(e,t,r)=>{t.exports=e.x("node:process",()=>require("node:process"))},97831,e=>{"use strict";var t=e.i(74533),r=e.i(59639),s=e.i(22493);class i{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){var e;if(!this._buffer)return null;let t=this._buffer.indexOf("\n");if(-1===t)return null;let r=this._buffer.toString("utf8",0,t);return this._buffer=this._buffer.subarray(t+1),e=r,s.JSONRPCMessageSchema.parse(JSON.parse(e))}clear(){this._buffer=void 0}}let o="win32"===r.default.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function n(){let e={};for(let t of o){let s=r.default.env[t];void 0!==s&&(s.startsWith("()")||(e[t]=s))}return e}class a{constructor(e){this._abortController=new AbortController,this._readBuffer=new i,this._serverParams=e}async start(){if(this._process)throw Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,r)=>{var s,i,o,a,l,c;this._process=(0,t.spawn)(this._serverParams.command,null!=(s=this._serverParams.args)?s:[],{env:null!=(i=this._serverParams.env)?i:n(),stdio:["pipe","pipe",null!=(o=this._serverParams.stderr)?o:"inherit"],shell:!1,signal:this._abortController.signal}),this._process.on("error",e=>{var t,s;if("AbortError"===e.name){null==(t=this.onclose)||t.call(this);return}r(e),null==(s=this.onerror)||s.call(this,e)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{var t;this._process=void 0,null==(t=this.onclose)||t.call(this)}),null==(a=this._process.stdin)||a.on("error",e=>{var t;null==(t=this.onerror)||t.call(this,e)}),null==(l=this._process.stdout)||l.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),null==(c=this._process.stdout)||c.on("error",e=>{var t;null==(t=this.onerror)||t.call(this,e)})})}processReadBuffer(){for(var e,t;;)try{let t=this._readBuffer.readMessage();if(null===t)break;null==(e=this.onmessage)||e.call(this,t)}catch(e){null==(t=this.onerror)||t.call(this,e)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(t=>{var r;if(!(null==(r=this._process)?void 0:r.stdin))throw Error("Not connected");let s=JSON.stringify(e)+"\n";this._process.stdin.write(s)?t():this._process.stdin.once("drain",t)})}}e.s(["DEFAULT_INHERITED_ENV_VARS",0,o,"StdioClientTransport",()=>a,"getDefaultEnvironment",()=>n],97831)},76291,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});class s extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function i(e){}r.ParseError=s,r.createParser=function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=i,onError:r=i,onRetry:o=i,onComment:n}=e,a="",l=!0,c,h="",u="";function d(e){if(""===e)return void(h.length>0&&t({id:c,event:u||void 0,data:h.endsWith(`
`)?h.slice(0,-1):h}),c=void 0,h="",u="");if(e.startsWith(":")){n&&n(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),s=" "===e[r+1]?2:1;p(t,e.slice(r+s),e);return}p(e,"",e)}function p(e,t,i){switch(e){case"event":u=t;break;case"data":h=`${h}${t}
`;break;case"id":c=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?o(parseInt(t,10)):r(new s(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:i}));break;default:r(new s(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:i}))}}return{feed:function(e){let t=l?e.replace(/^\xEF\xBB\xBF/,""):e,[r,s]=function(e){let t=[],r="",s=0;for(;s<e.length;){let i=e.indexOf("\r",s),o=e.indexOf(`
`,s),n=-1;if(-1!==i&&-1!==o?n=Math.min(i,o):-1!==i?n=i===e.length-1?-1:i:-1!==o&&(n=o),-1===n){r=e.slice(s);break}{let r=e.slice(s,n);t.push(r),"\r"===e[(s=n+1)-1]&&e[s]===`
`&&s++}}return[t,r]}(`${a}${t}`);for(let e of r)d(e);a=s,l=!1},reset:function(e={}){a&&e.consume&&d(a),l=!0,c=void 0,h="",u="",a=""}}}},52845,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=e.r(76291);class i extends Event{constructor(e,t){var r,s;super(e),this.code=null!=(r=null==t?void 0:t.code)?r:void 0,this.message=null!=(s=null==t?void 0:t.message)?s:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,t,r){return r(o(this),t)}[Symbol.for("Deno.customInspect")](e,t){return e(o(this),t)}}function o(e){return{type:e.type,message:e.message,code:e.code,defaultPrevented:e.defaultPrevented,cancelable:e.cancelable,timeStamp:e.timeStamp}}var n,a,l,c,h,u,d,p,f,v,m,g,_,E,b,w,C,S,y,R,M,P,x,T=e=>{throw TypeError(e)},N=(e,t,r)=>t.has(e)||T("Cannot "+r),k=(e,t,r)=>(N(e,t,"read from private field"),r?r.call(e):t.get(e)),O=(e,t,r)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),q=(e,t,r,s)=>(N(e,t,"write to private field"),t.set(e,r),r),L=(e,t,r)=>(N(e,t,"access private method"),r);class I extends EventTarget{constructor(e,t){var r,i;super(),O(this,E),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,O(this,n),O(this,a),O(this,l),O(this,c),O(this,h),O(this,u),O(this,d),O(this,p,null),O(this,f),O(this,v),O(this,m,null),O(this,g,null),O(this,_,null),O(this,w,async e=>{var t;k(this,v).reset();let{body:r,redirected:s,status:i,headers:o}=e;if(204===i){L(this,E,M).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(s?q(this,l,new URL(e.url)):q(this,l,void 0),200!==i)return void L(this,E,M).call(this,`Non-200 status code (${i})`,i);if(!(o.get("content-type")||"").startsWith("text/event-stream"))return void L(this,E,M).call(this,'Invalid content type, expected "text/event-stream"',i);if(k(this,n)===this.CLOSED)return;q(this,n,this.OPEN);let a=new Event("open");if(null==(t=k(this,_))||t.call(this,a),this.dispatchEvent(a),"object"!=typeof r||!r||!("getReader"in r)){L(this,E,M).call(this,"Invalid response body, expected a web ReadableStream",i),this.close();return}let c=new TextDecoder,h=r.getReader(),u=!0;do{let{done:e,value:t}=await h.read();t&&k(this,v).feed(c.decode(t,{stream:!e})),e&&(u=!1,k(this,v).reset(),L(this,E,P).call(this))}while(u)}),O(this,C,e=>{q(this,f,void 0),"AbortError"!==e.name&&"aborted"!==e.type&&L(this,E,P).call(this,function e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${e(t.cause)}`:t.message:`${t}`}(e))}),O(this,y,e=>{"string"==typeof e.id&&q(this,p,e.id);let t=new MessageEvent(e.event||"message",{data:e.data,origin:k(this,l)?k(this,l).origin:k(this,a).origin,lastEventId:e.id||""});k(this,g)&&(!e.event||"message"===e.event)&&k(this,g).call(this,t),this.dispatchEvent(t)}),O(this,R,e=>{q(this,u,e)}),O(this,x,()=>{q(this,d,void 0),k(this,n)===this.CONNECTING&&L(this,E,b).call(this)});try{if(e instanceof URL)q(this,a,e);else if("string"==typeof e)q(this,a,new URL(e,function(){let e="document"in globalThis?globalThis.document:void 0;return e&&"object"==typeof e&&"baseURI"in e&&"string"==typeof e.baseURI?e.baseURI:void 0}()));else throw Error("Invalid URL")}catch{throw function(e){let t=globalThis.DOMException;return"function"==typeof t?new t(e,"SyntaxError"):SyntaxError(e)}("An invalid or illegal string was specified")}q(this,v,s.createParser({onEvent:k(this,y),onRetry:k(this,R)})),q(this,n,this.CONNECTING),q(this,u,3e3),q(this,h,null!=(r=null==t?void 0:t.fetch)?r:globalThis.fetch),q(this,c,null!=(i=null==t?void 0:t.withCredentials)&&i),L(this,E,b).call(this)}get readyState(){return k(this,n)}get url(){return k(this,a).href}get withCredentials(){return k(this,c)}get onerror(){return k(this,m)}set onerror(e){q(this,m,e)}get onmessage(){return k(this,g)}set onmessage(e){q(this,g,e)}get onopen(){return k(this,_)}set onopen(e){q(this,_,e)}addEventListener(e,t,r){super.addEventListener(e,t,r)}removeEventListener(e,t,r){super.removeEventListener(e,t,r)}close(){k(this,d)&&clearTimeout(k(this,d)),k(this,n)!==this.CLOSED&&(k(this,f)&&k(this,f).abort(),q(this,n,this.CLOSED),q(this,f,void 0))}}n=new WeakMap,a=new WeakMap,l=new WeakMap,c=new WeakMap,h=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,v=new WeakMap,m=new WeakMap,g=new WeakMap,_=new WeakMap,E=new WeakSet,b=function(){q(this,n,this.CONNECTING),q(this,f,new AbortController),k(this,h)(k(this,a),L(this,E,S).call(this)).then(k(this,w)).catch(k(this,C))},w=new WeakMap,C=new WeakMap,S=function(){var e;let t={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...k(this,p)?{"Last-Event-ID":k(this,p)}:void 0},cache:"no-store",signal:null==(e=k(this,f))?void 0:e.signal};return"window"in globalThis&&(t.credentials=this.withCredentials?"include":"same-origin"),t},y=new WeakMap,R=new WeakMap,M=function(e,t){var r;k(this,n)!==this.CLOSED&&q(this,n,this.CLOSED);let s=new i("error",{code:t,message:e});null==(r=k(this,m))||r.call(this,s),this.dispatchEvent(s)},P=function(e,t){var r;if(k(this,n)===this.CLOSED)return;q(this,n,this.CONNECTING);let s=new i("error",{code:t,message:e});null==(r=k(this,m))||r.call(this,s),this.dispatchEvent(s),q(this,d,setTimeout(k(this,x),k(this,u)))},x=new WeakMap,I.CONNECTING=0,I.OPEN=1,I.CLOSED=2,r.ErrorEvent=i,r.EventSource=I}];

//# sourceMappingURL=%5Broot-of-the-server%5D__91ddbeb8._.js.map