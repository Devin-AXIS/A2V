# WorkloadToken ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

WorkloadToken ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå·¥ä½œé‡è¯æ˜çš„ä»£å¸æ”¯ä»˜ç³»ç»Ÿï¼Œé‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«ä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WorkloadToken ç³»ç»Ÿæ¶æ„                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   AIå®¢æˆ·ç«¯      â”‚    â”‚   MCPæœåŠ¡å™¨     â”‚    â”‚   æ™ºèƒ½åˆçº¦      â”‚ â”‚
â”‚  â”‚   (Client)      â”‚    â”‚   (MCP Server)  â”‚    â”‚   (Contract)    â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚ â”‚
â”‚  â”‚ â€¢ å·¥å…·å‘ç°      â”‚â—„â”€â”€â–ºâ”‚ â€¢ ä»»åŠ¡æ‰§è¡Œ      â”‚    â”‚ â€¢ å·¥ä½œé‡éªŒè¯    â”‚ â”‚
â”‚  â”‚ â€¢ æ”¯ä»˜å¤„ç†      â”‚    â”‚ â€¢ å·¥ä½œé‡è¿½è¸ª    â”‚    â”‚ â€¢ ä»£å¸åˆ†å‘      â”‚ â”‚
â”‚  â”‚ â€¢ å·¥ä½œè¯æ˜æäº¤  â”‚    â”‚ â€¢ x402æ”¯ä»˜åè®®  â”‚    â”‚ â€¢ å¥–åŠ±è®¡ç®—      â”‚ â”‚
â”‚  â”‚ â€¢ ç”¨æˆ·ç•Œé¢      â”‚    â”‚ â€¢ ä»»åŠ¡é˜Ÿåˆ—      â”‚    â”‚ â€¢ çŠ¶æ€ç®¡ç†      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â”‚                       â”‚                       â”‚       â”‚
â”‚           â”‚                       â”‚                       â”‚       â”‚
â”‚           â–¼                       â–¼                       â–¼       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ç”¨æˆ·é’±åŒ…      â”‚    â”‚   å·¥ä½œé‡å­˜å‚¨    â”‚    â”‚   åŒºå—é“¾ç½‘ç»œ    â”‚ â”‚
â”‚  â”‚   (Wallet)      â”‚    â”‚   (Storage)     â”‚    â”‚   (Blockchain)  â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚ â”‚
â”‚  â”‚ â€¢ ç§é’¥ç®¡ç†      â”‚    â”‚ â€¢ ä»»åŠ¡è®°å½•      â”‚    â”‚ â€¢ äº¤æ˜“ç¡®è®¤      â”‚ â”‚
â”‚  â”‚ â€¢ äº¤æ˜“ç­¾å      â”‚    â”‚ â€¢ å·¥ä½œé‡æ•°æ®    â”‚    â”‚ â€¢ çŠ¶æ€åŒæ­¥      â”‚ â”‚
â”‚  â”‚ â€¢ ä½™é¢æŸ¥è¯¢      â”‚    â”‚ â€¢ å†å²è®°å½•      â”‚    â”‚ â€¢ äº‹ä»¶ç›‘å¬      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ æ•°æ®æµç¨‹

### 1. ä»»åŠ¡æ‰§è¡Œæµç¨‹

```
ç”¨æˆ·è¯·æ±‚ â†’ å·¥å…·é€‰æ‹© â†’ è¾“å…¥éªŒè¯ â†’ ä»»åŠ¡æ‰§è¡Œ â†’ å·¥ä½œé‡è®°å½• â†’ å·¥ä½œè¯æ˜ç”Ÿæˆ
    â†“
æ”¯ä»˜æ£€æŸ¥ â†’ æ”¯ä»˜å¤„ç† â†’ ä»£å¸å¥–åŠ± â†’ çŠ¶æ€æ›´æ–°
```

### 2. æ”¯ä»˜å¤„ç†æµç¨‹

```
å·¥å…·è°ƒç”¨ â†’ æˆæœ¬æ£€æŸ¥ â†’ æ”¯ä»˜è¯·æ±‚(402) â†’ é’±åŒ…å¤„ç† â†’ äº¤æ˜“ç¡®è®¤ â†’ ä»»åŠ¡ç»§ç»­
```

### 3. å·¥ä½œé‡è¯æ˜æµç¨‹

```
ä»»åŠ¡å®Œæˆ â†’ æ•°æ®æ”¶é›† â†’ å“ˆå¸Œç”Ÿæˆ â†’ åˆçº¦æäº¤ â†’ éªŒè¯é€šè¿‡ â†’ ä»£å¸å‘æ”¾
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### MCPæœåŠ¡å™¨
- **è¿è¡Œæ—¶**: Node.js 16+
- **æ¡†æ¶**: Express.js
- **æ•°æ®åº“**: å†…å­˜å­˜å‚¨ (å¯æ‰©å±•ä¸ºRedis/PostgreSQL)
- **æ”¯ä»˜**: x402 HTTPçŠ¶æ€ç 
- **åŒºå—é“¾**: Web3.js

### æ™ºèƒ½åˆçº¦
- **è¯­è¨€**: Solidity 0.8.19+
- **æ¡†æ¶**: Hardhat
- **æ ‡å‡†**: ERC-20
- **åº“**: OpenZeppelin Contracts

### å®¢æˆ·ç«¯
- **è¿è¡Œæ—¶**: Node.js 16+
- **åŒºå—é“¾**: Web3.js / Ethers.js
- **UI**: Inquirer.js (å‘½ä»¤è¡Œç•Œé¢)
- **æ”¯ä»˜**: æ¨¡æ‹Ÿé’±åŒ…å®ç°

## ğŸ“Š æ•°æ®ç»“æ„

### å·¥ä½œé‡è¯æ˜ (WorkProof)

```typescript
interface WorkProof {
  taskId: string;           // ä»»åŠ¡å”¯ä¸€æ ‡è¯†
  toolName: string;         // å·¥å…·åç§°
  inputSize: number;        // è¾“å…¥æ•°æ®å¤§å°
  outputSize: number;       // è¾“å‡ºæ•°æ®å¤§å°
  executionTime: number;    // æ‰§è¡Œæ—¶é—´(ms)
  timestamp: number;        // æ—¶é—´æˆ³
  hash: string;            // å·¥ä½œé‡è¯æ˜å“ˆå¸Œ
  verified: boolean;       // éªŒè¯çŠ¶æ€
}
```

### ä»»åŠ¡å¥–åŠ±é…ç½® (TaskReward)

```typescript
interface TaskReward {
  toolName: string;         // å·¥å…·åç§°
  baseReward: number;       // åŸºç¡€å¥–åŠ±(Wei)
  timeMultiplier: number;   // æ—¶é—´ä¹˜æ•°
  sizeMultiplier: number;   // å¤§å°ä¹˜æ•°
  active: boolean;          // æ˜¯å¦æ¿€æ´»
}
```

### ç”¨æˆ·å·¥ä½œé‡ç»Ÿè®¡ (UserWorkload)

```typescript
interface UserWorkload {
  totalTasks: number;       // æ€»ä»»åŠ¡æ•°
  totalTokensEarned: number; // ç´¯è®¡ä»£å¸å¥–åŠ±
  lastActivity: number;     // æœ€åæ´»åŠ¨æ—¶é—´
  completedTasks: Map<string, boolean>; // å·²å®Œæˆä»»åŠ¡
}
```

## ğŸ” å®‰å…¨æœºåˆ¶

### 1. å·¥ä½œé‡è¯æ˜éªŒè¯

```solidity
function _verifyWorkProof(WorkProof memory proof) internal view returns (bool) {
    // æ£€æŸ¥ä»»åŠ¡å¥–åŠ±é…ç½®
    TaskReward memory reward = taskRewards[proof.toolName];
    if (!reward.active) return false;
    
    // éªŒè¯å·¥ä½œé‡è¯æ˜å“ˆå¸Œ
    bytes32 expectedHash = keccak256(abi.encodePacked(
        proof.taskId,
        proof.toolName,
        proof.inputSize,
        proof.outputSize,
        proof.executionTime,
        proof.timestamp
    ));
    
    return expectedHash == proof.proofHash;
}
```

### 2. é‡å…¥æ”»å‡»é˜²æŠ¤

```solidity
contract WorkloadToken is ReentrancyGuard {
    function submitWorkProof(...) external nonReentrant {
        // é˜²æ­¢é‡å…¥æ”»å‡»
    }
}
```

### 3. è¾“å…¥éªŒè¯

```javascript
// è¾“å…¥å¤§å°é™åˆ¶
const MIN_INPUT_SIZE = 1;
const MAX_INPUT_SIZE = 10000000;

// æ‰§è¡Œæ—¶é—´é™åˆ¶
const MIN_EXECUTION_TIME = 1000;  // 1ç§’
const MAX_EXECUTION_TIME = 300000; // 5åˆ†é’Ÿ
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. ä»»åŠ¡é˜Ÿåˆ—

```javascript
// ä»»åŠ¡é˜Ÿåˆ—ç®¡ç†
const taskQueue = new Map();

// å¹¶å‘æ§åˆ¶
const MAX_CONCURRENT_TASKS = 10;
const activeTasks = new Set();
```

### 2. ç¼“å­˜ç­–ç•¥

```javascript
// å·¥å…·ç»“æœç¼“å­˜
const resultCache = new Map();

// å·¥ä½œé‡è®°å½•ç¼“å­˜
const workloadCache = new Map();
```

### 3. æ•°æ®åº“ä¼˜åŒ–

```sql
-- å·¥ä½œé‡è®°å½•ç´¢å¼•
CREATE INDEX idx_workload_timestamp ON workloads(timestamp);
CREATE INDEX idx_workload_user ON workloads(user_address);
CREATE INDEX idx_workload_tool ON workloads(tool_name);
```

## ğŸ”„ æ‰©å±•æ€§è®¾è®¡

### 1. æ°´å¹³æ‰©å±•

- **MCPæœåŠ¡å™¨é›†ç¾¤**: ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨åˆ†å‘è¯·æ±‚
- **æ•°æ®åº“åˆ†ç‰‡**: æŒ‰ç”¨æˆ·æˆ–æ—¶é—´åˆ†ç‰‡å­˜å‚¨
- **ç¼“å­˜é›†ç¾¤**: Redisé›†ç¾¤æä¾›é«˜å¯ç”¨ç¼“å­˜

### 2. å‚ç›´æ‰©å±•

- **å·¥å…·æ’ä»¶åŒ–**: æ”¯æŒåŠ¨æ€åŠ è½½æ–°å·¥å…·
- **å¥–åŠ±ç­–ç•¥**: å¯é…ç½®çš„å¥–åŠ±è®¡ç®—è§„åˆ™
- **æ”¯ä»˜æ–¹å¼**: æ”¯æŒå¤šç§æ”¯ä»˜åè®®

### 3. å¾®æœåŠ¡æ‹†åˆ†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ä»»åŠ¡æœåŠ¡      â”‚    â”‚   æ”¯ä»˜æœåŠ¡      â”‚    â”‚   å¥–åŠ±æœåŠ¡      â”‚
â”‚  (Task Service) â”‚    â”‚ (Payment Service)â”‚    â”‚(Reward Service) â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â€¢ ä»»åŠ¡æ‰§è¡Œ      â”‚    â”‚ â€¢ æ”¯ä»˜å¤„ç†      â”‚    â”‚ â€¢ å¥–åŠ±è®¡ç®—      â”‚
â”‚ â€¢ å·¥å…·ç®¡ç†      â”‚    â”‚ â€¢ äº¤æ˜“éªŒè¯      â”‚    â”‚ â€¢ ä»£å¸åˆ†å‘      â”‚
â”‚ â€¢ é˜Ÿåˆ—ç®¡ç†      â”‚    â”‚ â€¢ é’±åŒ…é›†æˆ      â”‚    â”‚ â€¢ ç»Ÿè®¡æŠ¥å‘Š      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### 1. æŒ‡æ ‡ç›‘æ§

```javascript
// æ€§èƒ½æŒ‡æ ‡
const metrics = {
  tasksPerSecond: 0,
  averageExecutionTime: 0,
  errorRate: 0,
  activeUsers: 0
};

// ä¸šåŠ¡æŒ‡æ ‡
const businessMetrics = {
  totalTasksCompleted: 0,
  totalTokensDistributed: 0,
  averageRewardPerTask: 0,
  topTools: []
};
```

### 2. æ—¥å¿—è®°å½•

```javascript
// ç»“æ„åŒ–æ—¥å¿—
const logger = {
  info: (message, data) => console.log(JSON.stringify({
    level: 'info',
    timestamp: new Date().toISOString(),
    message,
    ...data
  })),
  
  error: (message, error) => console.error(JSON.stringify({
    level: 'error',
    timestamp: new Date().toISOString(),
    message,
    error: error.message,
    stack: error.stack
  }))
};
```

### 3. å¥åº·æ£€æŸ¥

```javascript
// å¥åº·æ£€æŸ¥ç«¯ç‚¹
app.get('/health', (req, res) => {
  const health = {
    status: 'healthy',
    uptime: process.uptime(),
    memory: process.memoryUsage(),
    tasks: {
      active: activeTasks.size,
      completed: completedTasks.size,
      failed: failedTasks.size
    },
    blockchain: {
      connected: web3.isConnected(),
      blockNumber: await web3.eth.getBlockNumber()
    }
  };
  
  res.json(health);
});
```

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCPæœåŠ¡å™¨     â”‚    â”‚   æ™ºèƒ½åˆçº¦      â”‚    â”‚   AIå®¢æˆ·ç«¯      â”‚
â”‚   localhost:3001â”‚    â”‚   localhost:8545â”‚    â”‚   å‘½ä»¤è¡Œç•Œé¢    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç”Ÿäº§ç¯å¢ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è´Ÿè½½å‡è¡¡å™¨    â”‚    â”‚   åŒºå—é“¾ç½‘ç»œ    â”‚    â”‚   ç›‘æ§ç³»ç»Ÿ      â”‚
â”‚   (Nginx)       â”‚    â”‚   (Ethereum)    â”‚    â”‚   (Prometheus)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCPæœåŠ¡å™¨é›†ç¾¤  â”‚    â”‚   æ™ºèƒ½åˆçº¦      â”‚    â”‚   æ—¥å¿—ç³»ç»Ÿ      â”‚
â”‚   (Docker)      â”‚    â”‚   (Deployed)    â”‚    â”‚   (ELK Stack)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ•°æ®åº“é›†ç¾¤    â”‚
â”‚   (PostgreSQL)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ é…ç½®ç®¡ç†

### ç¯å¢ƒå˜é‡

```bash
# MCPæœåŠ¡å™¨é…ç½®
PORT=3001
NODE_ENV=production
LOG_LEVEL=info

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:pass@localhost:5432/workload
REDIS_URL=redis://localhost:6379

# åŒºå—é“¾é…ç½®
RPC_URL=https://mainnet.infura.io/v3/YOUR_PROJECT_ID
CONTRACT_ADDRESS=0x...
PRIVATE_KEY=0x...

# æ”¯ä»˜é…ç½®
PAYMENT_ADDRESS=0x...
MIN_PAYMENT=0.001
MAX_PAYMENT=10.0
```

### é…ç½®æ–‡ä»¶

```yaml
# config.yaml
server:
  port: 3001
  workers: 4
  timeout: 30000

database:
  host: localhost
  port: 5432
  name: workload
  pool:
    min: 2
    max: 10

blockchain:
  network: mainnet
  gasPrice: 20000000000
  gasLimit: 500000

tools:
  text-processing:
    cost: 0.1
    timeout: 30000
  image-analysis:
    cost: 0.5
    timeout: 60000
```

---

è¿™ä¸ªæ¶æ„æ–‡æ¡£æä¾›äº† WorkloadToken ç³»ç»Ÿçš„å®Œæ•´æŠ€æœ¯æ¶æ„è¯´æ˜ï¼ŒåŒ…æ‹¬ç»„ä»¶è®¾è®¡ã€æ•°æ®æµç¨‹ã€å®‰å…¨æœºåˆ¶ã€æ€§èƒ½ä¼˜åŒ–å’Œéƒ¨ç½²æ–¹æ¡ˆã€‚
